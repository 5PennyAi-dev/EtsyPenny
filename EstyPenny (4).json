{
  "name": "EstyPenny",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "9d856f4f-d5ae-4fce-b2da-72f584288dc2",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -832,
        352
      ],
      "id": "695d3f8d-e9da-49a3-a4ef-1156be62bc4d",
      "name": "Webhook",
      "webhookId": "9d856f4f-d5ae-4fce-b2da-72f584288dc2"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "4f733227-b97d-4b45-b3bc-849792aee12c",
                    "leftValue": "={{ $json.Action }}",
                    "rightValue": "analyseImage",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "analyseImage"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.Action }}",
                    "rightValue": "generate_seo",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "23eb1fa1-657c-4c87-9ee8-683d3cd9988c"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "generate_seo"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "57469c50-9911-4f4b-a6ac-9ce159ff2aa9",
                    "leftValue": "={{ $('Webhook').item.json.body.action }}",
                    "rightValue": "generateInsight",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "generateInsight"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "1d84a90f-ea5a-4316-802d-62f048979018",
                    "leftValue": "={{ $json.Action }}",
                    "rightValue": "drafting_seo",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "drafting_seo"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "98348aaf-e4f7-4fc0-b70b-20a3678e40cb",
                    "leftValue": "={{ $json.Action }}",
                    "rightValue": "analyseShop",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "analyseShop"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "b308dae2-4762-4134-8580-1fd86d08c94b",
                    "leftValue": "={{ $json.Action }}",
                    "rightValue": "userKeyword",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "userKeyword"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 3
                },
                "conditions": [
                  {
                    "id": "76333633-9882-4c6b-b425-911a95967668",
                    "leftValue": "={{ $('Webhook').item.json.body.action }}",
                    "rightValue": "competitionAnalysis",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "competitionAnalysis"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.4,
      "position": [
        -224,
        320
      ],
      "id": "149a07db-15e7-42fe-8b31-fe02b833bded",
      "name": "Switch"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d1e28318-1570-468e-9238-898592ca5c8a",
              "name": "mockup_url",
              "value": "={{ $json.body.payload.image_url }}",
              "type": "string"
            },
            {
              "id": "ee695f8c-b154-4a12-a265-c2b3d8f9885c",
              "name": "ProductType",
              "value": "={{ $json.body.payload.product_details.product_type }}",
              "type": "string"
            },
            {
              "id": "6a33fa73-8cf3-49ba-aa01-00554122c47a",
              "name": "Description",
              "value": "={{ $json.body.payload.product_details.client_description }}",
              "type": "string"
            },
            {
              "id": "d688e69e-a82c-4b49-93dd-fcfec5f268ca",
              "name": "Theme",
              "value": "={{ $json.body.payload.categorization.theme }}",
              "type": "string"
            },
            {
              "id": "0e521635-e488-466b-a0fe-63741b310f7a",
              "name": "Niche",
              "value": "={{ $json.body.payload.categorization.niche }}",
              "type": "string"
            },
            {
              "id": "7110b90b-0248-4387-939c-1783f3d3cc24",
              "name": "SubNiche",
              "value": "={{ $json.body.payload.categorization.sub_niche }}",
              "type": "string"
            },
            {
              "id": "e2cc6cdd-facf-4a93-9c83-9498daa1375b",
              "name": "Custom_niche",
              "value": "={{ $json.body.payload.categorization.custom_niche }}",
              "type": "string"
            },
            {
              "id": "c2a7483d-c14a-4cdc-80e9-0cc425569992",
              "name": "Action",
              "value": "={{ $json.body.action }}",
              "type": "string"
            },
            {
              "id": "57e5f2b4-cac1-4c72-b1e9-8958aeea5a51",
              "name": "body.keywords",
              "value": "={{ JSON.stringify($json.body.keywords) }}",
              "type": "array"
            },
            {
              "id": "251a29c0-2f67-40f4-8498-8517309b765f",
              "name": "Tag_count",
              "value": "=150",
              "type": "number"
            },
            {
              "id": "9401307b-64d9-48f6-ac97-665d3cf8174a",
              "name": "Shop_URL",
              "value": "={{ $json.body.shop_url }}",
              "type": "string"
            },
            {
              "id": "73f827c1-fb4c-4821-81f1-ead32ad79bd0",
              "name": "Shop_bio",
              "value": "={{ $json.body.payload.shop_context.shop_bio }}",
              "type": "string"
            },
            {
              "id": "b1bde303-b36d-44e0-ac82-cf91aeb3ec17",
              "name": "Target_audience",
              "value": "={{ $json.body.payload.shop_context.target_audience }}",
              "type": "string"
            },
            {
              "id": "bc1bc383-a3a5-445b-838c-669dba7e8781",
              "name": "Brand_tone",
              "value": "={{ $json.body.payload.shop_context.brand_tone }}",
              "type": "string"
            },
            {
              "id": "1defae09-79f9-4a39-852c-8403cb450cea",
              "name": "Brand_keywords",
              "value": "={{ JSON.stringify($json.body.payload.shop_context.brand_keywords) }}",
              "type": "array"
            },
            {
              "id": "e8011d29-d793-43cd-ba68-9640f26a3539",
              "name": "Shop_name",
              "value": "={{ $json.body.payload.shop_context.shop_name }}",
              "type": "string"
            },
            {
              "id": "b8945dc3-d834-4f0d-9bbd-0aa409d1b63a",
              "name": "Signature_text",
              "value": "={{ $json.body.payload.shop_context.signature_text }}",
              "type": "string"
            },
            {
              "id": "2d5f64cc-0ada-480b-ba2b-f7637fb153a7",
              "name": "visual_aesthetic",
              "value": "={{ $json.body.payload.visual_aesthetic }}",
              "type": "string"
            },
            {
              "id": "1500142d-3734-43c6-8ca7-e5f02f6f8737",
              "name": "visual_typography",
              "value": "={{ $json.body.payload.visual_typography }}",
              "type": "string"
            },
            {
              "id": "6716ec4a-7cb9-43f8-9ae6-4a913f05d137",
              "name": "visual_graphics",
              "value": "={{ $json.body.payload.visual_graphics }}",
              "type": "string"
            },
            {
              "id": "5a9752d2-08b0-4722-870b-a5355b7ef1f0",
              "name": "visual_colors",
              "value": "={{ $json.body.payload.visual_colors }}",
              "type": "string"
            },
            {
              "id": "073ae6e0-793c-41b0-a244-5e9baa19fa9c",
              "name": "visual_target_audience",
              "value": "={{ $json.body.payload.visual_target_audience }}",
              "type": "string"
            },
            {
              "id": "5939232f-2052-4787-8611-7d7afa952476",
              "name": "visual_overall_vibe",
              "value": "={{ $json.body.payload.visual_overall_vibe }}",
              "type": "string"
            },
            {
              "id": "8ac7245f-099c-4fd7-9f19-9669a0f97514",
              "name": "improvement_priority",
              "value": "={{ $json.body.global_audit.improvement_priority }}",
              "type": "string"
            },
            {
              "id": "203eb453-316f-4282-a096-ac8e3f979b62",
              "name": "global_audit.listing_strength",
              "value": "={{ $json.body.global_audit.listing_strength }}",
              "type": "number"
            },
            {
              "id": "a2df44ee-6027-424f-92d2-b06608fb66ea",
              "name": "global_audit.listing_visibility",
              "value": "={{ $json.body.global_audit.listing_visibility }}",
              "type": "number"
            },
            {
              "id": "4d705c35-37c6-411d-b83f-3718b49d5c73",
              "name": "global_audit.listing_conversion",
              "value": "={{ $json.body.global_audit.listing_conversion }}",
              "type": "number"
            },
            {
              "id": "46538ba9-c511-4397-8c8b-f63aef19f052",
              "name": "global_audit.listing_relevance",
              "value": "={{ $json.body.global_audit.listing_relevance }}",
              "type": "number"
            },
            {
              "id": "6a4c1cc3-ecea-4fec-9cae-5f7f56fab85d",
              "name": "global_audit.listing_raw_visibility_index",
              "value": "={{ $json.body.global_audit.listing_raw_visibility_index }}",
              "type": "number"
            },
            {
              "id": "7a655ccb-caab-4d42-9465-42196450854b",
              "name": "seo_mode",
              "value": "={{ $json.body.payload.product_details.seo_mode }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -560,
        352
      ],
      "id": "4d89ddde-05f9-4e47-b8d1-16feb4314abd",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    \"keyword 50\"\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        672,
        -992
      ],
      "id": "80e1c8c1-245a-4065-9c67-4c5a335c39ac",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"title\": \"...\",\n  \"description\": \"...\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        832,
        656
      ],
      "id": "2bfe3ddd-dc69-4334-a3ed-c95c40adc14d",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        1344,
        416
      ],
      "id": "3b7c001a-3e96-4d94-80bf-fa1418de1c09",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "jsCode": "// 1. Get the AI description from the previous node\nconst aiDescription = $input.first().json.output.description;\n\n// 2. Define your static Markdown block\nconst staticMarkdown = `\n---\n\n### üõí How to Order\n1. **Review** the sizing and color charts in the listing photos.\n2. **Select** your shirt size and color from the dropdown menus.\n3. **Click** \"Add to Cart\".\n\n*All standard listings are **Adult Unisex** unless otherwise stated.*\n\n---\n\n### ‚≠ê Product Specs\n* **Material:** 100% ring-spun U.S. cotton.\n* **Fabric:** Soft, breathable midweight fabric (**6.1 oz/yd¬≤**).\n* **Finish:** Garment-dyed for a subtle, worn-in look and ultra-soft feel.\n* **Fit:** Relaxed fit, pre-shrunk.\n* **Construction:** Tubular body (no side seams) for a smooth, classic silhouette.\n* **Durability:** Double-needle stitching on all seams.\n* **Availability:** Sizes S‚Äì4XL in 12 premium colors.\n\n---\n\n### üìè Sizing Tip\nThese are **Unisex** fit shirts. For a **fitted look**, order your normal size. For the popular **oversized look**, we recommend sizing up 1 or 2 sizes. Please refer to the size chart in the images for exact measurements.\n\n---\n\n### üöö Production & Shipping\n* **Production Time:** 1‚Äì3 business days (average 2).\n* **Shipping (U.S.):** 1‚Äì5 business days (average 3).\n* **Tracking:** A tracking number will be provided once your order is dispatched.\n\n*Note: Delivery times are estimates and are not guaranteed.*\n\n---\n\n### üß∫ Care Instructions\n* **Wash:** Machine wash cold (max 30¬∞C / 90¬∞F), inside out.\n* **Bleach:** Do not bleach.\n* **Dry:** Tumble dry on low heat.\n* **Iron:** Iron or steam on low heat; **do not iron directly over the design**.\n* **Dry Clean:** Do not dry clean.\n`;\n\n// 3. Merge them with double spacing\nreturn {\n  title:$input.first().json.output.title,\n  description: aiDescription //+ \"\\n\\n\" + staticMarkdown\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1072,
        416
      ],
      "id": "86007ada-36df-4b23-b531-5dee7dbe2dee",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "jsCode": "// On r√©cup√®re le contenu markdown du n≈ìud pr√©c√©dent\nconst markdown = $input.first().json.data.markdown;\n\nif (!markdown) return items;\n\nlet cleanedText = markdown\n  // 1. Supprimer toutes les images ![](...)\n  .replace(/!\\[.*?\\]\\(.*?\\)/g, '')\n  \n  // 2. Supprimer les liens de navigation inutiles (Favoris, Contact, Sign-in, etc.)\n  .replace(/\\[.*?\\]\\(https:\\/\\/www\\.etsy\\.com\\/(signin|messages|people|conversations|cart|help).*?\\)/g, '')\n  \n  // 3. Supprimer les IDs de tracking et nonces (souvent des longues cha√Ænes alphanum√©riques)\n  .replace(/[a-zA-Z0-0]{30,}/g, '')\n  \n  // 4. Supprimer les mentions de prix et \"Sale Price\" qui n'aident pas pour l'identit√© de marque\n  .replace(/(Sale Price|Original Price|off|\\$\\d+\\.\\d+)/gi, '')\n  \n  // 5. Supprimer les sections de cookies et de param√®tres de confidentialit√© (souvent √† la fin)\n  .split(\"Your Etsy Privacy Settings\")[0]\n  .split(\"Privacy Settings\")[0]\n  \n  // 6. Nettoyer les espaces vides multiples et les sauts de ligne excessifs\n  .replace(/\\n\\s*\\n/g, '\\n\\n')\n  .trim();\n\n// On renvoie le texte nettoy√©\nreturn [{\n  json: {\n    cleaned_content: cleanedText\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        624,
        960
      ],
      "id": "0a03c5ce-9b0f-4f45-b484-2a92611717fe",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        784,
        1216
      ],
      "id": "7d3ea96b-240d-47fd-bd2d-5d90f4497319",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"shop_name\": \"...\",\n  \"brand_tone\": \"...\",\n  \"shop_bio\": \"...\",\n  \"target_audience\": \"...\",\n  \"brand_keywords\": [\"...\", \"...\", \"...\", \"...\", \"...\"],\n  \"signature_text\": \"...\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        992,
        1200
      ],
      "id": "55f4a1a7-2b17-4011-af56-d83bd9273101",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        1296,
        960
      ],
      "id": "db363459-c180-4ae4-95e8-cd7b284f790d",
      "name": "Respond to Webhook2"
    },
    {
      "parameters": {
        "url": "={{ $json.mockup_url }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "supabaseApi",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        400,
        -1904
      ],
      "id": "92468fd0-ed20-476b-8c52-bec09e019ff6",
      "name": "HTTP Request2",
      "credentials": {
        "httpHeaderAuth": {
          "id": "2FmarDG6ht0gwsv0",
          "name": "Spider crawl Auth account"
        },
        "supabaseApi": {
          "id": "b2JwRoCE98AC8FRn",
          "name": "Supabase StudioPOD"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        592,
        -1712
      ],
      "id": "be28675c-ef49-44a3-90e2-6617c36ef1b1",
      "name": "Google Gemini Chat Model2",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"visual_analysis\": {\n    \"aesthetic_style\": \"...\",\n    \"typography_details\": \"...\",\n    \"graphic_elements\": \"...\",\n    \"color_palette\": \"...\",\n    \"target_audience\": \"...\",\n    \"overall_vibe\": \"...\",\n    \"theme\": \"...\",\n    \"niche\": \"...\",\n\t\"sub-niche\":\"...\"\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        816,
        -1696
      ],
      "id": "e895a1ab-2c52-4be1-8705-5efd5637d108",
      "name": "Structured Output Parser4"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        976,
        -1904
      ],
      "id": "2ffbb6b2-7832-46e5-82b2-919ecc81fac6",
      "name": "Respond to Webhook3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are a Senior Visual Trend Analyst and E-commerce Marketing Specialist specialized in :contentReference[oaicite:0]{index=0} product positioning and conversion psychology.\n\n# Task\nAnalyze the provided mockup and extract its complete visual DNA, its inferred market positioning, its **Theme/Niche/Sub-niche**, and its **Target Audience**.\n\nDo not only describe what is visible.\nInterpret the design like a top Etsy seller:\n‚Ä¢ infer who it is for\n‚Ä¢ what problem/desire it serves\n‚Ä¢ what niche or micro-niche it belongs to\n‚Ä¢ and why someone would buy it\n\n# Analysis Instructions\n1. **Aesthetic/Style:** Identify the visual trend or style category (e.g., Cottagecore, Y2K, Minimalist, Retro, Funny Meme, Boho, etc.).\n2. **Typography:** Describe font personality, era, tone, and emotional feel.\n3. **Graphic Elements:** Key illustrations, icons, textures, composition traits.\n4. **Color Palette:** Dominant colors + psychological mood they create.\n5. **Niche (NEW):** Deduce:\n   - Theme (broad market) (2-3 words max)  (e.g.: Sports & Physical Activities,Professions & Trades, Hobbies & Passions,Life Events & Milestones)\n   - Niche (2-3 words max) (e.g.:Soccer, Basketball, Baseball, Football, Volleyball, Tennis,Teachers, Professors, Tutors, Librarians,Truck Drivers, Delivery Drivers, Railroad Workers, Pilots)\n   - Sub-niche (2-3 words max) (e.g.:World Cup Fans, Fantasy Soccer, Soccer Moms, Soccer Coaches, Women's Soccer,Elementary Teachers, Special Education, Math Teachers, English Teachers, Science Teachers,Long Haul Truckers, Owner-Operators, Tanker Drivers, Heavy Equipment Haulers)\n6. **Target Audience:** Based on all visual and niche cues, identify the ideal buyer profile.\n   - Consider: age range, gender lean (if any), lifestyle, interests, and buying occasion.\n7. **Overall Vibe:** Summarize the emotional and commercial impression in one concise sentence.\n\n# Output Format\n{\n  \"visual_analysis\": {\n    \"aesthetic_style\": \"...\",\n    \"typography_details\": \"...\",\n    \"graphic_elements\": \"...\",\n    \"color_palette\": \"...\",\n\t\"theme\": \"...\",\n    \"niche\": \"...\",\n\t\"sub-niche\":\"...\",\n    \"target_audience\": \"...\",\n    \"overall_vibe\": \"...\"\n  }\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        624,
        -1904
      ],
      "id": "a2d02b53-47a3-404b-a397-3e138240efe0",
      "name": "Image analysis",
      "retryOnFail": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        432,
        -992
      ],
      "id": "3bdd7b5b-f530-4a69-a01e-6bccb865f8fa",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are an expert Etsy SEO Specialist and E-commerce Copywriter. Your goal is to generate a \"Master Pool\" of 50 highly relevant keywords that serve three different SEO strategies: Broad, Balanced, and Sniper.\n\n# Task\nAnalyze the provided product data and visual characteristics to brainstorm exactly 50 diverse SEO keywords/phrases for an Etsy listing. Pay special attention to niche, sub-niche, target audience and overall vibe. \n\n# Master Pool Strategy (The 5 Segments)\nTo ensure the pool supports all SEO modes, you MUST generate exactly 10 keywords for each of the following 5 categories:\n1. **Broad & High Volume (10 tags):** High-level niche terms and general gift categories.\n2. **Balanced & Descriptive (10 tags):** Mid-range keywords combining the niche with specific themes/graphics.\n3. **Audience & Gift Scenarios (10 tags):** Target specific buyers (e.g., \"Gift for Coworker\") and occasions.\n4. **Sniper & Long-Tail (10 tags):** Ultra-specific, low-competition terms and cultural sub-niches.\n5. **Aesthetic & Vibe (10 tags):** Focus on the look, mood, and specific style (e.g., \"Edgy Comic Art\").\n\n\n## KEYWORD QUALITY GUIDELINES (EXAMPLES & COUNTER-EXAMPLES)\nTo ensure high commercial viability, follow the \"Search Intent\" logic. Avoid describing the image as a robot; instead, describe it as a marketer aiming for a specific buyer's need.\n\n1. Apparel & Identity (e.g. T-shirts, Hoodies)\nGOOD examples (Intent/Vibe): \"Retired English Teacher Gift\", \"Dark Academia Aesthetic\", \"Spicy Book Lover Tee\", \"Retro 90s Streetwear\".\nBAD examples (Literal/Technical): \"T-shirt with text\", \"Alphabet font shirt\", \"Woman in office clothing\", \"Round neck garment\", \"Cotton fabric top\".\n\n2. Home Decor & Mood (e.g. Posters, Art Prints)\nGOOD examples (Intent/Vibe): \"Mid Century Modern Cat Art\", \"Nursery Earth Tones Decor\", \"Bathroom Humor Wall Art\", \"Minimalist City Map\".\nBAD examples (Literal/Technical): \"Rectangle paper poster\", \"Landscape with blue sky\", \"Picture of a cat\", \"Vertical orientation\", \"Satin finish print\".\n\n3. Gifting & Humor (e.g. Mugs, Accessories)\nGOOD examples (Intent/Vibe): \"Sarcastic Office Gift\", \"Secret Santa Gag Gift\", \"Coworker Christmas Present\", \"Dino Nerd Apparel\".\nBAD examples (Literal/Technical): \"Grabber T-Rex mug\", \"Small arms dinosaur cup\", \"Ceramic cup with handle\", \"Object with green graphic\".\n\n4. Universal \"Blacklist\" (STRICTLY PROHIBITED)\nAvoid these \"Empty\" or \"Technical\" terms that waste SEO space:\nDemographic Fluff: \"Millennial buyer\", \"Gen Z person\", \"Adult human gift\", \"Gift for 30 year old\".\nTechnical Jargon: \"Slab serif font\", \"High contrast design\", \"Hex code colors\", \"Vector graphic\", \"DPI resolution\".\nGeneric Adjectives: \"Unique design\", \"High quality\", \"Best selling style\", \"Perfect gift\", \"Amazing present\".\n\n\n\n# Product Data Input\n- **Product Type:** {{ $('Edit Fields').item.json.ProductType }}\n- **Theme:** {{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-Niche:** {{ $('Edit Fields').item.json.SubNiche }}\n- **Product Description:** {{ $('Edit Fields').item.json.Description }}\n\n# Visual & Marketing Data\n- **Aesthetic/Style:** {{ $json.visual_aesthetic }}\n- **Target Audience:** {{ $json.visual_target_audience }}\n- **Overall Vibe:** {{ $json.visual_overall_vibe }}\n\n\n\n# Constraints\n- Strictly 50 keywords.\n- No duplicates.\n- Maximum 3 words per keyword phrase.\n- Focus on high-intent buyer language.\n- Output MUST be a clean JSON array of strings for programmatic processing.\n- Focus on transactionnal categories keywords\n- Include product type in keywords at least 50% of times\n\n\n**IMPORTANT** Generate up to 50 highly relevant keywords. Quality is priority over quantity, but aim for 50 if the niche allows.\n\n# Output Format\n{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    ...\n    \"keyword 50\"\n  ]\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        448,
        -1232
      ],
      "id": "abbdf050-1a1e-4d62-a58a-50861731b5ee",
      "name": "Keywords generation",
      "retryOnFail": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/keywords_data/google/search_volume/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keywords\": {{ JSON.stringify($json.output.keywords.map(item => item.keyword))}}, \n    \"location_name\": \"United States\", \n    \"language_name\": \"English\"\n  }\n]\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        1968,
        -1040
      ],
      "id": "9cf9e174-dfe6-44b3-894c-10a027211c0a",
      "name": "DataForSEO stats",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are an expert Etsy Copywriter acting as the voice of **{{ $('Edit Fields').item.json.Shop_name }}**. \nYour goal is to write a product listing that feels authentic to the brand's identity, speaks directly to its target audience, and maintains high SEO performance.\n\n# Brand Identity (Context)\n- **Shop Bio/Mission:** {{ $('Edit Fields').item.json.Shop_bio }}\n- **Brand Tone:** {{ $('Edit Fields').item.json.Brand_tone }}\n- **Target Audience:** {{ $('Edit Fields').item.json.Target_audience }}\n- **Brand Keywords:** {{ $('Edit Fields').item.json.Brand_keywords }}\n\n# Input Data\n- **Strategic SEO Brief:** {{ $json.seo_brief }}\n\n\n- **Product Details:**\n- **Product Type:** {{ $('Edit Fields').item.json.ProductType }}\n- **Theme:** {{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-Niche:** {{ $('Edit Fields').item.json.SubNiche }}\n- **Custom-Niche: {{ $('Edit Fields').item.json.Custom_niche }}\n- **Product Description:** {{ $('Edit Fields').item.json.Description }}\n\n\n# 2. Visual & Marketing Data (Input from Image Analysis)\n- **Aesthetic/Style:** {{ $json.visual_aesthetic }}\n- **Typography:** {{ $json.visual_typography }}\n- **Graphic Elements:** {{ $json.visual_graphics }}\n- **Color Palette:** {{ $json.visual_colors }}\n- **Target Audience:** {{ $json.visual_target_audience }}\n- **Overall_vibe:**{{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n\n# Task 1: Strategic Title (140 chars max)\n- **Content:** Start with keywords identified as \"Promising\" in the brief, followed by \"Trending\" keywords. \n- **Formatting (CRITICAL):** - Use ONLY plain text. \n    - NO bolding, NO italics, NO Markdown (no `**` or `****`). \n    - NO emojis (no `üíé`, `üî•`, etc.).\n    - Use \"|\" as separators.\n- **Goal:** A clean, professional title that looks exactly like a top-performing Etsy listing.\n- Ensure the language reflects a premium product from **{{ $('Edit Fields').item.json.Shop_name }}**.\n\n\n# Task 2: Natural \"Story & Specs\" Description\nWrite a description tailored for **{{ $('Edit Fields').item.json.Target_audience }}** using a **{{ $('Edit Fields').item.json.Brand_tone }}** tone.\n\n1. **The Emotional Hook (The Story):**\n   - Start with a catchy opening sentence that reflects the shop's \"vibe\" and the specific niche.\n   - Write 2-3 fluid sentences describing the shirt. \n   - Naturally weave in 4-6 tags (prioritize Trending and Promising). \n   - Keep the text clean, human, and conversational. No bolding of keywords.\n   - **NO FORMATTING:** Do NOT use bold (`**`), italics, or any highlighting for keywords. \n   - **NATURAL FLOW:** The keywords must fit so perfectly into the grammar that a reader wouldn't know they are SEO tags (e.g., instead of saying \"This is a **gift for coworker**\", say \"Looking for the perfect gift for a coworker?\").\n\n2. **The \"Why You'll Love It\" Section (The Specs):**\n   - Use a bulleted list to highlight quality.\n   - Integrate \"Evergreen üå≤\" tags here.\n   - Mention: Take all parameters into consideration to say why the person will love it.\n   - Vary the title of this section, not always \"Why You'll Love It\"\n\n3. **Brand Signature (Call to Action):**\n   - Strictly end the listing with this exact text: \"{{ $('Edit Fields').item.json.Signature_text }}\"\n\n# Constraints\n- **Tone Consistency:** Strictly adhere to the **{{ $('Edit Fields').item.json.Brand_tone }}** brand voice.\n- **Format:** Strictly JSON output.\n- **Formatting:** Use Markdown for the description. \n\n# Output Format\n{\n  \"title\": \"...\",\n  \"description\": \"...\"\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        688,
        416
      ],
      "id": "a5fd2eb7-a5bc-4605-9b2f-94b08218c7fc",
      "name": "Optimized Title and Description"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are a Senior Brand Strategist specialized in E-commerce and Etsy. Your goal is to transform raw scraped data into a structured brand identity for a print-on-demand shop.\n\n# Data Input\nHere is the cleaned Markdown content from the Etsy shop:\n---\n{{ $json.cleaned_content }}\n---\n\n# Instructions\nAnalyze the text to populate the following brand profile elements. \n\n## Guidelines for extraction:\n- **Shop Name**: Look for the main H1 or the name near \"Star Seller\" status.\n- **Brand Tone**: Analyze product titles and the announcement. (e.g., if you see \"Funny Meme\", \"Retro\", \"Silly Goose\", the tone is likely \"Humorous\" or \"Retro-Modern\").\n- **Shop Bio**: Summarize the \"Announcement\" section. Focus on the origin (e.g., Pacific Northwest), the ownership (e.g., female-owned), and the aesthetic (e.g., retro-modern graphic designs).\n- **Target Audience**: Look at categories and product descriptions. (e.g., \"Bookish\", \"LGBTQIA\", \"Teachers\", \"Meme lovers\").\n- **Brand Keywords**: Extract 5 recurring themes or values.\n- **Signature Text**: Craft a 1-sentence thank you message that reflects the shop's specific location or vibe mentioned in the text.\n\n# Constraints\n- Output must be ONLY a valid JSON object.\n- Language: English\n\n# Output Format (JSON)\n{\n  \"shop_name\": \"...\",\n  \"brand_tone\": \"...\",\n  \"shop_bio\": \"...\",\n  \"target_audience\": \"...\",\n  \"brand_keywords\": [\"...\", \"...\", \"...\", \"...\", \"...\"],\n  \"signature_text\": \"...\"\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        832,
        960
      ],
      "id": "6b424b5d-99e1-4a22-94dd-c7889a497d0e",
      "name": "Write shop profile info"
    },
    {
      "parameters": {
        "operation": "scrape",
        "additionalFields": {},
        "useCustomBody": true,
        "customBody": "={\n  \"url\": \"{{ $json.Shop_URL }}\",\n  \"formats\": [\"markdown\"],\n  \"onlyMainContent\": true,\n  \"waitFor\": 3000,\n  \"actions\": [\n    {\n      \"type\": \"wait\",\n      \"selector\": \".shop-name-and-title-container\",\n      \"includeTags\": [\n        \".shop-name-and-title-container\", \n        \"#shop-announcement\", \n        \".shop-home-about-section\",\n        \".responsive-listing-grid\"\n      ]\n    }\n  ]\n} ",
        "requestOptions": {}
      },
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        400,
        960
      ],
      "id": "55e67eb7-238b-47b4-8c1c-c363cfe592c9",
      "name": "Scrape Esty shop wep page",
      "credentials": {
        "firecrawlApi": {
          "id": "ZCv139vnWJ5eRaE4",
          "name": "Firecrawl account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration s√©curis√©e des 13 tags depuis \"Edit Fields\"\n// On utilise .first().json pour cibler l'objet racine du n≈ìud\nconst data = $('Edit Fields').first().json;\nconst allTags = data.body.keywords || [];\n\n// 2. Tri de la liste par opportunity_score d√©croissant (du plus haut au plus bas)\n// On utilise (b - a) pour avoir les meilleurs en premier\nconst sortedTags = [...allTags].sort((a, b) => {\n  return (b.opportunity_score || 0) - (a.opportunity_score || 0);\n});\n\n// 3. S√©lection des 3 meilleurs\nconst top3 = sortedTags.slice(0, 3).map(t => ({ \n  ...t, \n  target_type: 'top' \n}));\n\n// 4. S√©lection des 2 moins bons (les deux derniers de la liste tri√©e)\nconst bottom2 = sortedTags.slice(-2).map(t => ({ \n  ...t, \n  target_type: 'bottom' \n}));\n\n// 5. Retour des donn√©es regroup√©es\nreturn {\n  targets: [...top3, ...bottom2]\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        384,
        -224
      ],
      "id": "5f559148-9eac-4143-913d-4d942dc4fb97",
      "name": "Tags to evaluate"
    },
    {
      "parameters": {
        "jsCode": "// 1. On r√©cup√®re l'objet principal\nconst input = $input.first().json;\n\n// 2. On parse la cha√Æne de caract√®res JSON contenue dans body.keywords\nconst keywordsArray = input.body.keywords;\n\n// 3. On g√©n√®re le brief textuel pour le prompt\nconst seoBrief = keywordsArray.map(item => {\n  let statusBadges = [];\n  if (item.status.promising) statusBadges.push(\"Promising üíé\");\n  if (item.status.trending) statusBadges.push(\"Trending üî•\");\n  if (item.status.evergreen) statusBadges.push(\"Evergreen üå≤\");\n\n  const badgeText = statusBadges.length > 0 ? statusBadges.join(\" + \") : \"Standard\";\n\n  return `- Keyword: \"${item.keyword}\" | Status: ${badgeText} | Volume: ${item.avg_volume} | Comp: ${item.competition}`;\n}).join('\\n');\n\n// 4. On retourne un objet complet pr√™t pour le n≈ìud LLM\nreturn {\n  mockup_url: input.mockup_url,\n  product_type: input.ProductType,\n  slogan: input.Slogan,\n  design_description: input.Description,\n  niche_info: `${input.Theme} > ${input.Niche} > ${input.SubNiche}`,\n  seo_brief: seoBrief\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        416
      ],
      "id": "cbd9e64f-8fa6-4123-954a-d839aa9643d4",
      "name": "Prepare SEO brief"
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        6320,
        320
      ],
      "id": "d07c4aa3-ad97-4af2-9002-21396df0045d",
      "name": "Google Gemini Chat Model5",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// Extraction et regroupement pour PennySEO\nconst keywords = items[0].json.body.keywords;\n\nconst scoredKeywords = keywords.map(k => {\n  let score = k.opportunity_score || 0;\n  \n  // 1. Priorit√© aux recommandations (is_top)\n  if (k.is_top === true) score *= 2.0;\n  if (k.is_top === false) score *= 0.5;\n\n  // 2. Bonus de v√©locit√©\n  if (k.status.promising) score *= 1.5;\n  else if (k.status.trending) score *= 1.2;\n\n  // 3. Bonus Long-tail (3 mots ou plus)\n  const wordCount = k.keyword.split(' ').length;\n  if (wordCount >= 3) score *= 1.3;\n\n  return { ...k, final_rank_score: score };\n});\n\n// 4. Tri par score pond√©r√©\nlet sorted = scoredKeywords.sort((a, b) => b.final_rank_score - a.final_rank_score);\n\n// 5. Garantie Evergreen\nlet top5 = sorted.slice(0, 5);\nconst hasEvergreen = top5.some(k => k.status.evergreen);\n\nif (!hasEvergreen) {\n    const bestEvergreen = sorted.slice(5).find(k => k.status.evergreen);\n    if (bestEvergreen) {\n        top5[4] = bestEvergreen;\n    }\n}\n\n// 6. REGROUPEMENT : On retourne un seul objet contenant la liste\nreturn [{\n  json: {\n    selected_keywords: top5,\n    keyword_list_string: top5.map(k => k.keyword).join(', '), // Pratique pour les prompts\n    count: top5.length\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        5984,
        48
      ],
      "id": "94f56d5f-8974-425d-afcf-4ab77cdb348d",
      "name": "Filter 5 best",
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    \"keyword 50\"\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        6496,
        304
      ],
      "id": "9efed03d-6c47-4273-9dba-8176bba4945a",
      "name": "Structured Output Parser7",
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/keywords_data/google/search_volume/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keywords\": {{ JSON.stringify($json.output.keywords) }}, \n    \"location_name\": \"United States\", \n    \"language_name\": \"English\"\n  }\n]\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        6880,
        48
      ],
      "id": "5a040a6b-b989-4a7a-b9ef-3bbb887daac5",
      "name": "DataForSEO stats1",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es d'entr√©e\nconst results = $input.first().json.tasks[0].result;\nconst editFields = $('Edit Fields').first().json;\nconst tag_count = editFields.Tag_count || 13;\nconst productType = (editFields.ProductType || 'mug').toLowerCase();\n\nlet processed = results\n  .filter(item => item.search_volume !== null && item.monthly_searches !== null)\n  .map(item => {\n    const avgVolume = item.search_volume;\n    const comp = item.competition || 0.5;\n    const kw = item.keyword.toLowerCase();\n    \n    const monthlyVolumes = item.monthly_searches.map(m => m.search_volume).reverse();\n\n    const last3MonthsAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n    const first3MonthsAvg = (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3;\n    \n    const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n    const isEvergreen = monthlyVolumes.every(v => v > (avgVolume * 0.2));\n    const isPromising = avgVolume > 200 && comp < 0.4;\n\n    // --- FORMULE DU SCORE MODIFI√âE ---\n    // On garde la logique de base mais on ajoute un plancher de viabilit√©\n    let finalScore = (Math.sqrt(avgVolume) * (1 - comp + 0.2));\n\n    // AJUSTEMENT DE VIABILIT√â (Anti-volume mort)\n    if (avgVolume < 50) finalScore *= 0.3;      // P√©nalit√© lourde pour les volumes quasi nuls\n    else if (avgVolume > 1000) finalScore *= 1.5; // Bonus de port√©e pour assurer la visibilit√©\n\n    const highIntentGroups = {\n        product: [productType, 'cup', 'drinkware', 'mug', 'tee', 'shirt', 'apparel'], \n        custom: ['custom', 'personalized', 'name', 'initial'], \n        roles: ['mom', 'dad', 'teacher', 'nurse', 'coworker', 'friend', 'autistic', 'neurodivergent'], \n        occasions: ['birthday', 'wedding', 'christmas', 'graduation', 'anniversary'], \n        gift: ['gift', 'present', 'token', 'memento', 'gag'] \n    };\n\n    let boostCount = 0;\n    Object.values(highIntentGroups).forEach(group => {\n        if (group.some(word => kw.includes(word))) {\n            finalScore *= 1.4; \n            boostCount++;\n        }\n    });\n\n    if (boostCount >= 3) finalScore *= 1.5;\n    const wordCount = item.keyword.split(' ').length;\n    if (wordCount >= 3) finalScore *= 1.3;\n    if (isTrending) finalScore *= 1.3;\n    if (isPromising) finalScore *= 1.2;\n\n    return {\n      keyword: item.keyword,\n      avg_volume: avgVolume,\n      competition: comp,\n      opportunity_score: Math.round(finalScore),\n      volumes_history: monthlyVolumes,\n      status: {\n        trending: isTrending,\n        evergreen: isEvergreen,\n        promising: isPromising\n      }\n    };\n  });\n\n// 2. S√©lection avec Diversit√© S√©mantique\nconst selectedTags = [];\nconst conceptTracker = {};\n\n// On s'assure d'avoir au moins un \"Evergreen\" solide dans la s√©lection finale\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n  if (selectedTags.length >= tag_count) break;\n\n  const words = item.keyword.toLowerCase().split(' ');\n  const concept = words.slice(0, 2).join(' ');\n\n  conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n  // Diversit√© : Max 2 tags par concept\n  if (conceptTracker[concept] <= 2) {\n    selectedTags.push(item);\n  }\n}\n\n// Validation finale : Si aucun Evergreen n'est pr√©sent, on force le meilleur Evergreen dispo\nif (!selectedTags.some(t => t.status.evergreen) && processed.length > 0) {\n    const bestEvergreen = processed.find(t => t.status.evergreen);\n    if (bestEvergreen) selectedTags[selectedTags.length - 1] = bestEvergreen;\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7184,
        48
      ],
      "id": "e57ee988-2423-4fa2-a465-1e3485c8eb15",
      "name": "Filter keywords1",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// On r√©cup√®re les 13 tags du n≈ìud pr√©c√©dent\nconst tags = $input.all().map(item => item.json);\n\n// S√©lection des 3 meilleurs\nconst top3 = tags.slice(0, 3).map(t => ({ ...t, target_type: 'top' }));\n\n// S√©lection des 2 moins bons\nconst bottom2 = tags.slice(-2).map(t => ({ ...t, target_type: 'bottom' }));\n\nreturn {\n  targets: [...top3, ...bottom2]\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7456,
        48
      ],
      "id": "2c73ad86-aa8f-4a5a-8228-3c65886788a9",
      "name": "sniper_keywords",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des deux sources\nconst editFieldsNode = $('Edit Fields').first().json;\nconst sniperNode = $('sniper_keywords').first().json;\n\n// Extraction s√©curis√©e\nconst existingKeywords = editFieldsNode?.body?.keywords || [];\n// CORRECTION : On cible sp√©cifiquement la cl√© 'targets' identifi√©e dans ton JSON\nconst sniperKeywords = sniperNode?.targets || [];\n\n// 2. Trier les 13 existants par score croissant pour identifier les plus faibles\nlet rankedExisting = [...existingKeywords].sort((a, b) => \n  (a.opportunity_score || 0) - (b.opportunity_score || 0)\n);\n\n// Identification des 5 plus faibles (en minuscules pour comparaison)\nconst keywordsToReplace = rankedExisting.slice(0, 5).map(k => k.keyword.toLowerCase());\n\n// 3. Filtrer pour garder les 8 plus forts (is_sniper_seo: false)\nconst strongExisting = existingKeywords\n  .filter(k => !keywordsToReplace.includes(k.keyword.toLowerCase()))\n  .map(k => ({ ...k, is_sniper_seo: false }));\n\n// 4. Pr√©parer les Snipers avec le flag (is_sniper_seo: true)\nconst preparedSnipers = sniperKeywords.map(k => ({\n  ...k,\n  is_sniper_seo: true\n}));\n\n// 5. Fusion et D√©doublonnage via Map\nconst finalMap = new Map();\n\n// On remplit avec les 8 forts\nstrongExisting.forEach(k => finalMap.set(k.keyword.toLowerCase(), k));\n\n// On ajoute les snipers (ils marquent ou ajoutent)\npreparedSnipers.forEach(k => finalMap.set(k.keyword.toLowerCase(), k));\n\n// 6. Reconstruction et compl√©tion √† 13\nlet finalListing = Array.from(finalMap.values());\n\n// S√©curit√© : Si on a moins de 13 apr√®s fusion (doublons), on rep√™che dans les \"faibles\"\nif (finalListing.length < 13) {\n  for (const k of rankedExisting) {\n    if (finalListing.length >= 13) break;\n    const key = k.keyword.toLowerCase();\n    if (!finalMap.has(key)) {\n      finalListing.push({ ...k, is_sniper_seo: false });\n      finalMap.set(key, k);\n    }\n  }\n}\n\n// Tri final par score d√©croissant pour l'affichage\nfinalListing.sort((a, b) => (b.opportunity_score || 0) - (a.opportunity_score || 0));\n\nreturn [{\n  json: {\n    listing_seo_stats: finalListing,\n    tag_list: finalListing.map(k => k.keyword),\n    sniper_count: finalListing.filter(k => k.is_sniper_seo).length\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7664,
        48
      ],
      "id": "66fc16b7-d262-4d9e-8035-bf789ae7a137",
      "name": "finalSeolist",
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        624,
        640
      ],
      "id": "c16b38f7-e8cd-4f0e-9bc2-b2aeba238878",
      "name": "Google Gemini Chat Model6",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        2336,
        -208
      ],
      "id": "028f0c9a-bb67-46af-bb1c-f088cce65f11",
      "name": "Respond to Webhook4"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        784,
        32
      ],
      "id": "98db1934-ac3b-4d4b-81c4-6af5166f0d16",
      "name": "Google Gemini Chat Model7",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"evaluations\": [\n    {\n      \"keyword\": \"string\",\n      \"insight\": \"string\",\n      \"is_top\": true\n    }\n  ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1056,
        32
      ],
      "id": "ae6f7975-0355-4174-99f6-7510616a8191",
      "name": "Structured Output Parser8"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nAct as an expert Etsy SEO and Marketing Consultant.\n\n# Context\nYou are analyzing a specific keyword for an Etsy listing.\n\n# Product details\nProduct Type:{{ $('Edit Fields').first().json.ProductType }}\nProduct Description:{{ $('Edit Fields').first().json.Description }}\nTheme:{{ $('Edit Fields').first().json.Theme }}\nNiche:{{ $('Edit Fields').first().json.Niche }}\nSub-niche:{{ $('Edit Fields').first().json.SubNiche }}\nCustom-Niche: {{ $('Edit Fields').item.json.Custom_niche }}\n\n#Image analysis data\nVisual Aesthetic: {{ $('Edit Fields').first().json.visual_aesthetic }}\nTarget Audience: {{ $('Edit Fields').first().json.visual_target_audience }}\nTypography:{{ $('Edit Fields').first().json.visual_typography }}\nGraphic:{{ $('Edit Fields').first().json.visual_graphics }}\nColors:{{ $('Edit Fields').first().json.visual_colors }}\nOverall vibe: {{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n# Keyword Data\nKeyword: \"{{ $json.keyword }}\"\nSearch Volume: {{ $json.avg_volume }}\nTrend (last 12 months volume): {{ $json.volumes_history }}\nCompetition:{{ $json.competition }}\nOpportunity Score: {{ $json.opportunity_score }}\nTarget type:{{ $json.target_type }}\n\n# Task\nWrite a single, high-impact \"Marketing Insight\" for this keyword. \nThe insight must explain WHY this keyword is strategic for THIS specific product. Take into account the product details and image analysis data\n- If target_type is 'top', justify why it's a winning opportunity.\n- If target_type is 'bottom', explain the risk (competition, low intent, or broadness) and why it might not be the best keyword.\n\nFocus on one of these angles: \n1. The \"Opportunity Gap\" (High volume/Low competition).\n2. The \"Viral Momentum\" (Explosive trend).\n3. The \"Buyer Intent\" (Specific niche or occasion alignment).\n\n# Constraint\n- Output MUST be in English.\n- Maximum 40 words.\n- Be punchy and professional.\n\n\nOUTPUT FORMAT (JSON ONLY):\n{\n  \"evaluations\": [\n    {\n      \"keyword\": \"string\",\n      \"insight\": \"string\",\n      \"is_top\": boolean\n    }\n  ]\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        880,
        -224
      ],
      "id": "ec606265-290a-46c9-ad11-45e1f87dcaef",
      "name": "Tags insights1",
      "retryOnFail": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es des n≈ìuds pr√©c√©dents\n//const originalTags = $('SEO Mode filter').all().map(item => item.json);\n\nconst data = $('Edit Fields').first().json;\nconst originalTags = data.body.keywords || [];\n\n\nconst allEvaluations = $('Tags insights1').all().flatMap(item => item.json.output.evaluations);\n\n// 2. Fusion des insights et calcul des moyennes pour le score global\nlet top3Sum = 0;\nlet bottom10Sum = 0;\n\nconst mergedTags = originalTags.map((tag, index) => {\n  // Fusion avec les insights de l'IA\n  const match = allEvaluations.find(item => item.keyword === tag.keyword);\n  \n  const enhancedTag = {\n    ...tag,\n    insight: match ? match.insight : null,\n    is_top: match ? match.is_top : null\n  };\n\n  // Accumulation pour le calcul du score (bas√© sur l'opportunity_score)\n  // On suppose que la liste est d√©j√† tri√©e par score d√©croissant\n  if (index < 3) {\n    top3Sum += tag.opportunity_score || 0;\n  } else {\n    bottom10Sum += tag.opportunity_score || 0;\n  }\n\n  return enhancedTag;\n});\n\n// 3. Calcul de la Listing Strength (Moyenne pond√©r√©e 60/40)\nconst top3Avg = top3Sum / 3;\nconst bottom10Avg = bottom10Sum / 10;\n\n// On normalise le score sur 100 (ajuste le diviseur 2 selon tes scores habituels)\nconst rawGlobalScore = (top3Avg * 0.6) + (bottom10Avg * 0.4);\nconst listingStrength = Math.min(100, Math.round(rawGlobalScore / 2)); \n\n// 4. Retour des donn√©es restructur√©es (le score global est inclus une seule fois √† la racine)\nreturn [\n  {\n    global_listing_strength: listingStrength,\n    keywords: mergedTags\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1264,
        -224
      ],
      "id": "c5cc1565-ccbb-4e30-af4c-81254449edda",
      "name": "Global scoring1"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"global_status_label\": \"2-3 words (e.g., 'Targeted but Invisible' or 'Broad and Diluted')\",\n  \"global_strategic_verdict\": \"2 concise sentences summarizing the overall market position.\",\n  \"score_justification\": {\n    \"visibility\": \"Explain the Visibility score and Raw Index based on the volume of current tags.\",\n    \"relevance\": \"Justify the Relevance score by comparing Niche Scores vs SEO Noise in the top tags.\",\n    \"conversion\": \"Explain the Conversion score based on the Intent Labels and Transactional scores.\",\n    \"strength\": \"Summarize how these 3 pillars result in the final Strength score.\"\n  },\n  \"improvement_plan\": {\n    \"remove\": [\"keyword1\", \"keyword2\"],\n    \"add\": [\"suggested_keyword1\", \"suggested_keyword2\"],\n    \"primary_action\": \"The single most impactful change to improve the score.\"\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1872,
        64
      ],
      "id": "e2ce99c2-a681-4cf0-b345-f45d2fe5f8bb",
      "name": "Structured Output Parser9"
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-flash-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1456,
        48
      ],
      "id": "a91ffa8f-ae77-441c-9f0b-a0327af9fe46",
      "name": "Google Gemini Chat Model8",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration du bloc scoring (Score + Keywords)\nconst scoringData = $('Global scoring1').first().json;\n\n// 2. R√©cup√©ration du bloc audit (Analyse de l'IA)\n// On suppose que ce n≈ìud est plac√© juste apr√®s l'agent IA\nconst auditData = $('Global Eval').first().json.output\n// 3. Fusion totale dans un objet unique et structur√©\nreturn [\n  {\n    // Donn√©es globales pour la table 'listings'\n    global_listing_strength: scoringData.global_listing_strength,\n    global_status_label: auditData.global_status_label,\n    global_strategic_verdict: auditData.global_strategic_verdict,\n\n    score_justification_visibility: auditData.score_justification.visibility,\n    score_justification_relevance: auditData.score_justification.relevance,\n    score_justification_conversion: auditData.score_justification.conversion,\n    score_justification_strength: auditData.score_justification.strength,\n\n    improvement_plan_remove: auditData.improvement_plan.remove,\n    improvement_plan_add: auditData.improvement_plan.add,\n    improvement_plan_primary_action: auditData.improvement_plan.primary_action,\n\n\n    // Liste pour la table 'listing_seo_stats'\n    keywords: scoringData.keywords\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2080,
        -224
      ],
      "id": "45179f79-0fc4-4b62-b060-6099793724fb",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        3472,
        -1040
      ],
      "id": "7819def4-cd0b-4335-ba78-933b47e46e8b",
      "name": "Respond to Webhook5"
    },
    {
      "parameters": {
        "fieldToSplitOut": "targets",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        608,
        -224
      ],
      "id": "749adb90-cba9-4f97-b7a7-c9cc632407c0",
      "name": "Split Out1"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        7872,
        48
      ],
      "id": "7bde8383-fd19-42a8-a556-668214c7eff8",
      "name": "Respond to Webhook6",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# ROLE\nAct as a Senior Etsy Marketplace SEO Strategist and Conversion-Focused Keyword Auditor.\n\nYou specialize in analyzing listing performance through the lens of data. You understand that ranking is a balance between reach (Visibility), precision (Relevance), and the probability of a sale (Conversion). Your tone is professional, strategic, and brutally honest.\n\n# TASK\nAnalyze the provided listing data, focusing on the relationship between the calculated mathematical scores and the actual keyword selection. You must justify why the listing received these specific scores and prescribe a plan to reach a 90+ Strength Index.\n\n# DATA TO ANALYZE\n1. **Calculated Scores**: \n   - `listing_strength`: The overall performance grade.\n   - `listing_visibility`: Capacity to generate impressions (based on raw volume index).\n   - `listing_relevance`: Alignment between the visual subject and the search terms.\n   - `listing_conversion`: How likely the traffic is to buy (Transactional intent).\n   - `listing_raw_visibility_index`: The cumulative search power of the tags.\n2. **Keyword List**: Detailed stats per keyword (Volume, Competition, Niche Score, Intent).\n3. **Visual Context**: Product type, theme, niche, and aesthetic style.\n\n# AUDIT CRITERIA\n- **Relevance Gap**: Does the `listing_relevance` match the visual analysis? High-volume keywords with low `niche_score` are considered \"SEO Noise.\"\n- **Visibility Bottleneck**: Is the `listing_visibility` low because the keywords are too specific (Snipers) or because they have zero volume?\n- **Conversion potential**: Does the `listing_conversion` reflect a majority of \"Title\" keywords with high `transactional_score`?\n\n# OUTPUT FORMAT (Strict JSON)\nYou must produce a breakdown that justifies each score.\n\n{\n  \"global_status_label\": \"2-3 words (e.g., 'Targeted but Invisible' or 'Broad and Diluted')\",\n  \"global_strategic_verdict\": \"2 concise sentences summarizing the overall market position.\",\n  \"score_justification\": {\n    \"visibility\": \"Explain the Visibility score and Raw Index based on the volume of current tags.\",\n    \"relevance\": \"Justify the Relevance score by comparing Niche Scores vs SEO Noise in the top tags.\",\n    \"conversion\": \"Explain the Conversion score based on the Intent Labels and Transactional scores.\",\n    \"strength\": \"Summarize how these 3 pillars result in the final Strength score.\"\n  },\n  \"improvement_plan\": {\n    \"remove\": [\"keyword1\", \"keyword2\"],\n    \"add\": [\"suggested_keyword1\", \"suggested_keyword2\"],\n    \"primary_action\": \"The single most impactful change to improve the score.\"\n  }\n}\n\n# INPUT DATA\n\n## Global Scores\n- Listing Strength: {{ $('Edit Fields').first().json.global_audit.listing_strength }}\n- Listing Visibility: {{ $('Edit Fields').first().json.global_audit.listing_visibility }}\n- Listing Relevance: {{ $('Edit Fields').first().json.global_audit.listing_relevance }}\n- Listing Conversion: {{ $('Edit Fields').first().json.global_audit.listing_conversion }}\n- Raw Visibility Index: {{ $('Edit Fields').first().json.global_audit.listing_raw_visibility_index }}\n\n\n\n# Data to Analyze\n# Product details\nProduct Type:{{ $('Edit Fields').first().json.ProductType }}\nProduct Description:{{ $('Edit Fields').first().json.Description }}\nTheme:{{ $('Edit Fields').first().json.Theme }}\nNiche:{{ $('Edit Fields').first().json.Niche }}\nSub-niche:{{ $('Edit Fields').first().json.SubNiche }}\n\n\n#Visual info (from mockup analysis)\nVisual Aesthetic: {{ $('Edit Fields').first().json.visual_aesthetic }}\nTarget Audience: {{ $('Edit Fields').first().json.visual_target_audience }}\nTypography:{{ $('Edit Fields').first().json.visual_typography }}\nGraphic:{{ $('Edit Fields').first().json.visual_graphics }}\nColors:{{ $('Edit Fields').first().json.visual_colors }}\nOverall vibe:{{ $('Edit Fields').first().json.visual_overall_vibe }}\n- Calculated Listing Strength: {{ $('Edit Fields').first().json.global_audit.listing_strength }}/100\n- Full Keywords List: \n{{ JSON.stringify($node[\"Global scoring1\"].json.keywords) }}\n\n\n\n# Output Format (Strict JSON)\n\n{\n  \"global_status_label\": \"2-3 words (e.g., 'Targeted but Invisible' or 'Broad and Diluted')\",\n  \"global_strategic_verdict\": \"2 concise sentences summarizing the overall market position.\",\n  \"score_justification\": {\n    \"visibility\": \"Explain the Visibility score and Raw Index based on the volume of current tags.\",\n    \"relevance\": \"Justify the Relevance score by comparing Niche Scores vs SEO Noise in the top tags.\",\n    \"conversion\": \"Explain the Conversion score based on the Intent Labels and Transactional scores.\",\n    \"strength\": \"Summarize how these 3 pillars result in the final Strength score.\"\n  },\n  \"improvement_plan\": {\n    \"remove\": [\"keyword1\", \"keyword2\"],\n    \"add\": [\"suggested_keyword1\", \"suggested_keyword2\"],\n    \"primary_action\": \"The single most impactful change to improve the score.\"\n  }\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1664,
        -224
      ],
      "id": "259b8eaa-dbe6-4984-8a90-aef7f6be53be",
      "name": "Global Eval",
      "retryOnFail": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are an Advanced Etsy SEO Researcher specializing in \"Niche Deep-Diving\". Your task is to take a set of proven SEO winners and expand the semantic field to find 100 NEW high-potential keywords.\n\n# Context\n\n# Product Data Input\nProduct Type:{{ $('Edit Fields').first().json.ProductType }}\nProduct Description:{{ $('Edit Fields').first().json.Description }}\nTheme:{{ $('Edit Fields').first().json.Theme }}\nNiche:{{ $('Edit Fields').first().json.Niche }}\nSub-niche:{{ $('Edit Fields').first().json.SubNiche }}\nCustom-niche:{{ $('Edit Fields').item.json.Custom_niche }}\n\n# 2. Visual & Marketing Data (Input from Image Analysis)\nVisual Aesthetic: {{ $('Edit Fields').first().json.visual_aesthetic }}\nTarget Audience: {{ $('Edit Fields').first().json.visual_target_audience }}\nTypography:{{ $('Edit Fields').first().json.visual_typography }}\nGraphic:{{ $('Edit Fields').first().json.visual_graphics }}\nColors:{{ $('Edit Fields').first().json.visual_colors }}\nOverall_vibe:**{{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n\n\n# The Winners (Top 5 Performers)\nThese keywords have already shown high Opportunity Scores. Analyze their intent, style, and target audience:\n{{ JSON.stringify($node[\"Filter 5 best\"].json.selected_keywords) }}\n\n# Mission: The \"Deep Dive\" expansion\nGenerate 100 NEW and UNIQUE keywords. Do NOT repeat the winners listed above. \nExplore these 3 specific directions based on the Winners' DNA:\n\n1. **Semantic Variations**: Use synonyms, alternative phrasing, and specific terminology used by this niche's subculture.\n2. **Occasion & Persona**: If the winners are \"gifts\", find specific gift-giving moments. If they are \"style-based\", find specific sub-aesthetics (e.g., if \"Dark Academia\" won, explore \"Light Academia\", \"Library Core\", \"Classic Literature style\").\n3. **Compound Long-Tail**: Create highly specific 2-3 word phrases that combine the attributes of the winners with buyer intent (e.g., \"minimalist [winner] aesthetic\", \"[winner] gift for [persona]\").\n\n# Constraints\n- **NO DUPLICATES**: Do not include any of the 5 winners in the new list.\n- **DATA-DRIVEN**: Aim for terms that actual humans type, avoiding overly poetic or \"hallucinated\" AI phrases.\n- **ETSY FOCUS**: Keep it relevant to physical products and the Etsy marketplace.\n\n\n#Priority action from previous keywords evaluation\n{{ $('Edit Fields').item.json.improvement_priority }}\n\n# Output Format\nReturn ONLY a JSON array of strings, ready for API processing:\n# Output Format\n{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    ...\n    \"keyword 100\"\n  ]\n}\n",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        6352,
        48
      ],
      "id": "04aa23d1-b565-43c3-b69c-63c9867cda75",
      "name": "sniper prompt",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# ROLE\nYou are an Etsy SEO strategist and search behavior analyst.\n\nYour goal is to generate a LARGE but HIGH-QUALITY pool of transactional search phrases that can later be filtered using external keyword tools like Dataforseo.\n\nDo NOT optimize for perfection.\nOptimize for diversity, specificity, and buyer intent.\n\n\n# GOAL\nGenerate 100 DISTINCT buyer-intent search phrases that represent how real Etsy shoppers would search when ready to purchase.\n\n\n# STRATEGY\nMaximize:\n‚Ä¢ transactional intent\n‚Ä¢ semantic diversity\n‚Ä¢ niche specificity\n‚Ä¢ phrase variety\n\nMinimize:\n‚Ä¢ duplicates\n‚Ä¢ synonyms of same phrase\n‚Ä¢ generic words\n‚Ä¢ low intent\n\n\n# DISTRIBUTION (STRICT)\n40 Product + niche anchored\n20 Gift intent\n15 Audience + product\n10 Occasion / seasonal\n10 Aesthetic / style\n5 Problem / need based\n\n\n# RULES\n‚Ä¢ 2‚Äì4 words per phrase\n‚Ä¢ include product type in ‚â• 70%\n‚Ä¢ phrases must sound natural\n‚Ä¢ no punctuation\n‚Ä¢ no duplicates\n‚Ä¢ avoid plural or grammatical variations of same phrase\n‚Ä¢ avoid generic tags\n‚Ä¢ prioritize buyer language\n\n\n# THINK LIKE A BUYER\nExamples of buyer thinking:\ngift for dog mom shirt\ncute reading shirt women\ncozy book lover tee\nlibrarian weekend shirt\nteacher reading outfit\n\n\n# Product Data Input\n- **Product Type:** {{ $('Edit Fields').item.json.ProductType }}\n- **Theme:** {{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-Niche:** {{ $('Edit Fields').item.json.SubNiche }}\n- **Product Description:** {{ $('Edit Fields').item.json.Description }}\n\n\n# 2. Visual & Marketing Data (Input from Image Analysis)\n- **Aesthetic/Style:** {{ $json.visual_aesthetic }}\n- **Typography:** {{ $json.visual_typography }}\n- **Graphic Elements:** {{ $json.visual_graphics }}\n- **Color Palette:** {{ $json.visual_colors }}\n- **Target Audience:** {{ $json.visual_target_audience }}\n- **Overall_vibe:**{{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n\n\n\n\n**IMPORTANT** Generate up to 100 highly relevant keywords. Quality is priority over quantity, but aim for 100 if the niche allows.\n\n# Output Format\n{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    ...\n    \"keyword 50\"\n  ]\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        3152,
        -2080
      ],
      "id": "47cf4244-d848-4a57-add5-bd3b49eaea9a",
      "name": "Openai keywords prompt",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        5920,
        832
      ],
      "id": "c21469bc-4e66-4edc-b1fe-ff8a65ebc1af",
      "name": "Google Gemini Chat Model3",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"selected_seed\": \"the chosen keyword\",\n  \"reasoning\": \"Short explanation (max 10 words) of the transactional choice\",\n  \"market_segment\": \"identified main category\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        6144,
        848
      ],
      "id": "f8708425-062f-46ae-ac46-cedbd7a8ac60",
      "name": "Structured Output Parser3",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const editFieldsNode = $('Edit Fields').first().json;\n\n\nconst myKeywords = editFieldsNode.body.keywords.map(k => k.keyword);\n\n// 1. On r√©cup√®re la r√©ponse du n≈ìud pr√©c√©dent\nconst rawResponse = $input.first().json;\n\n\n// 2. On acc√®de au tableau des 10 items\n// Chemin : tasks[0] -> result[0] -> items\nconst itemsArray = rawResponse.tasks[0].result[0].items;\n\n// 3. On transforme les donn√©es (Correction de la variable ici)\nconst cleanedCompetitors = itemsArray.map(item => {\n    return {\n        rank: item.rank_absolute,\n        title: item.title,\n        description: item.description,\n        // On utilise displayed_price pour plus de clart√© marketing\n        price: item.price ? item.price.displayed_price : 'N/A'\n    };\n});\n\n// 4. On renvoie le r√©sultat final pour le LLM\nreturn {\n    competitor_data_string: JSON.stringify(cleanedCompetitors, null, 2),\n    existingKeywords:myKeywords,\n    count: cleanedCompetitors.length\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        6960,
        608
      ],
      "id": "25697de4-9379-438f-92f7-8306ee721cd2",
      "name": "Code in JavaScript",
      "disabled": true
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        7040,
        816
      ],
      "id": "9188452f-de91-4950-b4cd-7cb9a155c3dc",
      "name": "Google Gemini Chat Model4",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"gap_detected\": true,\n  \"top_missing_keywords\": [\"keyword 1\", \"keyword 2\", \"keyword 3\"],\n  \"sniper_advice\": \"A tactical summary (max 15 words) on how to beat these 10 competitors.\",\n  \"market_leader_vibe\": \"Describe the dominant visual/textual style (e.g., Cozy Retro, Minimalist Aesthetic)\",\n  \"opportunity_score\": 85\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        7344,
        816
      ],
      "id": "d4034b7d-2c81-43c4-aab7-343fc7929b88",
      "name": "Structured Output Parser5",
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/keywords_data/google/search_volume/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keywords\": {{ JSON.stringify($json.output.top_missing_keywords) }}, \n    \"location_name\": \"United States\", \n    \"language_name\": \"English\"\n  }\n]\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7536,
        608
      ],
      "id": "ccbb5966-4db0-487c-85dd-b3dbb7c0f7d4",
      "name": "DataForSEO stats2",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. Acc√®s profond au r√©sultat DataforSEO\nconst results = $input.first().json.tasks[0].result;\n\n// 2. Formatage pour le tableau \"Competition top keywords\"\nconst competitionTable = results\n  .filter(res => res.search_volume !== null) // On ignore les mots √† volume 0 ou null\n  .map(res => {\n    // Calcul d'un score d'opportunit√© PennySEO simplifi√©\n    // On privil√©gie le volume par rapport √† la comp√©tition\n    const vol = res.search_volume || 0;\n    const comp = res.competition || 1;\n    const score = Math.round((vol / comp) / 50);\n\n    return {\n      keyword: res.keyword,\n      avg_volume: vol,\n      competition: res.competition === 1 ? \"High\" : \"Medium/Low\",\n      cpc: res.cpc ? `$${res.cpc}` : \"N/A\",\n      opportunity_score: Math.min(score, 100), // Plafonn√© √† 100\n      market_proof: \"Seen in Top 10\"\n    };\n});\n\n// 3. Tri par volume d√©croissant\ncompetitionTable.sort((a, b) => b.avg_volume - a.avg_volume);\n\nreturn { competition_table: competitionTable };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8992,
        592
      ],
      "id": "96851658-5524-43e9-b737-c257b5946ab1",
      "name": "Code in JavaScript4",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es d'entr√©e\nconst results = $input.first().json.tasks[0].result;\nconst editFields = $('Edit Fields').first().json;\nconst tag_count = editFields.Tag_count || 13;\nconst productType = (editFields.ProductType || 'mug').toLowerCase();\nconst competitor_seed = $('Get Competitor seed').first().json.output.selected_seed\nconst is_competition = true;\n\nlet processed = results\n  .filter(item => item.search_volume !== null && item.monthly_searches !== null)\n  .map(item => {\n    const avgVolume = item.search_volume;\n    const comp = item.competition || 0.5;\n    const kw = item.keyword.toLowerCase();\n    \n    // Historique des volumes (du plus ancien au plus r√©cent)\n    const monthlyVolumes = item.monthly_searches.map(m => m.search_volume).reverse();\n\n    // Calculs des tendances et statuts\n    const last3MonthsAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n    const first3MonthsAvg = (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3;\n    \n    const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n    const isEvergreen = monthlyVolumes.every(v => v > (avgVolume * 0.2));\n    const isPromising = avgVolume > 200 && comp < 0.4;\n\n    // --- FORMULE DU SCORE D'OPPORTUNIT√â ---\n    // Utilisation de la racine carr√©e pour √©quilibrer le volume et la niche\n    let finalScore = (Math.sqrt(avgVolume) * (1 - comp + 0.2));\n\n    // D√âFINITION DES GROUPES D'INTENTION (Logique Cumulative)\n    const highIntentGroups = {\n        product: [productType, 'cup', 'drinkware', 'mug'], \n        custom: ['custom', 'personalized', 'name', 'initial'], \n        roles: ['mom', 'dad', 'teacher', 'nurse', 'coworker', 'boss', 'friend', 'grandma', 'colleague'], \n        occasions: ['birthday', 'wedding', 'christmas', 'graduation', 'retirement', 'anniversary', 'santa'], \n        gift: ['gift', 'present', 'token', 'memento', 'gag'] \n    };\n\n    let boostCount = 0;\n\n    // On applique un boost de 40% pour chaque cat√©gorie d'intention trouv√©e\n    Object.values(highIntentGroups).forEach(group => {\n        if (group.some(word => kw.includes(word))) {\n            finalScore *= 1.4; \n            boostCount++;\n        }\n    });\n\n    // Bonus sp√©cial \"Combo\" : si le tag touche 3 cat√©gories ou plus (ex: \"Custom Teacher Gift\")\n    if (boostCount >= 3) finalScore *= 1.5;\n\n    // Boost Longue Tra√Æne (Pr√©cision de recherche)\n    const wordCount = item.keyword.split(' ').length;\n    if (wordCount >= 3) finalScore *= 1.3;\n\n    // Boosts de Performance (Dataforseo trends)\n    if (isTrending) finalScore *= 1.3;\n    if (isPromising) finalScore *= 1.2;\n\n    return {\n      keyword: item.keyword,\n      avg_volume: avgVolume,\n      competition: comp,\n      opportunity_score: Math.round(finalScore),\n      volumes_history: monthlyVolumes,\n      is_competion: is_competition,\n      status: {\n        trending: isTrending,\n        evergreen: isEvergreen,\n        promising: isPromising\n      }\n    };\n  });\n\n// 2. S√©lection avec Diversit√© S√©mantique (Concept Tracker)\nconst selectedTags = [];\nconst conceptTracker = {};\n\n// Tri par score d'opportunit√© d√©croissant\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n  if (selectedTags.length >= tag_count) break;\n\n  const words = item.keyword.toLowerCase().split(' ');\n  // On identifie le concept par les deux premiers mots\n  const concept = words.slice(0, 2).join(' ');\n\n  conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n  // R√®gle de diversit√© : maximum 2 tags par concept identique\n  if (conceptTracker[concept] <= 2) {\n    selectedTags.push(item);\n  }\n}\n\nreturn {competitor_seed:competitor_seed,\n        selectedTags\n       };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8336,
        592
      ],
      "id": "d717dcb8-ff5a-4a3b-aa3d-028065e2af36",
      "name": "Filter keywords2",
      "disabled": true
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        8592,
        592
      ],
      "id": "06280acc-9d97-4d99-b3f1-828ba577d039",
      "name": "Respond to Webhook",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# ROLE\nYou are the \"PennySEO Sniper\" expert. Your role is to identify the most powerful \"Seed Keyword\" from a list of 13 tags to trigger a competitive analysis on Etsy via DataforSEO.\n\n# INPUT DATA\n- **Product Type \nProduct Type:{{ $('Edit Fields').first().json.ProductType }}\nProduct Description:{{ $('Edit Fields').first().json.Description }}\nTheme:{{ $('Edit Fields').first().json.Theme }}\nNiche:{{ $('Edit Fields').first().json.Niche }}\nSub-niche:{{ $('Edit Fields').first().json.SubNiche }}\nCustom-niche: {{ $('Edit Fields').item.json.Custom_niche }}\n\n**Visual analysis\nVisual Aesthetic: {{ $('Edit Fields').first().json.visual_aesthetic }}\nTarget Audience: {{ $('Edit Fields').first().json.visual_target_audience }}\nTypography:{{ $('Edit Fields').first().json.visual_typography }}\nGraphic:{{ $('Edit Fields').first().json.visual_graphics }}\nColors:{{ $('Edit Fields').first().json.visual_colors }}\nOverall_vibe:**{{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n\n\n# OBJECTIVE\nSelect the single keyword (from the 13 provided) that holds the strongest **Transactional Intent** and best represents the intersection between the product and the \"Marketing Gap.\"\n\n# SELECTION CRITERIA\n1. **Transactionality:** Prioritize keywords indicating clear buying intent (e.g., \"Gag gift,\" \"Personalized decor\") over purely descriptive ones.\n2. **Niche Relevance:** The keyword must be inseparable from the product type identified by the image analysis.\n3. **Volume Potential:** Choose the term most likely to be the primary entry point for an Etsy buyer (the \"Smart Broad Match\").\n4. **Etsy Constraints:** Strictly maximum 3 words and under 20 characters.\n\n# OUTPUT FORMAT\nRespond exclusively in JSON format for n8n processing:\n{\n  \"selected_seed\": \"the chosen keyword\",\n  \"reasoning\": \"Short explanation (max 10 words) of the transactional choice\",\n  \"market_segment\": \"identified main category\"\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        5984,
        608
      ],
      "id": "8d9055e7-6054-4bf0-89e6-48057cdb4e1b",
      "name": "Get Competitor seed",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# ROLE\nYou are the \"PennySEO Sniper\". Your mission is to perform a competitive \"Gap Analysis\" by comparing the user's current tags with the market leaders' data extracted from Etsy/Google.\n\n# INPUT DATA\n- **User's Current Tags:** {{ $json.existingKeywords }}\n- **Market Leaders (Top 10):** {{ $json.competitor_data_string }}\n\n# OBJECTIVE\nIdentify \"Marketing Gaps\": High-value keywords or concepts that the Top 10 competitors are using in their titles/descriptions but are MISSING from the user's current 13 tags.\n\n# ANALYSIS CRITERIA\n1. **Pillar Detection:** Identify recurring terms in competitor titles (e.g., \"Reading Crewneck\").\n2. **Niche Intersection Gaps:** Find specific identity markers (e.g., \"Rescue Dog\", \"Frenchie\", \"Librarian Gift\") used by leaders.\n3. **Price/Vibe Context:** Use the price points to determine if the \"Gap\" is in a premium or budget niche.\n\n# CONSTRAINTS\n- Return 5 high-value keywords\n- Suggestions must be strictly 4 words max and < 20 characters.\n- Focus on \"Intent-based\" and transactionnal keywords (why people buy).\n- **Technical Integrity:** DO NOT suggest brand-specific tags (like 'Comfort Colors') UNLESS the user's ProductType/Description explicitly mentions it.\n- **Substitution:** If competitors use a specific brand you can't use, suggest an aesthetic equivalent instead (e.g., 'Vintage wash t-shirt' or 'Heavyweight cotton').\n\n# OUTPUT FORMAT (Strict JSON)\n{\n  \"gap_detected\": true,\n  \"top_missing_keywords\": [\"keyword 1\", \"keyword 2\", \"keyword 3\"],\n  \"sniper_advice\": \"A tactical summary (max 30 words) on how to beat these 10 competitors.\",\n  \"market_leader_vibe\": \"Describe the dominant visual/textual style (e.g., Cozy Retro, Minimalist Aesthetic)\",\n  \"opportunity_score\": 85\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        7168,
        608
      ],
      "id": "d7f8d397-7e8f-4e3a-a649-bbde008580ef",
      "name": "Get competitor listings",
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f65bde99-4259-4657-8403-10d5da10d02a",
              "leftValue": "={{ $json.status_code }}",
              "rightValue": "={{ 20000 }}",
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        7040,
        1088
      ],
      "id": "01f69ba7-3e06-4148-a111-a302db1ef0a6",
      "name": "If",
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/serp/google/organic/live/advanced",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keyword\": \"site:etsy.com {{ $json.output.selected_seed }} \",\n    \"location_code\": 2840,\n    \"language_code\": \"en\",\n    \"device\": \"desktop\",\n    \"limit\": 20\n  }\n]",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        6336,
        608
      ],
      "id": "61429b12-ce5c-4a47-b9f0-ecfd19f4f428",
      "name": "Google search",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "url": "=https://api.dataforseo.com/v3/serp/google/organic/task_get/advanced/{{ $('Google search').item.json.tasks[0].id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        6832,
        1088
      ],
      "id": "7f3c67db-5e98-43cf-98c1-afd13f86d19d",
      "name": "Google response",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        6544,
        608
      ],
      "id": "9600778a-deb6-42ff-846c-1cfa1f5fb103",
      "name": "Wait1",
      "webhookId": "85e8afd4-9428-4fb4-b59f-26f465dee316",
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"keywords\": [\n      { \"keyword\": \"Custom Mug\", \"transactional_score\": 10, \"intent_label\": \"Title\" },\n      { \"keyword\": \"Pottery ideas\", \"transactional_score\": 2, \"intent_label\": \"Tag\" },\n      { \"keyword\":\"Coffee mug\", \"transactional_score\": 9 , \"intent_label\": \"Title\"}\n    ]\n}\n\n\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -1120,
        -1728
      ],
      "id": "51359320-7338-4b93-8a6d-4f62536460d9",
      "name": "Structured Output Parser6",
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-flash-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -1376,
        -1728
      ],
      "id": "bffccb5d-2c24-4bce-b57b-7e4a7003a1d0",
      "name": "Google Gemini Chat Model10",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are a Senior Etsy SEO Specialist. Your task is to evaluate a list of tags and assign a `transactional_score` from 0 to 10 to each one.\n\n# Objective\nFor each keyword provided, assign a **Transactional Score** and a **Purchase Intent Label**. This data will be used to determine if a keyword represents a \"High-Conversion\" intent (Buyer ready to purchase a specific product) or an \"Informational\" intent (User seeking ideas or browsing).\n\n# Definition of Transactional Score\n- **High Score (8-10):** Direct purchase intent. These tags describe a physical product format, a specific recipient, or a clear commercial use case. They indicate the user is looking for an item to add to their cart.\n- **Medium Score (4-7):** Browsing/Descriptive intent. These tags describe the subject or theme but lack a strong product-specific noun (e.g., just \"Anxious Cat\" vs \"Anxious Cat Shirt\").\n- **Low Score (0-3):** Informational or Educational intent. These tags are used for research, DIY, history, or general inspiration. They create a \"bounce\" effect because the user is not yet looking for a physical product to buy.\n\n\n# Scoring Instructions\n1. **Purchase Intent Check:** Reward keywords that include specific product nouns matching the **Product Type** (e.g., if the product is a T-Shirt, reward \"tee\", \"shirt\", \"apparel\").\n2. **Recipient Analysis:** Boost keywords that specify a buyer or recipient (e.g., \"gift for mom\", \"teacher gift\", \"coworker shirt\").\n3. **Format Penalty:** Penalize purely conceptual or aesthetic terms that don't imply a physical object (e.g., \"humor\", \"sarcasm\", \"anxiety\" alone without \"shirt\" or \"design\").\n4. **Informational Penalty:** Any keyword starting with \"How to\", \"DIY\", \"Ideas\", or \"Meaning of\" must be scored below 3.\n5. **Transactional Boost:** Award a (+1) bonus to keywords indicating a ready-to-use product format (e.g., \"design\", \"print\", \"merch\", \"apparel\").\n\n\n# Reference Datasets\n\n### LIST 1: HIGH TRANSACTIONAL EXAMPLES (Score 8-10 | Label: Transactional)\nPersonalized gold necklace, Custom pet portrait, Handmade ceramic mug, Engagement ring box, Vintage leather bag, Boho wedding dress, Nursery wall art, Gift for bridesmaids, Monogrammed leather wallet, Hand-poured soy candle, Minimalist wood desk, Personalized baby blanket, Custom neon sign, Bridesmaid proposal box, 1st anniversary gift, Crochet baby hat, Mid century planter, Custom wood sign, Aesthetic jewelry box, Initial ring silver, Sterling silver hoop earrings, Organic cotton baby onesie, Wedding guest book alternative, Personalized dog collar, Macrame wall hanging, Custom family illustration, Velvet throw pillow cover, Hand-painted silk scarf, Personalized recipe box, Reusable beeswax wraps, Engraved wooden watch, Vintage denim jacket, Personalized Christmas ornament, Custom business logo stamp, Flower girl dress, Leather camera strap, Ceramic yarn bowl, Personalized travel pouch, Custom name puzzle, Dried flower bouquet, Hand-carved cutting board, Personalized pocket knife, Dainty birthstone ring, Aesthetic planner stickers, 18k gold plated bracelet, Custom song lyric print, Personalized apron for men, Handmade soap gift set, Custom return address stamp, Personalized teacher appreciation gift.\n\n### LIST 2: LOW TRANSACTIONAL / INFORMATIONAL EXAMPLES (Score 1-3 | Label: Informational)\nHow to clean gold, History of engagement rings, Ceramic glazing techniques, What is boho style, Caring for leather bags, Meaning of birthstones, DIY nursery decor ideas, How to knit hats, Types of soy wax, Wedding anniversary traditions, Benefits of wood furniture, History of neon signs, How to style planters, Origins of macrame, Caring for silver jewelry, Definition of minimalist design, How to measure ring, Choosing a baby blanket, Meaning of lotus flower, History of vintage fashion, How to paint ceramics, Best wood for carving, Cotton vs polyester benefits, How to press flowers, Sustainable living tips, Home office layout ideas, How to store jewelry, Guide to essential oils, Symbols in tarot cards, History of embroidery, How to dry lavender, Choosing the right font, Benefits of soy candles, How to wear a silk scarf, Wedding planning checklist, History of the 1970s, Calligraphy for beginners, How to frame art, Best gift ideas for moms, Photography tips for beginners, Meaning of colors in decor, How to plant succulents, Differences in leather types, How to make a stamp, History of pottery, Guide to vintage sizing, How to organize a desk, Benefits of organic cotton, Why buy handmade, Decorating with mirrors.\n\n###Intent Label (Title vs Tag):**\n   - Score 8-10 : Label = Title\n   - Score 1-7 : Label=Tag\n \n\n\n# Task\nAnalyze the provided list of keywords. Return ONLY a JSON array of objects. Do not include any text before or after the JSON.\n\n# Output Format (Example)\n[\n  \"keywords\": [\n      { \"keyword 1\": \"Custom Mug\", \"transactional_score\": 10, \"intent_label\": \"Title\" },\n      { \"keyword 2\": \"Pottery ideas\", \"transactional_score\": 2, \"intent_label\": \"Tag\" },\n      ...,\n      { \"keyword 100\":\"Coffee mug\", \"transactional_score\": 9 , \"intent_label\": \"Title\"}\n    ]\n]\n\n\n# Keywords to Analyze:\n{{ JSON.stringify($json.output.keywords) }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -1408,
        -1968
      ],
      "id": "6b0bef99-eecf-4e06-a798-a79e58b799e2",
      "name": "Transactionnal intention scoring",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des deux sources de donn√©es\n// On suppose que le LLM est l'entr√©e 0 et DataforSEO l'entr√©e 1 (ou via $(node).item)\nconst llmResults = Array.isArray($('Scoring_data').first().json.output.keywords) \n    ? $('Scoring_data').first().json.output.keywords \n    : [];\n\nconst dataforseoResults = $input.first().json.tasks[0].result;\n\n// 2. Cr√©ation d'un dictionnaire (Map) pour un acc√®s rapide aux scores du LLM\n// On utilise le mot-cl√© en minuscule comme cl√© pour √©viter les probl√®mes de casse\nconst llmMap = new Map(\n    llmResults.map(item => [item.keyword.toLowerCase(), item])\n);\n\n// 3. Fusion des donn√©es\nconst enrichedResults = dataforseoResults.map(item => {\n    const keywordKey = item.keyword.toLowerCase();\n    const llmData = llmMap.get(keywordKey);\n\n    return {\n        ...item,\n        // On ajoute les donn√©es du LLM, ou des valeurs par d√©faut si non trouv√©\n        niche_score: llmData ? llmData.niche_score : 5,\n        relevance_label: llmData ? llmData.relevance_label : 5,\n        transactional_score: llmData ? llmData.transactional_score : 5,\n        intent_label: llmData ? llmData.intent_label : 'Tag'\n    };\n});\n\n// 4. Retourner les r√©sultats enrichis\nreturn [\n  {\n    \"result\": enrichedResults\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2240,
        -1040
      ],
      "id": "87987b7b-f018-41ef-8bf2-b8f4b515e227",
      "name": "Fusion des listes"
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es d'entr√©e\nconst results = $input.first().json.result;\nconst editFields = $('Edit Fields').first().json;\nconst tag_count = editFields.Tag_count || 13;\nconst productType = (editFields.ProductType || 'mug').toLowerCase();\nconst is_competition = false\n\nlet processed = results\n  .filter(item => item.search_volume !== null && item.monthly_searches !== null)\n  .map(item => {\n    const avgVolume = item.search_volume;\n    const comp = item.competition || 0.5;\n    const kw = item.keyword.toLowerCase();\n    \n    // Historique des volumes (du plus ancien au plus r√©cent)\n    const monthlyVolumes = item.monthly_searches.map(m => m.search_volume).reverse();\n\n    // Calculs des tendances et statuts\n    const last3MonthsAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n    const first3MonthsAvg = (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3;\n    \n    const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n    const isEvergreen = monthlyVolumes.every(v => v > (avgVolume * 0.2));\n    const isPromising = avgVolume > 200 && comp < 0.4;\n\n    // --- FORMULE DU SCORE D'OPPORTUNIT√â ---\n    // Utilisation de la racine carr√©e pour √©quilibrer le volume et la niche\n    let finalScore = (Math.sqrt(avgVolume) * (1 - comp + 0.2));\n\n    // D√âFINITION DES GROUPES D'INTENTION (Logique Cumulative)\n    const highIntentGroups = {\n        product: [productType, 'cup', 'drinkware', 'mug'], \n        custom: ['custom', 'personalized', 'name', 'initial'], \n        roles: ['mom', 'dad', 'teacher', 'nurse', 'coworker', 'boss', 'friend', 'grandma', 'colleague'], \n        occasions: ['birthday', 'wedding', 'christmas', 'graduation', 'retirement', 'anniversary', 'santa'], \n        gift: ['gift', 'present', 'token', 'memento', 'gag'] \n    };\n\n    let boostCount = 0;\n\n    // On applique un boost de 40% pour chaque cat√©gorie d'intention trouv√©e\n    Object.values(highIntentGroups).forEach(group => {\n        if (group.some(word => kw.includes(word))) {\n            finalScore *= 1.4; \n            boostCount++;\n        }\n    });\n\n    // Bonus sp√©cial \"Combo\" : si le tag touche 3 cat√©gories ou plus (ex: \"Custom Teacher Gift\")\n    if (boostCount >= 3) finalScore *= 1.5;\n\n    // Boost Longue Tra√Æne (Pr√©cision de recherche)\n    const wordCount = item.keyword.split(' ').length;\n    if (wordCount >= 3) finalScore *= 1.3;\n\n    // Boosts de Performance (Dataforseo trends)\n    if (isTrending) finalScore *= 1.3;\n    if (isPromising) finalScore *= 1.2;\n\n    return {\n      keyword: item.keyword,\n      avg_volume: avgVolume,\n      competition: comp,\n      opportunity_score: Math.round(finalScore),\n      volumes_history: monthlyVolumes,\n      is_competition:true,\n      status: {\n        trending: isTrending,\n        evergreen: isEvergreen,\n        promising: isPromising\n      }\n    };\n  });\n\n// 2. S√©lection avec Diversit√© S√©mantique (Concept Tracker)\nconst selectedTags = [];\nconst conceptTracker = {};\n\n// Tri par score d'opportunit√© d√©croissant\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n  if (selectedTags.length >= tag_count) break;\n\n  const words = item.keyword.toLowerCase().split(' ');\n  // On identifie le concept par les deux premiers mots\n  const concept = words.slice(0, 2).join(' ');\n\n  conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n  // R√®gle de diversit√© : maximum 2 tags par concept identique\n  if (conceptTracker[concept] <= 2) {\n    selectedTags.push(item);\n  }\n}\n\nreturn selectedTags;\n\n\n\n\n// 1. R√©cup√©ration des donn√©es (On suppose que le LLM a ajout√© 'llm_score' et 'llm_label' √† chaque item)\nconst results = $input.all().map(item => item.json); // Adaptation pour recevoir la liste trait√©e par le LLM\nconst editFields = $('Edit Fields').first().json;\nconst tag_count = editFields.Tag_count || 13;\n\nlet processed = results.map(item => {\n    const avgVolume = item.avg_volume || item.search_volume || 0;\n    const comp = item.competition || 0.5;\n    const kw = item.keyword.toLowerCase();\n    \n    // Nouvelles variables issues de ton prompt LLM\n    const txScore = item.transactional_score || 5; // Par d√©faut 5 si absent\n    const intentLabel = item.intent_label || 'Tag'; // 'Title' ou 'Tag'\n\n    // --- FORMULE DU SCORE D'OPPORTUNIT√â ---\n    // Base : Volume vs Comp√©tition\n    let finalScore = (Math.sqrt(avgVolume) * (1 - comp + 0.2));\n\n    // --- BOOST TRANSACTIONNEL (LLM) ---\n    // Un score de 10 donne un boost de +100%, un score de 5 donne +50%\n    finalScore *= (1 + (txScore / 10));\n\n    // --- BOOST TITRE ---\n    // Si l'IA juge que c'est un mot de \"Titre\", on lui donne un bonus pour l'aider √† √™tre s√©lectionn√©\n    if (intentLabel === 'Title') {\n        finalScore *= 1.25;\n    }\n\n    // Boost Longue Tra√Æne (Toujours important sur Etsy)\n    const wordCount = kw.split(' ').length;\n    if (wordCount >= 3) finalScore *= 1.2;\n\n    return {\n        ...item,\n        opportunity_score: Math.round(finalScore),\n        intent_label: intentLabel,\n        transactional_score: txScore\n    };\n});\n\n// 2. S√©lection avec Diversit√© S√©mantique (Concept Tracker)\nconst selectedTags = [];\nconst conceptTracker = {};\n\n// Tri par score d'opportunit√© final\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n    if (selectedTags.length >= tag_count) break;\n\n    const words = item.keyword.toLowerCase().split(' ');\n    // On garde la diversit√© pour √©viter les r√©p√©titions (ex: ne pas avoir 10 fois \"Personalized\")\n    const concept = words[0]; \n\n    conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n    // √âquilibre : On autorise 2 tags par concept identique max\n    if (conceptTracker[concept] <= 2) {\n        selectedTags.push(item);\n    }\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3696,
        -2176
      ],
      "id": "7d44bcce-4939-42f1-a6f1-c7c055c20357",
      "name": "Filter keywords3",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are a Senior Etsy SEO Specialist. Your task is to evaluate a list of tags and assign a `niche_score` from 0 to 10 to each one.\n\n# Objective\nFor each keyword provided, assign a **Niche Score** and a **Relevance Label**. This data will be used to determine if a keyword is \"On-Target\" (Specific) or \"Broad\" (Generic) to ensure the listing reaches the most qualified buyers. \n\n# Target Context for Calibration. \n1.To calibrate your analysis, use the following target:\n- **Theme:**{{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-niche:**{{ $('Edit Fields').item.json.SubNiche }}\n- **Product Type:**{{ $('Edit Fields').item.json.ProductType }}\n\n2. Visual & Marketing Data (Input from Image Analysis)\n- **Aesthetic/Style:** {{ $('Edit Fields').item.json.visual_aesthetic }}\n- **Target Audience:** {{ $('Edit Fields').item.json.visual_target_audience }}\n- **Overall_vibe:**{{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n\n# Definition of Niche Score\n- **High Score (8-10):** Ultra-specific tags. They combine a precise subject, a defined artistic style, and a unique context. They act as high-accuracy semantic coordinates.\n- **Medium Score (4-7):** Descriptive but broader tags. Usually limited to the product type and a general subject (e.g., \"Raccoon t-shirt\").\n- **Low Score (0-3):** Generic \"filler\" tags, marketing buzzwords, or broad gift occasions applicable to millions of unrelated products. They create semantic noise.\n\n# Reference Datasets\n\n### LIST 1: HIGH-NICHE EXAMPLES (Score 8-10 | Label: Niche-Specific)\nVictorian raccoon oil painting, Dark academia dinosaur sketch, Retro 70s wildflower bouquet, Japanese ukiyo-e trash panda, Bauhaus geometric forest print, Minimalist line art mama tee, Mid-century modern cat portrait, Cottagecore botanical herb chart, Sarcastic office humor raccoon, Neurodivergent pride dinosaur, Steampunk mechanical owl art, 1990s bootleg rap style raccoon, Gothic celestial moon moth, Psych-rock aesthetic mushroom, Art deco geometric wolf head, Groovy retro daisy mama shirt, Anatomy of a raccoon diagram, Terrazzo pattern abstract dino, Wabi-sabi minimalist pottery art, Cyberpunk neon street raccoon, French country lavender decor, Nordic folk art woodland scene, Ghibli style meadow landscape, Hygge aesthetic coffee raccoon, Tarot card style trash panda, Risograph print animal portrait, Brutalist architecture dinosaur, Watercolor wildflower meadow, Traditional tattoo style raccoon, Pop art colorful dino pattern, Dark forest moody landscape, Preppy varsity letter mama, Kawaii pastel raccoon aesthetic, Vintage field guide bird chart, Neoclassic marble statue dino, Surrealist dreamscape raccoon, Boho desert sunset illustration, Scientific illustration beetle, Streetwear graffiti raccoon art, Renaissance portrait trash panda, Abstract expressionist floral, Pixel art 8-bit dinosaur tee, Maximalist eclectic gallery art, Zen garden minimalist print, Tiki bar retro raccoon mascot, Coastal grandmother aesthetic, Dark botanical poisonous plants, Retro futuristic space raccoon, Glitch art distorted dinosaur, Mythological chimera sketch.\n\n### LIST 2: GENERIC EXAMPLES(Score 1-3 | Label: Broad)\nGift for her, Best seller Etsy, Mothers day gift, Personalized shirt, Custom clothing, High quality tee, Unique gift idea, Birthday present, Fast shipping shirt, Handmade with love, Trending now item, Christmas gift idea, Personalized present, Women's fashion top, High quality print, Gift for him, Best gift ever, Special occasion gift, Trendy aesthetic tee, Beautiful wall art, Cool t-shirt design, Professional quality, Gift for anyone, Anniversary present, Top rated item, Holiday season gift, Cheap price shirt, Luxury gift idea, Modern style top, Pretty home decor, Great gift for mom, New arrival item, Must have accessory, Creative gift idea, Personalized accessory, Popular item 2026, Best selling art, Cute gift for her, High resolution print, Soft material tee, Generic home gift, Standard size poster, Multi color design, Online shop favorite, Gift for best friend, Stylish clothing item, Authentic handmade, Fast delivery gift, Every day wear top, Perfect gift for you.\n\n# Scoring Instructions\n1. **Semantic Comparison:** Compare the input tags against these two lists. \n2. **Structure Analysis:** Reward tags that follow the \"Style + Subject + Product\" or \"Niche Audience + Subject\" structure (similar to List 1).\n3. **Fluff Penalty:** Any tag containing \"filler\" words from List 2 (gift, best, quality, custom, personalized) must be penalized with a score below 4, even if it contains a niche keyword.\n4. **Specificity:** The more the tag limits the search results to a specific \"tribe\" or \"aesthetic,\" the higher the score.\n5. **Transactional Intent Boost:** Apply a slight bonus (+1 score point) to keywords that demonstrate clear purchase intent or product specificity (e.g., \"tee\", \"shirt\", \"apparel\", \"mug\", \"poster\")\n\n###Relevance Label (Niche-Specific vs Broad):**\n   - **Score 8-10 : Label = Niche-Specific\n   - Score 4-7 : Label=Neutral\n   - Score 1-3 :  Label =  Broad)\n\n# Task\nAnalyze the provided list of keywords based on the Target Context. Return ONLY a JSON array of objects. Do not include any text before or after the JSON.\n\n# Output Format (Example)\n[\n  \"keywords\": [\n      { \"keyword\": \"Floral varsity mama\", \"niche_score\": 10, \"relevance_label\": \"Niche-Specific\" },\n      { \"keyword\": \"Gift for mom\", \"niche_score\": 3, \"relevance_label\": \"Broad\" },\n      ...,\n      { \"keyword\": \"Varsity letter shirt\", \"niche_score\": 8, \"relevance_label\": \"Niche-Specific\"}\n    ]\n]\n\n# Keywords to Analyze:\n{{ JSON.stringify($json.output.keywords) }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -912,
        -1920
      ],
      "id": "17fa034a-f867-4f62-ae88-8b12991a11da",
      "name": "Niche scoring",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -944,
        -1632
      ],
      "id": "aaf46860-4bc2-4b75-a9f5-de3bdca9c1c9",
      "name": "Google Gemini Chat Model9",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"keywords\": [\n      { \"keyword\": \"Floral varsity mama\", \"niche_score\": 10, \"relevance_label\": \"Niche-Specific\" },\n      { \"keyword\": \"Gift for mom\", \"niche_score\": 3, \"relevance_label\": \"Broad\" },     \n      { \"keyword\": \"Varsity letter shirt\", \"niche_score\": 8, \"relevance_label\": \"Niche-Specific\"}\n    ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -704,
        -1632
      ],
      "id": "8d51eb03-31fe-4d54-b31b-341ff932aa7c",
      "name": "Structured Output Parser10",
      "disabled": true
    },
    {
      "parameters": {
        "mode": "combine",
        "fieldsToMatchString": "output.keywords[0].keyword",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1712,
        -1040
      ],
      "id": "58ac60f5-a136-4992-afd8-18d8988e21c4",
      "name": "Scoring_data"
    },
    {
      "parameters": {
        "jsCode": "// On r√©cup√®re l'objet contenant les trois listes\nconst inputData = $input.first().json;\n\n/**\n * Fonction de calcul du score de force pour une liste donn√©e\n */\nconst calculateListingStrength = (keywords) => {\n    //if (!keywords || keywords.length === 0) return null;\n  const selectedKeywords = (keywords || []).filter(kw => kw.is_selection_ia === true);\n\n    // --- 1. PILIER VISIBILIT√â (30%) ---\n    let totalVisibility = 0;\n    selectedKeywords.forEach(kw => {\n        const vol = kw.search_volume || 0;\n        // Les mots-cl√©s de Titre p√®sent 1.5x plus\n        const weight = kw.intent_label === 'Title' ? 1.5 : 1.0;\n        \n        // Racine carr√©e pour lisser les gros volumes\n        totalVisibility += Math.sqrt(vol) * weight;\n    });\n\n    const visibilityScore = Math.min(100, (totalVisibility / 1000) * 100); \n\n    // --- 2. PILIER CONVERSION (35%) ---\n    const avgTransactional = selectedKeywords.reduce((acc, kw) => acc + (kw.transactional_score || 5), 0) / selectedKeywords.length;\n    const conversionScore = avgTransactional * 10;\n\n    // --- 3. PILIER RELEVANCE (35%) ---\n    const avgNiche = selectedKeywords.reduce((acc, kw) => acc + (kw.niche_score || 5), 0) / selectedKeywords.length;\n    const relevanceScore = avgNiche * 10;\n\n    // --- SCORE FINAL POND√âR√â ---\n    const finalLSI = Math.round(\n        (visibilityScore * 0.30) + \n        (conversionScore * 0.35) + \n        (relevanceScore * 0.35)\n    );\n\n    return {\n        listing_strength: finalLSI,\n        breakdown: {\n            visibility: Math.round(visibilityScore),\n            conversion: Math.round(conversionScore),\n            relevance: Math.round(relevanceScore)\n        },\n        stats: {\n            total_keywords: selectedKeywords.length,\n            raw_visibility_index: Math.round(totalVisibility)\n        }\n    };\n};\n\n// G√©n√©ration des bilans pour chaque mode\nreturn {\n    broad: calculateListingStrength(inputData.broad),\n    balanced: calculateListingStrength(inputData.balanced),\n    sniper: calculateListingStrength(inputData.sniper)\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2848,
        -1040
      ],
      "id": "93374a0c-3c81-4ae2-95a1-48370ac98084",
      "name": "Globale evaluation"
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des statistiques par mode\nconst allStats = $('Globale evaluation').first().json;\n\n// 2. R√©cup√©ration des listes de mots-cl√©s par mode\nconst allKeywords = $('SEO Mode filter').first().json;\n\n// 3. Fusion par mode\n// On cr√©e un objet final avec les trois piliers\nconst finalMerge = {\n    broad: {\n        ...allStats.broad,\n        keywords: allKeywords.broad || []\n    },\n    balanced: {\n        ...allStats.balanced,\n        keywords: allKeywords.balanced || []\n    },\n    sniper: {\n        ...allStats.sniper,\n        keywords: allKeywords.sniper || []\n    }\n};\n\n// 4. Retourner le r√©sultat au format n8n\nreturn [\n    { json: finalMerge }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3120,
        -1040
      ],
      "id": "af4993e8-e11e-4d45-b332-6e74b39a1d2a",
      "name": "fusion "
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are a Senior Visual Trend Analyst and E-commerce Marketing Specialist. \n\n# Task\nAnalyze the provided mockup and extract its visual DNA and its **Target Audience**.\n\n# Analysis Instructions\n1. **Aesthetic/Style:** (e.g., Gorpcore, Dark Academia, Y2K).\n2. **Typography:** (e.g., Distressed Serif, Minimalist Sans).\n3. **Graphic Elements:** (e.g., Fine-line floral, retro sunset).\n4. **Color Palette:** (e.g., Earthy tones, Neon vibrance).\n5. **Target Audience (NEW):** Based on the design cues, identify the ideal buyer profile.\n   - *Consider:* Age group, gender lean (if any), interests, and the \"buying occasion\" (e.g., \"Gen Z students interested in street photography\", \"Millennial dog moms who love minimalist home decor\").\n\n# Output Format\n{\n  \"visual_analysis\": {\n    \"aesthetic_style\": \"...\",\n    \"typography_details\": \"...\",\n    \"graphic_elements\": \"...\",\n    \"color_palette\": \"...\",\n    \"target_audience\": \"...\",\n    \"overall_vibe\": \"...\"\n  }\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1408,
        -2096
      ],
      "id": "cc7b8371-f869-45a3-87ad-44513bde9d56",
      "name": "Image analysis1",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "\n// 1. R√©cup√©ration des donn√©es (On suppose que le LLM a ajout√© 'llm_score' et 'llm_label' √† chaque item)\nconst results = $input.first().json.result;// Adaptation pour recevoir la liste trait√©e par le LLM\nconst editFields = $('Edit Fields').first().json;\nconst tag_count = editFields.Tag_count || 13;\nconst is_competition = false\n\nlet processed = results.map(item => {\n    const avgVolume = item.search_volume || item.search_volume || 0;\n    const comp = item.competition || 0.5;\n    const kw = item.keyword.toLowerCase();\n    \n    // Nouvelles variables issues de ton prompt LLM\n    const txScore = item.transactional_score || 5; // Par d√©faut 5 si absent\n\n    const intentLabel = item.intent_label || 'Tag'; // 'Title' ou 'Tag'\n    const nicheScore = item.niche_score || 5; \n    const relevance_label = item.relevance_label || 'Broad';\n\n\n      // Historique des volumes (du plus ancien au plus r√©cent)\n    const monthlyVolumes = item.monthly_searches.map(m => m.search_volume).reverse();\n\n    // Calculs des tendances et statuts\n      const last3MonthsAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n      const first3MonthsAvg = (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3;\n    \n      const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n      const isEvergreen = monthlyVolumes.every(v => v > (avgVolume * 0.2));\n      const isPromising = avgVolume > 200 && comp < 0.4;\n\n    // --- √âTAPE 1 : FORMULE DE BASE (L'OPPORTUNIT√â STATISTIQUE) ---\n    // Utilisation de la racine carr√©e pour aplatir les volumes extr√™mes\n    let finalScore = (Math.sqrt(avgVolume) * (1 - comp + 0.2));\n\n    // --- √âTAPE 2 : BOOST TRANSACTIONNEL ---\n    // Un score de 10 double le score de base (+100%)\n    finalScore *= (1 + (txScore / 10));\n\n\n    // --- √âTAPE 3 : LOGIQUE DE NICHE (BALANCED SNIPER) ---\n    if (nicheScore >= 7) {\n        // Boost pour les p√©pites de niche ultra-cibl√©es\n        finalScore *= (1 + (nicheScore / 10)); \n    } else if (nicheScore <= 2) {\n        // P√©nalit√© s√©v√®re pour les hors-sujets (ex: Gender Reveal pour un tshirt Mama)\n        finalScore *= 0.5;\n    } \n    // Entre 3 et 6 : On ne booste ni ne p√©nalise. Le Volume et le TX Score d√©cident.\n\n\n  \n    // --- √âTAPE 4 : BOOSTS STRAT√âGIQUES ---\n    // Priorit√© au Titre (+25%)\n    if (intentLabel === 'Title') {\n        finalScore *= 1.25;\n    }\n\n    // Boost Longue Tra√Æne (+20% pour 3 mots ou plus)\n    const wordCount = kw.split(' ').length;\n    if (wordCount >= 3) finalScore *= 1.2;\n\n      // Boosts de Performance (Dataforseo trends)\n      if (isTrending) finalScore *= 1.3;\n      if (isPromising) finalScore *= 1.2;\n\n  \n    return {\n        ...item,\n        opportunity_score: Math.round(finalScore),\n        intent_label: intentLabel,\n        transactional_score: txScore,\n        niche_score: nicheScore,\n        relevance_label: relevance_label,\n          status: {\n          trending: isTrending,\n           evergreen: isEvergreen,\n            promising: isPromising\n       }\n    };\n});\n\n// 2. S√©lection avec Diversit√© S√©mantique (Concept Tracker)\nconst selectedTags = [];\nconst conceptTracker = {};\n\n// Tri par score d'opportunit√© final\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n    if (selectedTags.length >= tag_count) break;\n\n    const words = item.keyword.toLowerCase().split(' ');\n    // On garde la diversit√© pour √©viter les r√©p√©titions (ex: ne pas avoir 10 fois \"Personalized\")\n    const concept = words[0]; \n\n    conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n    // √âquilibre : On autorise 2 tags par concept identique max\n    if (conceptTracker[concept] <= 2) {\n        selectedTags.push(item);\n    }\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3456,
        -2048
      ],
      "id": "222483f6-ed99-4e1c-b3ce-b442abb53a5d",
      "name": "Filter keywords4",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Act as a Senior Etsy Marketplace SEO Strategist and Conversion-Focused Keyword Auditor.\n\nYou specialize exclusively in optimizing product listings on Etsy‚Äôs internal search engine.  \nYou understand how ranking is influenced by:\n- exact keyword matching\n- buyer intent\n- competition density\n- long-tail opportunities\n- tag portfolio balance (Evergreen vs Niche vs Trend)\n- commercial conversion probability (not just traffic)\n\nYour mission is to deliver an honest, data-driven executive assessment of the listing‚Äôs SEO strength and provide specific, actionable keyword decisions that directly improve visibility, ranking, and sales potential.\n\nYou do not give generic advice.  \nYou think like a growth consultant: diagnose ‚Üí explain ‚Üí prescribe.\n\nBe concise, strategic, and pragmatic.\n\n\n# Task\n\nUsing:\n- the calculated listing strength score\n- the full keyword list with SEO statistics\n- the product details\n- the visual aesthetic and target audience\n\nPerform a strategic audit of the keyword portfolio.\n\nAnalyze:\n\n1. Relevance alignment between keywords and the product‚Äôs aesthetic and target audience  \n2. Balance between:\n   - high-volume competitive (Evergreen)\n   - low-competition niche/long-tail\n   - trendy or emerging opportunities  \n3. Presence of:\n   - overly broad or saturated tags\n   - weak, redundant, or low-intent tags\n   - missing high-intent or underserved phrases  \n4. Whether the keyword mix realistically supports BOTH ranking potential AND conversions\n\nThen produce:\n\n- A short business-style status label (2‚Äì3 words)\n- A concise 2-sentence strategic verdict explaining overall performance\n- A 2-sentence explanation connecting the calculated strength score with real keyword relevance and competitiveness\n- A clear improvement plan listing exactly which keywords to remove and which to add, plus the single most impactful primary action\n\nBe direct and honest.  \nIf the listing is weak, say so clearly.  \nIf strong, justify why with evidence from the keyword mix.\n\n# Data to Analyze\n# Product details\nProduct Type:{{ $('Edit Fields').first().json.ProductType }}\nProduct Description:{{ $('Edit Fields').first().json.Description }}\nTheme:{{ $('Edit Fields').first().json.Theme }}\nNiche:{{ $('Edit Fields').first().json.Niche }}\nSub-niche:{{ $('Edit Fields').first().json.SubNiche }}\n\n\n#Visual info (from mockup analysis)\nVisual Aesthetic: {{ $('Edit Fields').first().json.visual_aesthetic }}\nTarget Audience: {{ $('Edit Fields').first().json.visual_target_audience }}\nTypography:{{ $('Edit Fields').first().json.visual_typography }}\nGraphic:{{ $('Edit Fields').first().json.visual_graphics }}\nColors:{{ $('Edit Fields').first().json.visual_colors }}\nOverall vibe:{{ $('Edit Fields').item.json.visual_overall_vibe }}\n- Calculated Listing Strength: {{ $json.global_listing_strength }}/100\n- Full Keywords List: \n{{ JSON.stringify($node[\"Global scoring1\"].json.keywords) }}\n\n\n\n# Output Format (Strict JSON)\n\n{\n  \"global_status_label\": \"string\",\n  \"global_strategic_verdict\": \"string\",\n  \"score_explanation\": \"2-sentence breakdown of the calculated strength vs keyword relevance\",\n  \"improvement_priority\": \"Specific list of keywords to remove/add and the primary action to take\"\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        3696,
        -1856
      ],
      "id": "88ec1bc6-7520-4eda-b688-d3008ade6be5",
      "name": "Global Eval1",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "\n// 1. R√©cup√©ration des donn√©es depuis le n≈ìud pr√©c√©dent\n// On acc√®de au premier item entrant, puis √† la cl√© \"result\" qui contient le tableau\nconst results = $input.first().json.result;\n\n// R√©cup√©ration des param√®tres utilisateur (avec valeurs par d√©faut s√©curis√©es)\nconst editFields = $(\"Edit Fields\").first().json || {};\nconst tag_count = editFields.Tag_count || 13;\n\nlet processed = results.map(item => {\n    // --- Initialisation des variables avec valeurs par d√©faut si null ---\n    const avgVolume = item.search_volume || 0;\n    const comp = (item.competition !== null && item.competition !== undefined) ? item.competition : 0.5;\n    const kw = (item.keyword || \"\").toLowerCase();\n    \n    const txScore = item.transactional_score || 5; \n    const intentLabel = item.intent_label || 'Tag'; \n    const nicheScore = item.niche_score || 5; \n    const relevance_label = item.relevance_label || 'Broad';\n\n    // --- Gestion s√©curis√©e de l'historique des volumes ---\n    // Si monthly_searches est null ou n'est pas un tableau, on utilise un tableau de 12 z√©ros\n    let monthlyVolumes = [];\n    if (item.monthly_searches && Array.isArray(item.monthly_searches)) {\n        monthlyVolumes = item.monthly_searches.map(m => m.search_volume || 0).reverse();\n    } else {\n        monthlyVolumes = new Array(12).fill(0);\n    }\n\n    // --- Calculs des tendances (bas√©s sur les 12 mois) ---\n    // S√©curit√© : on s'assure d'avoir assez de donn√©es, sinon moyennes √† 0\n    const last3MonthsAvg = monthlyVolumes.length >= 12 \n        ? (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3 \n        : 0;\n    const first3MonthsAvg = monthlyVolumes.length >= 3 \n        ? (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3 \n        : 0;\n    \n    const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n    const isEvergreen = monthlyVolumes.length > 0 && monthlyVolumes.every(v => v > (avgVolume * 0.2));\n    const isPromising = avgVolume > 200 && comp < 0.4;\n\n    // --- √âTAPE 1 : FORMULE DE BASE (OPPORTUNIT√â) ---\n    // Racine carr√©e pour lisser l'impact des √©normes volumes\n    let finalScore = (Math.sqrt(avgVolume) * (1 - comp + 0.2));\n\n    // --- √âTAPE 2 : BOOST TRANSACTIONNEL ---\n    finalScore *= (1 + (txScore / 10));\n\n    // --- √âTAPE 3 : LOGIQUE DE NICHE (PENNYSEO STRATEGY) ---\n    ////--if (nicheScore >= 7) {\n     ////--    finalScore *= (1 + (nicheScore / 10)); // Boost pour pertinence √©lev√©e\n     ////--} else if (nicheScore <= 2) {\n     ////--    finalScore *= 0.5; // P√©nalit√© pour hors-sujet\n     ////--}\n\n    // --- NOUVELLE LOGIQUE DE NICHE DURCIE ---\n    if (nicheScore >= 8) {\n        // BOOST AGRESSIF (Sniper Turbo)\n        // On passe de +100% √† +300% pour les scores 8-10\n        finalScore *= 4.0; \n    } \n    else if (nicheScore <= 4) {\n        // P√âNALIT√â √âLIMINATOIRE (Le Mur)\n        // Tout ce qui est sous 5 est consid√©r√© comme du \"bruit\"\n        // On passe de 0.5x √† 0.1x\n        finalScore *= 0.1;\n    }\n    else {\n        // ZONE GRISE (Scores 5, 6, 7)\n        // On ne booste pas, on laisse le volume d√©cider mais sans avantage\n        finalScore *= 1.0;\n    }\n\n\n  \n    // --- √âTAPE 4 : BOOSTS STRAT√âGIQUES ---\n    if (intentLabel === 'Title') finalScore *= 1.25;\n\n    const wordCount = kw.split(' ').filter(w => w.length > 0).length;\n    if (wordCount >= 3) finalScore *= 1.2;\n\n    if (isTrending) finalScore *= 1.3;\n    if (isPromising) finalScore *= 1.2;\n\n    return {\n        ...item,\n        opportunity_score: Math.round(finalScore),\n        status: {\n            trending: isTrending,\n            evergreen: isEvergreen,\n            promising: isPromising\n        }\n    };\n});\n\n// 2. S√©lection et Diversit√© (Concept Tracker)\nconst selectedTags = [];\nconst conceptTracker = {};\n\n// Tri par score d√©croissant\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n    if (selectedTags.length >= tag_count) break;\n\n    const words = item.keyword.toLowerCase().split(' ');\n    const concept = words[0]; // On utilise le premier mot comme racine du concept\n\n    conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n    // Limite : Max 2 tags commen√ßant par le m√™me mot pour maximiser la diversit√© s√©mantique\n    if (conceptTracker[concept] <= 2) {\n        selectedTags.push(item);\n    }\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3456,
        -2192
      ],
      "id": "c282ec5a-a7d6-4d4c-9114-1a721f95ead7",
      "name": "Filter keywords5",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es et param√®tres\nconst results = $input.first().json.result;\nconst editFields = $(\"Edit Fields\").first().json || {};\nconst is_selection_ia = false;\nconst nb_selection_ia = 13;\nconst tag_count = 15//editFields.Tag_count || 150;\n//const seo_mode = (editFields.seo_mode || \"balanced\").toLowerCase();\n\n\n// 2. Configuration des exposants (Weights) et Hard Filters\nconst modeParams = { \n  //a for Volume\n  //b for Competion\n  //g for Niche\n  //d for Transactional\n    broad: {\n        a: 0.50, b: 0.10, g: 0.20, d: 0.20, // Volume dominant\n        minT: 5, minN: 0\n    },\n    balanced: {\n        a: 0.30, b: 0.10, g: 0.30, d: 0.20, // √âquilibre\n        minT: 5, minN: 2\n    },\n    sniper: {\n        a: 0.25, b: 0.10, g: 0.40, d: 0.20, // Pr√©cision dominante\n       minT: 5, minN: 5\n   }\n};\n\n// 3. Pr√©-calcul pour la normalisation (Max Volume)\nconst maxVol = Math.max(...results.map(i => i.search_volume || 0), 100);\n\n// Fonction de scoring r√©utilisable\nconst processKeywordsForMode = (modeName) => {\n    const p = modeParams[modeName];\n    \n    // --- √âTAPES A √† E : Calculs ---\n    let processed = results.map(item => {\n        const rawVol = item.search_volume || 0;\n        const rawComp = (item.competition !== null && item.competition !== undefined) ? parseFloat(item.competition) : 0.5;\n        const txScore = item.transactional_score || 5;\n        const nicheScore = item.niche_score || 5;\n\n        // Hard Filters\n        if (txScore < p.minT || nicheScore < p.minN) return null;\n\n        // Normalisation\n        const V = Math.log(rawVol + 1) / Math.log(maxVol + 1);\n        const C = 1 - rawComp;\n        const T = Math.pow(txScore / 10, 2);\n        const N = Math.pow(nicheScore / 10, 2);\n\n        // Formule de Score\n        let finalScore = 100 * (\n            Math.pow(V || 0.01, p.a) * Math.pow(C || 0.01, p.b) * Math.pow(T || 0.01, p.g) * Math.pow(N || 0.01, p.d)\n        );\n\n        // Boosts\n        if (item.intent_label === 'Title') finalScore *= 1.2;\n        const wordCount = (item.keyword || \"\").split(' ').filter(w => w.length > 0).length;\n        if (wordCount >= 3) finalScore *= 1.1;\n\n        // Tendances\n        let monthlyVolumes = [];\n        if (item.monthly_searches && Array.isArray(item.monthly_searches)) {\n            monthlyVolumes = item.monthly_searches.map(m => m.search_volume || 0).reverse();\n        } else {\n            monthlyVolumes = new Array(12).fill(0);\n        }\n\n        const minVolume = Math.min(...monthlyVolumes);\n        const isEvergreen = monthlyVolumes.length >= 12 && minVolume > (rawVol * 0.4);\n        const recentAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n        const historicalAvg = monthlyVolumes.slice(0, 9).reduce((a, b) => a + b, 0) / 9;\n        const isTrending = recentAvg > (historicalAvg * 1.5);\n        const isPromising = (rawVol / (rawComp + 0.1)) > (maxVol / 2);\n\n        return {\n            ...item,\n            opportunity_score: Math.round(finalScore),\n            status: {\n                trending: isTrending,\n                evergreen: isEvergreen,\n                promising: isPromising\n            }\n        };\n    }).filter(i => i !== null);\n\n    // --- √âTAPE 5 : S√©lection et Diversit√© ---\n    const selectedTags = [];\n    const conceptTracker = {};\n    processed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\n    for (const item of processed) {\n        if (selectedTags.length >= tag_count) break;\n        const concept = item.keyword.toLowerCase().split(' ')[0];\n        conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n        if (conceptTracker[concept] <= 2) {\n            selectedTags.push(item);\n        }\n    }\n\n    // --- √âTAPE 6 : Marquage de la s√©lection IA ---\n    // On s'assure que selectedTags est bien tri√© par opportunity_score (d√©j√† fait, mais par s√©curit√©)\n    // On applique l'attribut vrai pour les X premiers, et faux pour les autres.\n    return selectedTags.map((item, index) => {\n        return {\n            ...item,\n            is_selection_ia: index < nb_selection_ia\n        };\n    });\n\n\n  \n    return selectedTags;\n};\n\n// Ex√©cution pour les 3 modes\nreturn {\n    broad: processKeywordsForMode('broad'),\n    balanced: processKeywordsForMode('balanced'),\n    sniper: processKeywordsForMode('sniper')\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2576,
        -1040
      ],
      "id": "3c031069-2d0b-461c-b54d-3f2bbea6f170",
      "name": "SEO Mode filter"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are an expert Etsy SEO Specialist and E-commerce Copywriter specializing in the Print-on-Demand (POD) market. Your goal is to generate a \"Master Pool\" of 200 highly relevant keywords that will serve as the raw data for three different SEO strategies: Broad, Balanced, and Sniper.\n\n# Task\nAnalyze the provided product data and visual characteristics to brainstorm exactly 200 diverse SEO keywords/phrases. \n\n# Master Pool Strategy (The 5 Segments)\nTo ensure the pool can support all SEO modes, you MUST generate exactly 40 keywords for each of the following 5 categories:\n\n1. **Broad & High Volume (40 tags):** High-level niche terms and general gift categories (e.g., \"Bookish Gift\", \"Reading Shirt\", \"Floral Aesthetic\").\n2. **Balanced & Descriptive (40 tags):** Mid-range keywords combining the niche with specific themes (e.g., \"Wildflower Book Shirt\", \"Cottagecore Reader\", \"Botanical Varsity Tee\").\n3. **Audience & Gift Scenarios (40 tags):** Target specific buyers and occasions (e.g., \"Gift for Librarian\", \"English Major Shirt\", \"Book Club Present\").\n4. **Sniper & Long-Tail (40 tags):** Ultra-specific, low-competition terms and cultural sub-niches (e.g., \"Dark Academia Reader\", \"Wildflower Masking Art\", \"Introvert Bookworm Tee\").\n5. **Aesthetic & Technical (40 tags):** Focus on the look, colors, and specific vibe (e.g., \"Espresso Brown Shirt\", \"Retro Varsity Bookish\", \"Boho Collegiate Style\").\n\n# Product Data Input\n- **Product Type:** {{product_type}}\n- **Theme:** {{theme}}\n- **Niche:** {{niche}}\n- **Sub-Niche:** {{sub_niche}}\n- **Custom-Niche:** {{custom_niche}}\n- **Product Description:** {{user_description}}\n\n# Visual & Marketing Data\n- **Aesthetic/Style:** {{visual_aesthetic}}\n- **Typography:** {{visual_typography}}\n- **Graphic Elements:** {{visual_graphics}}\n- **Color Palette:** {{visual_colors}}\n- **Target Audience:** {{visual_target_audience}}\n- **Overall Vibe:** {{visual_overall_vibe}}\n\n# Constraints & Rules\n- **Quantity:** Exactly 200 keywords in total.\n- **Product Type Integration:** At least 75% of the keywords MUST include the \"{{product_type}}\" (or common synonyms like Shirt/Tee/Top) to ensure transactional intent.\n- **Character Limit:** Each keyword phrase must be under 20 characters (Etsy tag limit).\n- **Word Count:** Maximum 3 words per phrase.\n- **No Duplicates:** Ensure 200 unique strings.\n- **No Generic Fluff:** Avoid \"Gift for him\" or \"Funny shirt\" unless combined with a specific niche word (e.g., \"Funny Bookish Shirt\").\n\n# Output Format\nOutput MUST be a clean JSON object containing a single array of strings. No preamble, no explanation.\n\n{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    ...\n    \"keyword 200\"\n  ]\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -256,
        -1232
      ],
      "id": "f7376eee-d5d3-4a80-affa-1670fba9e9f2",
      "name": "200 keywords",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are an expert Etsy SEO Specialist and E-commerce Copywriter specializing in the Print-on-Demand (POD) market. Your goal is to generate high-converting, relevant keywords that drive organic traffic.\n**Crucially, at least 75% of the keywords MUST include the Product Type to ensure they are transactional search terms.\n\n\n# Task\nAnalyze the provided product data and the pre-analyzed visual characteristics to brainstorm 100 highly relevant SEO keywords/phrases for an Etsy listing.\n\n\n# Product Data Input\n- **Product Type:** {{ $('Edit Fields').item.json.ProductType }}\n- **Theme:** {{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-Niche:** {{ $('Edit Fields').item.json.SubNiche }}\n- **Custom-Niche: {{ $('Edit Fields').item.json.Custom_niche }}\n- **Product Description:** {{ $('Edit Fields').item.json.Description }}\n\n\n# 2. Visual & Marketing Data (Input from Image Analysis)\n- **Aesthetic/Style:** {{ $json.visual_aesthetic }}\n- **Typography:** {{ $json.visual_typography }}\n- **Graphic Elements:** {{ $json.visual_graphics }}\n- **Color Palette:** {{ $json.visual_colors }}\n- **Target Audience:** {{ $json.visual_target_audience }}\n- **Overall_vibe:**{{ $('Edit Fields').item.json.visual_overall_vibe }}\n\n\n\n\n# Keyword Strategy Requirements\nGenerate a diverse list of 100 keywords following these specific transactional categories:\n- **Long-tail Keywords:** Phrases buyers actually type (e.g., \"Gift for retired English teacher\").\n- **Product-Anchored (Mandatory):** Combine the Niche/Theme directly with the product type (e.g., \"Lawyer shirt\", \"Teacher mug\")\n- **Transactional Intent:** Phrases that indicate a buyer is ready to purchase. (e.g., Use \"Gift for\", \"Present\", \"Office Decor\", or \"Personalized\" combined with the niche)\n- **Audience + Product:** Connect who is buying with what they are buying (e.g., \"Gifts for Dog lovers\", \"Coffee addict mug\").\n- **Occasion & Scenario:** Where will this be used? (e.g., \"Secret Santa gift idea\", \"White elephant t-shirt\", \"Birthday present for him\").\n- **Aesthetic & Vibe:** Describe the look + the product (e.g., \"Minimalist shirt\", \"Retro 70s sport design\").\n\n#Other strategies\n- **NO GENERIC TAGS:** Avoid phrases like \"Gift for him\", \"Funny shirt\", or \"Custom gift\" unless they are combined with a very specific niche word.\n- **PRIORITIZE SPECIFICITY:** If the shirt is about an \"Angry Snail\", focus on \"Snail lovers\", \"Sarcastic mollusk\", \"Medieval snail meme\" rather than \"Funny animal shirt\".\n\n\n# Constraints\n- Strictly 100 keywords.\n- No duplicates.\n- Maximum 3 words per keyword phrase.\n- Focus on high-intent buyer language.\n- Output MUST be a clean JSON array of strings for programmatic processing.\n- Focus on transactionnal categories keywords\n- Include product type in keywords at least 50% of times\n\n\n**IMPORTANT** Generate up to 100 highly relevant keywords. Quality is priority over quantity, but aim for 100 if the niche allows.\n\n# Output Format\n{\n  \"keywords\": [\n    \"keyword 1\",\n    \"keyword 2\",\n    ...\n    \"keyword 50\"\n  ]\n}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        -256,
        -1488
      ],
      "id": "ee21fe62-488d-4075-b7cf-cf83c8cbcd01",
      "name": "Back up 100 keywords",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/keywords_data/google/search_volume/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keywords\": {{ JSON.stringify($json.output.keywords.map(item => item.keyword))}}, \n    \"location_name\": \"United States\", \n    \"language_name\": \"English\"\n  }\n]\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7680,
        -896
      ],
      "id": "c7d831bb-9022-40b0-8d2f-263a9d82adff",
      "name": "DataForSEO stats3",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        9216,
        -896
      ],
      "id": "286e52b3-5313-480e-b623-5e65d740f650",
      "name": "Respond to Webhook7",
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"keywords\": [\n      { \"keyword\": \"Custom Mug\", \"transactional_score\": 10, \"intent_label\": \"Title\" },\n      { \"keyword\": \"Pottery ideas\", \"transactional_score\": 2, \"intent_label\": \"Tag\" },\n      { \"keyword\":\"Coffee mug\", \"transactional_score\": 9 , \"intent_label\": \"Title\"}\n    ]\n}\n\n\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        7104,
        -528
      ],
      "id": "f274714b-b5be-4ef4-a9fa-e2a7a43a570f",
      "name": "Structured Output Parser11",
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        6848,
        -528
      ],
      "id": "93887c24-26b0-474a-848b-e74f260d8fb6",
      "name": "Google Gemini Chat Model11",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are the \"PennySEO Intelligence Engine,\" a specialist in Etsy Marketplace SEO. Your mission is to quantify the transactional value of keywords.\n\n# Objective\nFor each keyword provided, assign a Transactional Score and an Intent Label. This data will be used to filter and prioritize the most profitable keywords for Etsy sellers.\n\n# Reference Data for Calibration\n### Examples of High Transactional (Score 8-10 | Label: Title)\nPersonalized gold necklace, Custom pet portrait, Handmade ceramic mug, Engagement ring box, Vintage leather bag, Boho wedding dress, Nursery wall art, Gift for bridesmaids, Monogrammed leather wallet, Hand-poured soy candle, Minimalist wood desk, Personalized baby blanket, Custom neon sign, Bridesmaid proposal box, 1st anniversary gift, Crochet baby hat, Mid century planter, Custom wood sign, Aesthetic jewelry box, Initial ring silver.\n\n### Examples of Low Transactional / Informational (Score 1-3 | Label: Tag)\nHow to clean gold, History of engagement rings, Ceramic glazing techniques, What is boho style, Caring for leather bags, Meaning of birthstones, DIY nursery decor ideas, How to knit hats, Types of soy wax, Wedding anniversary traditions, Benefits of wood furniture, History of neon signs, How to style planters, Origins of macrame, Caring for silver jewelry, Definition of minimalist design, How to measure ring, Choosing a baby blanket, Meaning of lotus flower, History of vintage fashion.\n\n# Scoring Rules\n1. **Transactional Score (1-10):** \n   - 10: Immediate purchase intent (Specific product + Buyer modifier).\n   - 5: Moderate intent (General product or broad category).\n   - 1: Purely informational or educational.\n2. **Intent Label (Title vs Tag):**\n   - **Title:** The keyword is a primary search term, highly descriptive, and high-volume.\n   - **Tag:** The keyword is a secondary search term, a synonym, or an occasion/recipient modifier.\n\n# Task\nAnalyze the provided list of keywords. Return ONLY a JSON array of objects. Do not include any text before or after the JSON.\n\n# Output Format (Example)\n[\n  \"keywords\": [\n      { \"keyword 1\": \"Custom Mug\", \"transactional_score\": 10, \"intent_label\": \"Title\" },\n      { \"keyword 2\": \"Pottery ideas\", \"transactional_score\": 2, \"intent_label\": \"Tag\" },\n      ...,\n      { \"keyword 100\":\"Coffee mug\", \"transactional_score\": 9 , \"intent_label\": \"Title\"}\n    ]\n]\n\n\n# Keywords to Analyze:\n{{ JSON.stringify($json.keywords) }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        6896,
        -752
      ],
      "id": "21ae77c0-c940-4aa3-8b3d-11762c8d5179",
      "name": "Transactionnal intention scoring1",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des deux sources de donn√©es\n// On suppose que le LLM est l'entr√©e 0 et DataforSEO l'entr√©e 1 (ou via $(node).item)\nconst llmResults = Array.isArray($('Scoring_data1').first().json.output.keywords) \n    ? $('Scoring_data1').first().json.output.keywords \n    : [];\n\nconst dataforseoResults = $input.first().json.tasks[0].result;\n\n// 2. Cr√©ation d'un dictionnaire (Map) pour un acc√®s rapide aux scores du LLM\n// On utilise le mot-cl√© en minuscule comme cl√© pour √©viter les probl√®mes de casse\nconst llmMap = new Map(\n    llmResults.map(item => [item.keyword.toLowerCase(), item])\n);\n\n// 3. Fusion des donn√©es\nconst enrichedResults = dataforseoResults.map(item => {\n    const keywordKey = item.keyword.toLowerCase();\n    const llmData = llmMap.get(keywordKey);\n\n    return {\n        ...item,\n        // On ajoute les donn√©es du LLM, ou des valeurs par d√©faut si non trouv√©\n        niche_score: llmData ? llmData.niche_score : 5,\n        relevance_label: llmData ? llmData.relevance_label : 5,\n        transactional_score: llmData ? llmData.transactional_score : 5,\n        intent_label: llmData ? llmData.intent_label : 'Tag'\n    };\n});\n\n// 4. Retourner les r√©sultats enrichis\nreturn [\n  {\n    \"result\": enrichedResults\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7952,
        -896
      ],
      "id": "26fb2eff-8baa-45b5-91c8-1dd3e2d5dee0",
      "name": "Fusion des listes1",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are the \"PennySEO Intelligence Engine,\" a specialist in Etsy Marketplace SEO and Niche Analysis. Your mission is to quantify the alignment between keywords and a specific product niche.\n\n# Objective\nFor each keyword provided, assign a **Niche Score** and a **Relevance Label**. This data will be used to determine if a keyword is \"On-Target\" (Specific) or \"Broad\" (Generic) to ensure the listing reaches the most qualified buyers. \n\n# Target Context for Calibration. \nTo calibrate your analysis, use the following target:\n- **Theme:**{{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-niche:**{{ $('Edit Fields').item.json.SubNiche }}\n- **Costum niche:**{{ $('Edit Fields').item.json.Custom_niche }}\n- **Product Type:**{{ $('Edit Fields').item.json.ProductType }}\n\n# Reference Data for Calibration\n### Examples of High Niche Alignment (Score 8-10 | Label: Niche-Specific)\n*Keywords that describe the exact aesthetic, specific recipient, or unique style of the product.*\nFloral varsity mama shirt, Retro wildflower mom tee, Varsity letter mama sweatshirt, Aesthetic floral mother gift, Botanical varsity style top, Custom wildflower mama outfit, Trendy floral varsity apparel, Vintage mama floral design.\n\n### Examples of Low Niche Alignment (Score 1-3 | Label: Broad)\n*Keywords that are too generic, marketplace-wide terms, or unrelated styles.*\nGift for her, Mothers day gift, Personalized shirt, Custom clothing, Birthday present, Best seller Etsy, Handmade gift, Women's fashion, New mom gift, Christmas gift for mom, Comfortable shirt, High quality tee.\n\n# Scoring Rules\n1. **Niche Score (1-10):** - 10: Perfect Semantic Match (Matches Style + Aesthetic + Recipient + Product).\n   - 5: Category Match (Matches the Recipient or Product, but ignores the specific Style/Aesthetic).\n   - 1: Generic/Broad Match (Marketplace fillers that apply to millions of unrelated products).\n2. **Relevance Label (Niche-Specific vs Broad):**\n   - **Niche-Specific:** The keyword targets the core identity and unique \"DNA\" of the listing.\n   - **Broad:** The keyword targets a massive, high-competition audience with no specific style preference.\n\n# Task\nAnalyze the provided list of keywords based on the Target Context. Return ONLY a JSON array of objects. Do not include any text before or after the JSON.\n\n# Output Format (Example)\n[\n  \"keywords\": [\n      { \"keyword\": \"Floral varsity mama\", \"niche_score\": 10, \"relevance_label\": \"Niche-Specific\" },\n      { \"keyword\": \"Gift for mom\", \"niche_score\": 3, \"relevance_label\": \"Broad\" },\n      ...,\n      { \"keyword\": \"Varsity letter shirt\", \"niche_score\": 8, \"relevance_label\": \"Niche-Specific\"}\n    ]\n]\n\n# Keywords to Analyze:\n{{ JSON.stringify($json.keywords) }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        6880,
        -1312
      ],
      "id": "a3619b54-3c68-44a4-b640-7eedcde9cf1c",
      "name": "Niche scoring1",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-3-pro-preview",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        6848,
        -1088
      ],
      "id": "d0bf9a07-0ab9-4444-91ce-a219248a7185",
      "name": "Google Gemini Chat Model12",
      "credentials": {
        "googlePalmApi": {
          "id": "CnwZNGOBnl4fccXE",
          "name": "Google Gemini(PaLM) Api account 4"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"keywords\": [\n      { \"keyword\": \"Floral varsity mama\", \"niche_score\": 10, \"relevance_label\": \"Niche-Specific\" },\n      { \"keyword\": \"Gift for mom\", \"niche_score\": 3, \"relevance_label\": \"Broad\" },     \n      { \"keyword\": \"Varsity letter shirt\", \"niche_score\": 8, \"relevance_label\": \"Niche-Specific\"}\n    ]\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        7088,
        -1088
      ],
      "id": "85dbfcb9-9595-40b3-a1bf-4309ab74959d",
      "name": "Structured Output Parser12",
      "disabled": true
    },
    {
      "parameters": {
        "mode": "combine",
        "fieldsToMatchString": "output.keywords[0].keyword",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        7424,
        -896
      ],
      "id": "b6c8ef24-3ab9-45f6-a796-d2c86753b08d",
      "name": "Scoring_data1",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// On r√©cup√®re tous les items (mots-cl√©s) du n≈ìud pr√©c√©dent\nconst selectedKeywords = $input.all(); \n\n// --- 1. PILIER VISIBILIT√â (30%) ---\nlet totalVisibility = 0;\nselectedKeywords.forEach(kw => {\n    const data = kw.json;\n    const vol = data.search_volume || 0;\n    // Les mots-cl√©s de Titre p√®sent 1.5x plus dans l'algorithme Etsy\n    const weight = data.intent_label === 'Title' ? 1.5 : 1.0;\n    \n    // On utilise la racine carr√©e pour que le volume de 673k n'√©crase pas tout\n    totalVisibility += Math.sqrt(vol) * weight;\n});\n\n/** * NORMALISATION DU SCORE DE VISIBILIT√â\n * Pour une chandelle, un score de 1000 (somme des sqrt pond√©r√©es) \n * est un excellent objectif de reach.\n */\nconst visibilityScore = Math.min(100, (totalVisibility / 1000) * 100); \n\n// --- 2. PILIER CONVERSION (35%) ---\nconst avgTransactional = selectedKeywords.reduce((acc, kw) => acc + (kw.json.transactional_score || 5), 0) / selectedKeywords.length;\nconst conversionScore = avgTransactional * 10; // Transforme 8.5/10 en 85/100\n\n// --- 3. PILIER RELEVANCE (35%) ---\nconst avgNiche = selectedKeywords.reduce((acc, kw) => acc + (kw.json.niche_score || 5), 0) / selectedKeywords.length;\nconst relevanceScore = avgNiche * 10;\n\n// --- SCORE FINAL POND√âR√â ---\nconst finalLSI = Math.round(\n    (visibilityScore * 0.30) + \n    (conversionScore * 0.35) + \n    (relevanceScore * 0.35)\n);\n\nreturn {\n    listing_strength: finalLSI,\n    breakdown: {\n        visibility: Math.round(visibilityScore),\n        conversion: Math.round(conversionScore),\n        relevance: Math.round(relevanceScore)\n    },\n    stats: {\n        total_keywords: selectedKeywords.length,\n        raw_visibility_index: Math.round(totalVisibility)\n    }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8560,
        -896
      ],
      "id": "68b1a17a-1796-41c6-9bdb-b776a8b1b495",
      "name": "Globale evaluation1",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration du verdict global\n// On utilise .item car il n'y a normalement qu'un seul objet de stats\nconst globalStats = $('Globale evaluation1').item.json;\n\n// 2. R√©cup√©ration de la liste des mots-cl√©s filtr√©s\n// On utilise .all() et .map() pour extraire tous les objets de la liste\nconst filteredKeywords = $('SEO Mode filter1').all().map(item => item.json);\n\n// 3. Fusion finale\n// On cr√©e un objet unique qui contient les stats globales ET la liste de mots-cl√©s\nconst finalMerge = {\n  ...globalStats, // Inclus listing_strength, breakdown et stats\n  keywords: filteredKeywords // Ajoute la liste compl√®te des 13-15 mots-cl√©s\n};\n\n// 4. Retourner le r√©sultat au format n8n\nreturn [\n  finalMerge\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8832,
        -896
      ],
      "id": "114de845-f861-4b71-acd3-d951a1898f10",
      "name": "fusion 1",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "\n// 1. R√©cup√©ration des donn√©es et param√®tres\nconst results = $input.first().json.result;\nconst editFields = $(\"Edit Fields\").first().json || {};\nconst tag_count = editFields.Tag_count || 20;\nconst seo_mode = (editFields.seo_mode || \"balanced\").toLowerCase(); // broad, balanced, sniper\n\n// 2. D√©finition des profils de multiplicateurs\nconst modeConfig = {\n    broad: {\n        niche_boost: 1.5,\n        niche_penalty: 0.8,\n        volume_factor: 1.5,\n        tx_boost_factor: 1.0\n    },\n    balanced: {\n        niche_boost: 4.0,\n        niche_penalty: 0.1,\n        volume_factor: 1.0,\n        tx_boost_factor: 1.1\n    },\n    sniper: {\n        niche_boost: 7.0,\n        niche_penalty: 0.01, // √âlimine presque tout ce qui n'est pas niche\n        volume_factor: 0.4,\n        tx_boost_factor: 1.6\n    }\n};\n\n// On s√©lectionne la config active\nconst cfg = modeConfig[seo_mode] || modeConfig.balanced;\n\nlet processed = results.map(item => {\n    const avgVolume = item.search_volume || 0;\n    const comp = (item.competition !== null && item.competition !== undefined) ? item.competition : 0.5;\n    const kw = (item.keyword || \"\").toLowerCase();\n    const txScore = item.transactional_score || 5; \n    const intentLabel = item.intent_label || 'Tag'; \n    const nicheScore = item.niche_score || 5; \n\n\n    // --- Gestion s√©curis√©e de l'historique des volumes ---\n    // Si monthly_searches est null ou n'est pas un tableau, on utilise un tableau de 12 z√©ros\n    let monthlyVolumes = [];\n    if (item.monthly_searches && Array.isArray(item.monthly_searches)) {\n        monthlyVolumes = item.monthly_searches.map(m => m.search_volume || 0).reverse();\n    } else {\n        monthlyVolumes = new Array(12).fill(0);\n    }\n\n    // --- Calculs des tendances (bas√©s sur les 12 mois) ---\n    // S√©curit√© : on s'assure d'avoir assez de donn√©es, sinon moyennes √† 0\n    const last3MonthsAvg = monthlyVolumes.length >= 12 \n        ? (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3 \n        : 0;\n    const first3MonthsAvg = monthlyVolumes.length >= 3 \n        ? (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3 \n        : 0;\n    \n    const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n    const isEvergreen = monthlyVolumes.length > 0 && monthlyVolumes.every(v => v > (avgVolume * 0.2));\n    const isPromising = avgVolume > 200 && comp < 0.4;\n\n\n\n    // --- √âTAPE 1 : BASE VOLUME (Ajust√©e par le mode) ---\n    // On applique le volume_factor sur la racine carr√©e\n    let finalScore = (Math.sqrt(avgVolume * cfg.volume_factor) * (1 - comp + 0.2));\n\n    // --- √âTAPE 2 : BOOST TRANSACTIONNEL (Ajust√© par le mode) ---\n    finalScore *= (1 + (txScore / 10) * cfg.tx_boost_factor);\n\n    // --- √âTAPE 3 : LOGIQUE DE NICHE DURCIE (Ajust√©e par le mode) ---\n    if (nicheScore >= 8) {\n        finalScore *= cfg.niche_boost; \n    } \n    else if (nicheScore <= 4) {\n        finalScore *= cfg.niche_penalty;\n    }\n\n    // --- √âTAPE 4 : BOOSTS STRAT√âGIQUES (Fixes) ---\n    if (intentLabel === 'Title') finalScore *= 1.25;\n    const wordCount = kw.split(' ').filter(w => w.length > 0).length;\n    if (wordCount >= 3) finalScore *= 1.2;\n\n    return {\n        ...item,\n        opportunity_score: Math.round(finalScore),\n\t\t status: {\n            trending: isTrending,\n            evergreen: isEvergreen,\n            promising: isPromising\n           }\n    };\n});\n\n// 3. S√©lection et Diversit√© (Identique)\nconst selectedTags = [];\nconst conceptTracker = {};\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n    if (selectedTags.length >= tag_count) break;\n    const words = item.keyword.toLowerCase().split(' ');\n    const concept = words[0]; \n    conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n    if (conceptTracker[concept] <= 2) {\n        selectedTags.push(item);\n    }\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        8288,
        -896
      ],
      "id": "b232f539-4838-4a50-aae0-07d0193d4658",
      "name": "SEO Mode filter1",
      "disabled": true
    },
    {
      "parameters": {
        "batchSize": 50,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        6416,
        -1072
      ],
      "id": "d55ac483-75c6-42a1-bda2-db336868fa95",
      "name": "Loop Over Items2",
      "disabled": true
    },
    {
      "parameters": {
        "batchSize": 50,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        6400,
        -912
      ],
      "id": "b9c1f111-02aa-44e0-a7cd-f6fbcd5a3dc1",
      "name": "Loop Over Items3",
      "disabled": true
    },
    {
      "parameters": {
        "fieldToSplitOut": "output.keywords",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        5888,
        -1072
      ],
      "id": "8816cf79-ea4e-4f94-b50e-03cc9b63e309",
      "name": "Split Out2",
      "disabled": true
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output.keywords"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        6544,
        -1312
      ],
      "id": "ae280ec3-6cbf-499a-9bf7-852745ffa035",
      "name": "Aggregate2",
      "disabled": true
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output.keywords"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        6544,
        -720
      ],
      "id": "126ed4e8-6bc8-4aca-b37a-4157bd52731e",
      "name": "Aggregate3",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "\n// 1. R√©cup√©ration des donn√©es et param√®tres\nconst results = $input.first().json.result;\nconst editFields = $(\"Edit Fields\").first().json || {};\nconst tag_count = editFields.Tag_count || 20;\nconst seo_mode = (editFields.seo_mode || \"balanced\").toLowerCase(); // broad, balanced, sniper\n\n// 2. D√©finition des profils de multiplicateurs\nconst modeConfig = {\n    broad: {\n        niche_boost: 1.5,\n        niche_penalty: 0.8,\n        volume_factor: 1.5,\n        tx_boost_factor: 1.0\n    },\n    balanced: {\n        niche_boost: 4.0,\n        niche_penalty: 0.1,\n        volume_factor: 1.0,\n        tx_boost_factor: 1.1\n    },\n    sniper: {\n        niche_boost: 7.0,\n        niche_penalty: 0.01, // √âlimine presque tout ce qui n'est pas niche\n        volume_factor: 0.4,\n        tx_boost_factor: 1.6\n    }\n};\n\n// On s√©lectionne la config active\nconst cfg = modeConfig[seo_mode] || modeConfig.balanced;\n\nlet processed = results.map(item => {\n    const avgVolume = item.search_volume || 0;\n    const comp = (item.competition !== null && item.competition !== undefined) ? item.competition : 0.5;\n    const kw = (item.keyword || \"\").toLowerCase();\n    const txScore = item.transactional_score || 5; \n    const intentLabel = item.intent_label || 'Tag'; \n    const nicheScore = item.niche_score || 5; \n\n\n    // --- Gestion s√©curis√©e de l'historique des volumes ---\n    // Si monthly_searches est null ou n'est pas un tableau, on utilise un tableau de 12 z√©ros\n    let monthlyVolumes = [];\n    if (item.monthly_searches && Array.isArray(item.monthly_searches)) {\n        monthlyVolumes = item.monthly_searches.map(m => m.search_volume || 0).reverse();\n    } else {\n        monthlyVolumes = new Array(12).fill(0);\n    }\n\n    // --- Calculs des tendances (bas√©s sur les 12 mois) ---\n    // S√©curit√© : on s'assure d'avoir assez de donn√©es, sinon moyennes √† 0\n    const last3MonthsAvg = monthlyVolumes.length >= 12 \n        ? (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3 \n        : 0;\n    const first3MonthsAvg = monthlyVolumes.length >= 3 \n        ? (monthlyVolumes[0] + monthlyVolumes[1] + monthlyVolumes[2]) / 3 \n        : 0;\n    \n    const isTrending = last3MonthsAvg > (first3MonthsAvg * 1.3);\n    const isEvergreen = monthlyVolumes.length > 0 && monthlyVolumes.every(v => v > (avgVolume * 0.2));\n    const isPromising = avgVolume > 200 && comp < 0.4;\n\n\n\n    // --- √âTAPE 1 : BASE VOLUME (Ajust√©e par le mode) ---\n    // On applique le volume_factor sur la racine carr√©e\n    let finalScore = (Math.sqrt(avgVolume * cfg.volume_factor) * (1 - comp + 0.2));\n\n    // --- √âTAPE 2 : BOOST TRANSACTIONNEL (Ajust√© par le mode) ---\n    finalScore *= (1 + (txScore / 10) * cfg.tx_boost_factor);\n\n    // --- √âTAPE 3 : LOGIQUE DE NICHE DURCIE (Ajust√©e par le mode) ---\n    if (nicheScore >= 8) {\n        finalScore *= cfg.niche_boost; \n    } \n    else if (nicheScore <= 4) {\n        finalScore *= cfg.niche_penalty;\n    }\n\n    // --- √âTAPE 4 : BOOSTS STRAT√âGIQUES (Fixes) ---\n    if (intentLabel === 'Title') finalScore *= 1.25;\n    const wordCount = kw.split(' ').filter(w => w.length > 0).length;\n    if (wordCount >= 3) finalScore *= 1.2;\n\n\n    return {\n        ...item,\n        opportunity_score: Math.round(finalScore),\n\t\t status: {\n            trending: isTrending,\n            evergreen: isEvergreen,\n            promising: isPromising\n           }\n    };\n});\n\n// 3. S√©lection et Diversit√© (Identique)\nconst selectedTags = [];\nconst conceptTracker = {};\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n    if (selectedTags.length >= tag_count) break;\n    const words = item.keyword.toLowerCase().split(' ');\n    const concept = words[0]; \n    conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n    if (conceptTracker[concept] <= 2) {\n        selectedTags.push(item);\n    }\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1952,
        -1456
      ],
      "id": "7e232cde-931d-4f56-a477-886dc0bf8839",
      "name": "Avant nouvelle formule"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are the \"PennySEO Intelligence Engine,\" a specialist in Etsy Marketplace SEO and Niche Analysis. Your mission is to quantify the alignment between keywords and a specific product niche.\n\n# Objective\nFor each keyword provided, assign a **Niche Score** and a **Relevance Label**. This data will be used to determine if a keyword is \"On-Target\" (Specific) or \"Broad\" (Generic) to ensure the listing reaches the most qualified buyers. \n\n# Target Context for Calibration. \nTo calibrate your analysis, use the following target:\n- **Theme:**{{ $('Edit Fields').item.json.Theme }}\n- **Niche:** {{ $('Edit Fields').item.json.Niche }}\n- **Sub-niche:**{{ $('Edit Fields').item.json.SubNiche }}\n- **Costum niche:**{{ $('Edit Fields').item.json.Custom_niche }}\n- **Product Type:**{{ $('Edit Fields').item.json.ProductType }}\n\n# Reference Data for Calibration\n### Examples of High Niche Alignment (Score 8-10 | Label: Niche-Specific)\n*Keywords that describe the exact aesthetic, specific recipient, or unique style of the product.*\nFloral varsity mama shirt, Retro wildflower mom tee, Varsity letter mama sweatshirt, Aesthetic floral mother gift, Botanical varsity style top, Custom wildflower mama outfit, Trendy floral varsity apparel, Vintage mama floral design.\n\n### Examples of Low Niche Alignment (Score 1-3 | Label: Broad)\n*Keywords that are too generic, marketplace-wide terms, or unrelated styles.*\nGift for her, Mothers day gift, Personalized shirt, Custom clothing, Birthday present, Best seller Etsy, Handmade gift, Women's fashion, New mom gift, Christmas gift for mom, Comfortable shirt, High quality tee.\n\n# Scoring Rules\n1. **Niche Score (1-10):** - 10: Perfect Semantic Match (Matches Style + Aesthetic + Recipient + Product).\n   - 5: Category Match (Matches the Recipient or Product, but ignores the specific Style/Aesthetic).\n   - 1: Generic/Broad Match (Marketplace fillers that apply to millions of unrelated products).\n2. **Relevance Label (Niche-Specific vs Broad):**\n   - **Niche-Specific:** The keyword targets the core identity and unique \"DNA\" of the listing.\n   - **Broad:** The keyword targets a massive, high-competition audience with no specific style preference.\n\n# Task\nAnalyze the provided list of keywords based on the Target Context. Return ONLY a JSON array of objects. Do not include any text before or after the JSON.\n\n# Output Format (Example)\n[\n  \"keywords\": [\n      { \"keyword\": \"Floral varsity mama\", \"niche_score\": 10, \"relevance_label\": \"Niche-Specific\" },\n      { \"keyword\": \"Gift for mom\", \"niche_score\": 3, \"relevance_label\": \"Broad\" },\n      ...,\n      { \"keyword\": \"Varsity letter shirt\", \"niche_score\": 8, \"relevance_label\": \"Niche-Specific\"}\n    ]\n]\n\n# Keywords to Analyze:\n{{ JSON.stringify($json.output.keywords) }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1904,
        -2176
      ],
      "id": "0aae3d00-b489-4d5a-97da-62f1f392ea23",
      "name": "Old niche_scoring",
      "retryOnFail": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Role\nYou are the \"PennySEO Intelligence Engine,\" a specialist in Etsy Marketplace SEO. Your mission is to quantify the transactional value of keywords.\n\n# Objective\nFor each keyword provided, assign a Transactional Score and an Intent Label. This data will be used to filter and prioritize the most profitable keywords for Etsy sellers.\n\n# Reference Data for Calibration\n### Examples of High Transactional (Score 8-10 | Label: Title)\nPersonalized gold necklace, Custom pet portrait, Handmade ceramic mug, Engagement ring box, Vintage leather bag, Boho wedding dress, Nursery wall art, Gift for bridesmaids, Monogrammed leather wallet, Hand-poured soy candle, Minimalist wood desk, Personalized baby blanket, Custom neon sign, Bridesmaid proposal box, 1st anniversary gift, Crochet baby hat, Mid century planter, Custom wood sign, Aesthetic jewelry box, Initial ring silver.\n\n### Examples of Low Transactional / Informational (Score 1-3 | Label: Tag)\nHow to clean gold, History of engagement rings, Ceramic glazing techniques, What is boho style, Caring for leather bags, Meaning of birthstones, DIY nursery decor ideas, How to knit hats, Types of soy wax, Wedding anniversary traditions, Benefits of wood furniture, History of neon signs, How to style planters, Origins of macrame, Caring for silver jewelry, Definition of minimalist design, How to measure ring, Choosing a baby blanket, Meaning of lotus flower, History of vintage fashion.\n\n# Scoring Rules\n1. **Transactional Score (1-10):** \n   - 10: Immediate purchase intent (Specific product + Buyer modifier).\n   - 5: Moderate intent (General product or broad category).\n   - 1: Purely informational or educational.\n2. **Intent Label (Title vs Tag):**\n   - **Title:** The keyword is a primary search term, highly descriptive, and high-volume.\n   - **Tag:** The keyword is a secondary search term, a synonym, or an occasion/recipient modifier.\n\n# Task\nAnalyze the provided list of keywords. Return ONLY a JSON array of objects. Do not include any text before or after the JSON.\n\n# Output Format (Example)\n[\n  \"keywords\": [\n      { \"keyword 1\": \"Custom Mug\", \"transactional_score\": 10, \"intent_label\": \"Title\" },\n      { \"keyword 2\": \"Pottery ideas\", \"transactional_score\": 2, \"intent_label\": \"Tag\" },\n      ...,\n      { \"keyword 100\":\"Coffee mug\", \"transactional_score\": 9 , \"intent_label\": \"Title\"}\n    ]\n]\n\n\n# Keywords to Analyze:\n{{ JSON.stringify($json.output.keywords) }}",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1728,
        -464
      ],
      "id": "5f9f2d2b-fe9e-4122-a908-3cd667a1eb82",
      "name": "Transactionnal intention scoring2",
      "retryOnFail": true,
      "disabled": true
    },
    {
      "parameters": {
        "content": "## I'm a note \n\n## KEYWORD QUALITY GUIDELINES (EXAMPLES & COUNTER-EXAMPLES)\nTo ensure high commercial viability, follow the \"Search Intent\" logic. Avoid describing the image as a robot; instead, describe it as a marketer aiming for a specific buyer's need.\n\n1. Apparel & Identity (T-shirts, Hoodies)\nGOOD (Intent/Vibe): \"Retired English Teacher Gift\", \"Dark Academia Aesthetic\", \"Spicy Book Lover Tee\", \"Retro 90s Streetwear\".\nBAD (Literal/Technical): \"T-shirt with text\", \"Alphabet font shirt\", \"Woman in office clothing\", \"Round neck garment\", \"Cotton fabric top\".\n\n2. Home Decor & Mood (Posters, Art Prints)\nGOOD (Intent/Vibe): \"Mid Century Modern Cat Art\", \"Nursery Earth Tones Decor\", \"Bathroom Humor Wall Art\", \"Minimalist City Map\".\nBAD (Literal/Technical): \"Rectangle paper poster\", \"Landscape with blue sky\", \"Picture of a cat\", \"Vertical orientation\", \"Satin finish print\".\n\n3. Gifting & Humor (Mugs, Accessories)\nGOOD (Intent/Vibe): \"Sarcastic Office Gift\", \"Secret Santa Gag Gift\", \"Coworker Christmas Present\", \"Dino Nerd Apparel\".\nBAD (Literal/Technical): \"Grabber T-Rex mug\", \"Small arms dinosaur cup\", \"Ceramic cup with handle\", \"Object with green graphic\".\n\n4. Universal \"Blacklist\" (STRICTLY PROHIBITED)\nAvoid these \"Empty\" or \"Technical\" terms that waste SEO space:\nDemographic Fluff: \"Millennial buyer\", \"Gen Z person\", \"Adult human gift\", \"Gift for 30 year old\".\nTechnical Jargon: \"Slab serif font\", \"High contrast design\", \"Hex code colors\", \"Vector graphic\", \"DPI resolution\".\nGeneric Adjectives: \"Unique design\", \"High quality\", \"Best selling style\", \"Perfect gift\", \"Amazing present\".",
        "height": 496,
        "width": 704
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1264,
        -1072
      ],
      "typeVersion": 1,
      "id": "a796cc12-dba3-43e1-94c8-810bd58b31da",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es et param√®tres\nconst results = $input.first().json.result;\nconst editFields = $(\"Edit Fields\").first().json || {};\nconst tag_count = 20//editFields.Tag_count || 150;\nconst seo_mode = (editFields.seo_mode || \"balanced\").toLowerCase();\n\n// 2. Configuration des exposants (Weights) et Hard Filters\nconst modeParams = { \n  //a pour le Volume (V), \n  //b pour la concurrence (C) (comp√©tition) , \n  //g pour le transactionnel (T) et \n  //d pour la niche (N)\n    broad: {\n        a: 0.45, b: 0.20, g: 0.20, d: 0.15, // Volume dominant\n        //minT: 0, minN: 0\n       minT: 3, minN: 0\n    },\n    balanced: {\n        a: 0.35, b: 0.20, g: 0.30, d: 0.20, // √âquilibre\n        //minT: 0, minN: 0\n        minT: 5, minN: 6\n    },\n    sniper: {\n        //a: 0.15, b: 0.20, g: 0.35, d: 0.30, // Pr√©cision dominante\n        a: 0.30, b: 0.20, g: 0.30, d: 0.25,\n        //minT: 0, minN: 0\n        minT: 6, minN: 7\n    }\n};\n\nconst p = modeParams[seo_mode] || modeParams.balanced;\n\n// 3. Pr√©-calcul pour la normalisation (Max Volume)\nconst maxVol = Math.max(...results.map(i => i.search_volume || 0), 100);\n\n// 4. Traitement et Scoring\nlet processed = results.map(item => {\n    const rawVol = item.search_volume || 0;\n    const rawComp = (item.competition !== null && item.competition !== undefined) ? parseFloat(item.competition) : 0.5;\n    const txScore = item.transactional_score || 5;\n    const nicheScore = item.niche_score || 5;\n\n    // --- √âTAPE A : Hard Filters ---\n    if (txScore < p.minT || nicheScore < p.minN) return null;\n\n    // --- √âTAPE B : Normalisation (0-1) ---\n    const V = Math.log(rawVol + 1) / Math.log(maxVol + 1);\n    const C = 1 - rawComp; // C √©lev√© = comp√©tition faible (plus facile)\n    const T = Math.pow(txScore / 10, 2);\n    const N = Math.pow(nicheScore / 10, 2);\n\n  \n    // --- √âTAPE C : Formule de Puissance Globale ---\n    let finalScore = 100 * (\n        Math.pow(V || 0.01, p.a) * Math.pow(C || 0.01, p.b) * Math.pow(T || 0.01, p.g) * Math.pow(N || 0.01, p.d)\n    );\n\n    // --- √âTAPE D : Boosts contextuels ---\n    if (item.intent_label === 'Title') finalScore *= 1.2;\n    const wordCount = (item.keyword || \"\").split(' ').filter(w => w.length > 0).length;\n    if (wordCount >= 3) finalScore *= 1.1;\n\n\n  \n    // --- √âTAPE E : Calculs des tendances r√©vis√©s ---\n    let monthlyVolumes = [];\n    if (item.monthly_searches && Array.isArray(item.monthly_searches)) {\n        // On r√©cup√®re les volumes dans l'ordre chronologique (du plus ancien au plus r√©cent)\n        monthlyVolumes = item.monthly_searches.map(m => m.search_volume || 0).reverse();\n    } else {\n        monthlyVolumes = new Array(12).fill(0);\n    }\n\n\n   // 1. Stabilit√© (Evergreen)\n   // On calcule la d√©viation. Si le volume du mois le plus bas est trop loin de la moyenne, ce n'est pas evergreen.\n    const minVolume = Math.min(...monthlyVolumes);\n    const isEvergreen = monthlyVolumes.length >= 12 && minVolume > (rawVol * 0.4); // Seuil mont√© √† 40%\n\n\n    // 2. Tendance (Trending)\n    // Plus robuste : on compare les 3 derniers mois aux 9 pr√©c√©dents\n    const recentAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n    const historicalAvg = monthlyVolumes.slice(0, 9).reduce((a, b) => a + b, 0) / 9;\n    const isTrending = recentAvg > (historicalAvg * 1.5); // +50% de croissance\n  \n  \n  \n    // 3. Potentiel (Promising)\n    // Au lieu de 200, on regarde si le mot-cl√© fait partie du top 10% des scores d'opportunit√© \n    // OU si son ratio Volume/Comp√©tition est exceptionnel.\n    const isPromising = (rawVol / (rawComp + 0.1)) > (maxVol / 2);\n\n    return {\n        ...item,\n        opportunity_score: Math.round(finalScore),\n        status: {\n            trending: isTrending,\n            evergreen: isEvergreen,\n            promising: isPromising\n        }\n    };\n}).filter(i => i !== null);\n\n// 5. S√©lection et Diversit√© (Concept Tracker)\nconst selectedTags = [];\nconst conceptTracker = {};\nprocessed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\nfor (const item of processed) {\n    if (selectedTags.length >= tag_count) break;\n    const concept = item.keyword.toLowerCase().split(' ')[0];\n    conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n    // Limite √† 2 tags par concept racine pour assurer la diversit√©\n    if (conceptTracker[concept] <= 2) {\n        selectedTags.push(item);\n    }\n}\n\nreturn selectedTags;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1936,
        -1248
      ],
      "id": "ccdb33a1-4f5f-4eee-ab02-4619835fb3b2",
      "name": "Avant 3 mode √† la fois"
    },
    {
      "parameters": {
        "jsCode": "// On r√©cup√®re tous les items (mots-cl√©s) du n≈ìud pr√©c√©dent\nconst selectedKeywords = $input.all(); \n\n// --- 1. PILIER VISIBILIT√â (30%) ---\nlet totalVisibility = 0;\nselectedKeywords.forEach(kw => {\n    const data = kw.json;\n    const vol = data.search_volume || 0;\n    // Les mots-cl√©s de Titre p√®sent 1.5x plus dans l'algorithme Etsy\n    const weight = data.intent_label === 'Title' ? 1.5 : 1.0;\n    \n    // On utilise la racine carr√©e pour que le volume de 673k n'√©crase pas tout\n    totalVisibility += Math.sqrt(vol) * weight;\n});\n\n/** * NORMALISATION DU SCORE DE VISIBILIT√â\n * Pour une chandelle, un score de 1000 (somme des sqrt pond√©r√©es) \n * est un excellent objectif de reach.\n */\nconst visibilityScore = Math.min(100, (totalVisibility / 1000) * 100); \n\n// --- 2. PILIER CONVERSION (35%) ---\nconst avgTransactional = selectedKeywords.reduce((acc, kw) => acc + (kw.json.transactional_score || 5), 0) / selectedKeywords.length;\nconst conversionScore = avgTransactional * 10; // Transforme 8.5/10 en 85/100\n\n// --- 3. PILIER RELEVANCE (35%) ---\nconst avgNiche = selectedKeywords.reduce((acc, kw) => acc + (kw.json.niche_score || 5), 0) / selectedKeywords.length;\nconst relevanceScore = avgNiche * 10;\n\n// --- SCORE FINAL POND√âR√â ---\nconst finalLSI = Math.round(\n    (visibilityScore * 0.30) + \n    (conversionScore * 0.35) + \n    (relevanceScore * 0.35)\n);\n\nreturn {\n    listing_strength: finalLSI,\n    breakdown: {\n        visibility: Math.round(visibilityScore),\n        conversion: Math.round(conversionScore),\n        relevance: Math.round(relevanceScore)\n    },\n    stats: {\n        total_keywords: selectedKeywords.length,\n        raw_visibility_index: Math.round(totalVisibility)\n    }\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2224,
        -1248
      ],
      "id": "288f7327-036c-4f32-a688-fca640952840",
      "name": "Avant 3 mode √† la fois1"
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration du verdict global\n// On utilise .item car il n'y a normalement qu'un seul objet de stats\nconst globalStats = $('Globale evaluation').item.json;\n\n// 2. R√©cup√©ration de la liste des mots-cl√©s filtr√©s\n// On utilise .all() et .map() pour extraire tous les objets de la liste\nconst filteredKeywords = $('SEO Mode filter').all().map(item => item.json);\n\n// 3. Fusion finale\n// On cr√©e un objet unique qui contient les stats globales ET la liste de mots-cl√©s\nconst finalMerge = {\n  ...globalStats, // Inclus listing_strength, breakdown et stats\n  keywords: filteredKeywords // Ajoute la liste compl√®te des 13-15 mots-cl√©s\n};\n\n// 4. Retourner le r√©sultat au format n8n\nreturn [\n  finalMerge\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2496,
        -1248
      ],
      "id": "95f96b6b-8278-4855-8e09-77fa83eb63e1",
      "name": "Avant 3 mode √† la fois2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.dataforseo.com/v3/keywords_data/google/search_volume/live",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBasicAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "=[\n  {\n    \"keywords\":  [{{ JSON.stringify($('Webhook').item.json.body.keyword) }}], \n    \"location_name\": \"United States\", \n    \"language_name\": \"English\"\n  }\n]\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        160,
        1728
      ],
      "id": "9d532f00-216e-4733-b310-48d4e4307920",
      "name": "DataForSEO stats4",
      "credentials": {
        "httpBasicAuth": {
          "id": "EyflDjZ9IR19K2Gd",
          "name": "DataForSEO account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. R√©cup√©ration des donn√©es et param√®tres\n// On acc√®de au premier √©l√©ment de 'tasks' pour r√©cup√©rer le tableau 'result'\nconst inputData = $input.first().json;\nconst results = inputData.tasks && inputData.tasks[0] ? inputData.tasks[0].result : [];\n\nconst editFields = $(\"Edit Fields\").first().json || {};\nconst nb_selection_ia = 13;\nconst tag_count = 20;\n\n// 2. Configuration des exposants (Weights)\nconst modeParams = { \n    broad: {\n        a: 0.45, b: 0.20, g: 0.20, d: 0.15,\n        minT: 3, minN: 0\n    },\n    balanced: {\n        a: 0.40, b: 0.20, g: 0.25, d: 0.20,\n        minT: 0, minN: 0 // Ajust√© car absent du code pr√©c√©dent\n    },\n    sniper: {\n        a: 0.30, b: 0.20, g: 0.30, d: 0.25,\n        minT: 6, minN: 7\n    }\n};\n\n// 3. Pr√©-calcul pour la normalisation (Max Volume)\nconst maxVol = Math.max(...results.map(i => i.search_volume || 0), 100);\n\n// Fonction de scoring r√©utilisable\nconst processKeywordsForMode = (modeName) => {\n    const p = modeParams[modeName];\n    \n    // --- √âTAPES : Calculs ---\n    let processed = results.map(item => {\n        const rawVol = item.search_volume || 0;\n        const rawComp = (item.competition !== null && item.competition !== undefined) ? parseFloat(item.competition) : 0.5;\n\n        // Normalisation\n        const V = Math.log(rawVol + 1) / Math.log(maxVol + 1);\n        const C = 1 - rawComp;\n\n        // Formule de Score\n        let finalScore = 100 * (\n            Math.pow(V || 0.01, p.a) * Math.pow(C || 0.01, p.b) \n        );\n\n        // Boosts\n        const wordCount = (item.keyword || \"\").split(' ').filter(w => w.length > 0).length;\n        if (wordCount >= 3) finalScore *= 1.1;\n\n        // Tendances\n        let monthlyVolumes = [];\n        if (item.monthly_searches && Array.isArray(item.monthly_searches)) {\n            monthlyVolumes = item.monthly_searches.map(m => m.search_volume || 0).reverse();\n        } else {\n            monthlyVolumes = new Array(12).fill(0);\n        }\n\n        const minVolume = Math.min(...monthlyVolumes);\n        const isEvergreen = monthlyVolumes.length >= 12 && minVolume > (rawVol * 0.4);\n        const recentAvg = (monthlyVolumes[11] + monthlyVolumes[10] + monthlyVolumes[9]) / 3;\n        const historicalAvg = monthlyVolumes.slice(0, 9).reduce((a, b) => a + b, 0) / 9;\n        const isTrending = recentAvg > (historicalAvg * 1.5);\n        const isPromising = (rawVol / (rawComp + 0.1)) > (maxVol / 2);\n\n        return {\n            ...item,\n            opportunity_score: null, //Math.round(finalScore),\n            status: {\n                trending: isTrending,\n                evergreen: isEvergreen,\n                promising: isPromising\n            }\n        };\n    }).filter(i => i !== null);\n\n    // --- √âTAPE 5 : S√©lection et Diversit√© ---\n    const selectedTags = [];\n    const conceptTracker = {};\n    processed.sort((a, b) => b.opportunity_score - a.opportunity_score);\n\n    for (const item of processed) {\n        if (selectedTags.length >= tag_count) break;\n        const concept = item.keyword.toLowerCase().split(' ')[0];\n        conceptTracker[concept] = (conceptTracker[concept] || 0) + 1;\n\n        if (conceptTracker[concept] <= 2) {\n            selectedTags.push(item);\n        }\n    }\n\n    // --- √âTAPE 6 : Marquage de la s√©lection IA ---\n    return selectedTags.map((item, index) => {\n        return {\n            ...item,\n            is_selection_ia: false,\n            is_user_added : true\n        };\n    });\n};\n\n// Ex√©cution\nreturn {\n   // broad: processKeywordsForMode('broad'),\n    balanced: processKeywordsForMode('balanced'),\n    //sniper: processKeywordsForMode('sniper')\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        400,
        1728
      ],
      "id": "16f2b559-b3e2-4fff-8330-b3745d6c6878",
      "name": "SEO Mode filter2"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        640,
        1728
      ],
      "id": "ed26e921-439b-4d0e-a264-8a0b3a065750",
      "name": "Respond to Webhook8"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2c9f24e1-8a25-4690-9794-d2fd5ed32ce8",
              "name": "Theme",
              "value": "={{ $('Edit Fields').item.json.Theme }}",
              "type": "string"
            },
            {
              "id": "d0d512e5-5867-4f11-9f78-e5922409d756",
              "name": "Niche",
              "value": "={{ $('Edit Fields').item.json.Niche }}",
              "type": "string"
            },
            {
              "id": "f193c35b-3537-45de-b13c-8252c5dc3f5c",
              "name": "SubNiche",
              "value": "={{ $('Edit Fields').item.json.SubNiche }}",
              "type": "string"
            },
            {
              "id": "b824ef16-7e24-47f5-919c-3fb11f016cf2",
              "name": "output.keywords",
              "value": "={{ $json.output.keywords }}",
              "type": "array"
            },
            {
              "id": "d9b06306-6325-451c-be21-dc7f547f7d33",
              "name": "Description",
              "value": "={{ $('Edit Fields').item.json.Description }}",
              "type": "string"
            },
            {
              "id": "5c51f47d-d265-49e2-96ea-0be4f2eb17e3",
              "name": "ProductType",
              "value": "={{ $('Edit Fields').item.json.ProductType }}",
              "type": "string"
            },
            {
              "id": "f3c7fa43-3db4-4524-a1e6-6e90c7f75bd7",
              "name": "visual_aesthetic",
              "value": "={{ $('Edit Fields').item.json.visual_aesthetic }}",
              "type": "string"
            },
            {
              "id": "368d3af8-1998-4409-9a06-fe9889e84c5a",
              "name": "visual_typography",
              "value": "={{ $('Edit Fields').item.json.visual_typography }}",
              "type": "string"
            },
            {
              "id": "3e744a85-d7e8-4fdb-9567-694271b5f876",
              "name": "visual_graphics",
              "value": "={{ $('Edit Fields').item.json.visual_graphics }}",
              "type": "string"
            },
            {
              "id": "feec9826-11c5-4aaa-b905-7afb337fb042",
              "name": "visual_colors",
              "value": "={{ $('Edit Fields').item.json.visual_colors }}",
              "type": "string"
            },
            {
              "id": "ee1801f6-3886-4c05-be6b-bcac475a1a88",
              "name": "visual_target_audience",
              "value": "={{ $('Edit Fields').item.json.visual_target_audience }}",
              "type": "string"
            },
            {
              "id": "5128a9ca-d20c-42bc-a5ff-bafda339c8ca",
              "name": "visual_overall_vibe",
              "value": "={{ $('Edit Fields').item.json.visual_overall_vibe }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        896,
        -1232
      ],
      "id": "31ee6a92-55c1-42e9-8c37-8f7a88234119",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "sU1FdPTnCSIYTwAq",
          "mode": "list",
          "cachedResultUrl": "/workflow/sU1FdPTnCSIYTwAq",
          "cachedResultName": "Niche_scoring"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1264,
        -1360
      ],
      "id": "e2e74be6-bd9e-4fbc-8394-3b052595fefa",
      "name": "Niche_scoring"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "IcuCp30iBBk0aL4T",
          "mode": "list",
          "cachedResultUrl": "/workflow/IcuCp30iBBk0aL4T",
          "cachedResultName": "Transactionnal_scoring"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1280,
        -1008
      ],
      "id": "1ca9457e-2952-4340-9229-21b25aae3d45",
      "name": "Transactionnal_scoring"
    }
  ],
  "pinData": {
    "Back up 100 keywords": [
      {
        "json": {
          "output": {
            "keywords": [
              "Book lover t-shirt",
              "Reader t-shirt",
              "Bookish t-shirt",
              "Floral bookish tee",
              "Cottagecore reader shirt",
              "Bookworm t-shirt",
              "Librarian t-shirt",
              "English major tee",
              "Book club t-shirt",
              "Booktok t-shirt",
              "Book aesthetic shirt",
              "Vintage book t-shirt",
              "Boho bookish tee",
              "Academia book shirt",
              "Cottagecore book tee",
              "Botanical book t-shirt",
              "Wildflower book shirt",
              "Earth tone t-shirt",
              "Espresso t-shirt",
              "Sage green t-shirt",
              "Mustard yellow tee",
              "Dusty rose t-shirt",
              "Cream book t-shirt",
              "Cozy reader t-shirt",
              "Introvert t-shirt",
              "Intellectual t-shirt",
              "Bookish gift tee",
              "Bookworm gift shirt",
              "Librarian gift t-shirt",
              "English major gift",
              "Book club gift",
              "Booktok gift shirt",
              "Reader present tee",
              "Book lover present",
              "Bookish women's tee",
              "Floral reading shirt",
              "Cottagecore aesthetic shirt",
              "Boho collegiate tee",
              "Academia style shirt",
              "Comfort Colors t-shirt",
              "Soft book t-shirt",
              "Arched text t-shirt",
              "Varsity book t-shirt",
              "Floral print t-shirt",
              "Botanical print tee",
              "Literary t-shirt",
              "Book lover apparel",
              "Reader graphic tee",
              "Bookish graphic tee",
              "Floral reader tee",
              "Cottagecore graphic tee",
              "Bookworm fashion top",
              "Library inspired shirt",
              "Book club shirt",
              "Booktok casual shirt",
              "Reader girl t-shirt",
              "Aesthetic reading shirt",
              "Vintage collegiate tee",
              "Boho bookish top",
              "Academia core tee",
              "Nature lover shirt",
              "Wildflower women's tee",
              "Earthy casual tee",
              "Espresso comfort tee",
              "Sage literary tee",
              "Mustard aesthetic shirt",
              "Dusty rose book shirt",
              "Cream graphic tee",
              "Cozy bookish top",
              "Introverted reader top",
              "Intellectual style tee",
              "Bookish birthday shirt",
              "Christmas gift shirt",
              "Book lover gift",
              "Reader gifts shirt",
              "Librarian gifts shirt",
              "Bookworm gifts shirt",
              "Bookish friend tee",
              "Comfort Colors tee",
              "Boho collegiate tee",
              "Cottagecore academia shirt",
              "Bookish vintage tee",
              "Reading enthusiast tee",
              "Literary fan t-shirt",
              "Book club present",
              "Book worm apparel",
              "Floral botanical tee",
              "Nature inspired shirt",
              "Earthy reader tee",
              "Neutral aesthetic shirt",
              "Gen Z reader shirt",
              "Millennial book shirt",
              "Coffee shop tee",
              "Cozy hobby shirt",
              "Book themed shirt",
              "Reader's choice shirt",
              "Book page shirt",
              "Reader gift tee",
              "Librarian gift tee",
              "Booktok apparel"
            ]
          }
        }
      }
    ],
    "Old niche_scoring": [
      {
        "json": {
          "output": {
            "keywords": [
              {
                "keyword": "Cat lover gift",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Funny cat shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Sarcastic tee",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Humor t-shirt",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Anxiety shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Relatable tee",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Gift for her",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Women's t-shirt",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Graphic tee",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Animal lover shirt",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Pet owner gift",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Stress relief shirt",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Meme t-shirt",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Unique cat shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Birthday gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Holiday gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Everyday wear shirt",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Casual t-shirt",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Cute cat shirt",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Funny animal tee",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Comfy t-shirt",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Relaxed fit tee",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Gift for friend",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Gift for mom",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Cat mom shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Pet lover tee",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Sarcastic cat tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Anxiety humor shirt",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Funny graphic tee",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Cat themed shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Anxious cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Scribble core tee",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Relatable meme shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Disheveled cat tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Wide eyed cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Charcoal cat sketch",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Handwritten font shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Jittery text tee",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Shaky text shirt",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Hot mess shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Messy cat drawing",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Frazzled cat tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Panic attack shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Burnout humor tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Chaotic cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Dusty rose tee",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Mauve shirt cat",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Black ink design",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Heather mauve shirt",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Self deprecating shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Stressed cat tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Overwhelmed shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Exhausted cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Validation seeking tee",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Cozy chaotic shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Feline anxiety shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Cat with issues tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Inner chaos shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Modern burnout shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Jittery cat art",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Gift for coworker",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Gift for teacher",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Gift for nurse",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Millennial woman gift",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Mom life shirt",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Busy mom gift",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Healthcare worker gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Self care gift",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Friendship gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Birthday gift mom",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Christmas gift friend",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Funny mom gift",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Teacher gift shirt",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Nurse gift tee",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Coworker gift shirt",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Best friend shirt",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Sister gift idea",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Daughter gift idea",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Wife gift idea",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Stress relief gift",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Humor gift woman",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Sarcastic gift mom",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Cat mom present",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Gift for cat owner",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Get well gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "New job gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Just because gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Mother's Day gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Valentine's gift her",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Introvert gift shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Amatic style shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Scribble core shirt",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Relatable meme tee",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Disheveled feline tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Frantic cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Charcoal cat shirt",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Jittery baseline tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Hot mess apparel",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Messy drawing shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Frazzled nerves shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Panic attack cat tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Modern burnout tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Chaotic good tee",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Rose colored shirt",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Mauve ink shirt",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Self deprecating tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Stressed out shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Overwhelmed mom shirt",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Exhausted cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Validation seeking tee",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Comfy chaotic apparel",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Feline anxiety shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Cat issues shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Inner chaos shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Burnout era shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Anxious millennial tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Existential cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Social anxiety shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Introvert cat shirt",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Stressed cat tee",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Scribble core apparel",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Relatable meme apparel",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Chaotic humor shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Playful sarcasm tee",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Modern burnout apparel",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Cozy feminine shirt",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Soft aesthetic tee",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Irony fashion shirt",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Distressed graphic tee",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Sketchy art shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Hand drawn tee",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Artistic cat tee",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Unique graphic tee",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Indie aesthetic shirt",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Quirky cat shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Eccentric cat tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Sassy cat shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Funny animal apparel",
                "niche_score": 5,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Statement tee",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Anxiety core shirt",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Burnt out shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Cat mom tee",
                "niche_score": 6,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Self expressive tee",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Casual cool shirt",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Humorous apparel",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Funny slogan shirt",
                "niche_score": 4,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Text graphic tee",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Art print tee",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Visually chaotic tee",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Subtly sarcastic shirt",
                "niche_score": 7,
                "relevance_label": "Niche-Specific"
              }
            ]
          }
        }
      }
    ],
    "Transactionnal intention scoring2": [
      {
        "json": {
          "output": {
            "keywords": [
              {
                "keyword": "Cat lover gift",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Funny cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Sarcastic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Humor t-shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Anxiety shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Relatable tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for her",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Women's t-shirt",
                "transactional_score": 8,
                "intent_label": "Title"
              },
              {
                "keyword": "Graphic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Animal lover shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Pet owner gift",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Stress relief shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Meme t-shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Unique cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Birthday gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Holiday gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Everyday wear shirt",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Casual t-shirt",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Cute cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Funny animal tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Comfy t-shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Relaxed fit tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for friend",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for mom",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Cat mom shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Pet lover tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Sarcastic cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Anxiety humor shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Funny graphic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Cat themed shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Anxious cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Scribble core tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Relatable meme shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Disheveled cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Wide eyed cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Charcoal cat sketch",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Handwritten font shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Jittery text tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Shaky text shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Hot mess shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Messy cat drawing",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Frazzled cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Panic attack shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Burnout humor tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Chaotic cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Dusty rose tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Mauve shirt cat",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Black ink design",
                "transactional_score": 5,
                "intent_label": "Tag"
              },
              {
                "keyword": "Heather mauve shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Self deprecating shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Stressed cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Overwhelmed shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Exhausted cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Validation seeking tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Cozy chaotic shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Feline anxiety shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Cat with issues tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Inner chaos shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Modern burnout shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Jittery cat art",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for coworker",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for teacher",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for nurse",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Millennial woman gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Mom life shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Busy mom gift",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Healthcare worker gift",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Self care gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Friendship gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Birthday gift mom",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Christmas gift friend",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Funny mom gift",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Teacher gift shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Nurse gift tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Coworker gift shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Best friend shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Sister gift idea",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Daughter gift idea",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Wife gift idea",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Stress relief gift",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Humor gift woman",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Sarcastic gift mom",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Cat mom present",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Gift for cat owner",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Get well gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "New job gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Just because gift",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Mother's Day gift",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Valentine's gift her",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Introvert gift shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Amatic style shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Scribble core shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Relatable meme tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Disheveled feline tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Frantic cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Charcoal cat shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Jittery baseline tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Hot mess apparel",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Messy drawing shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Frazzled nerves shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Panic attack cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Modern burnout tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Chaotic good tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Rose colored shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Mauve ink shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Self deprecating tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Stressed out shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Overwhelmed mom shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Exhausted cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Validation seeking tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Comfy chaotic apparel",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Feline anxiety shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Cat issues shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Inner chaos shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Burnout era shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Anxious millennial tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Existential cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Social anxiety shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Introvert cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Stressed cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Scribble core apparel",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Relatable meme apparel",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Chaotic humor shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Playful sarcasm tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Modern burnout apparel",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Cozy feminine shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Soft aesthetic tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Irony fashion shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Distressed graphic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Sketchy art shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Hand drawn tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Artistic cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Unique graphic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Indie aesthetic shirt",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Quirky cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Eccentric cat tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Sassy cat shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Funny animal apparel",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Statement tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Anxiety core shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Burnt out shirt",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Cat mom tee",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Self expressive tee",
                "transactional_score": 8,
                "intent_label": "Tag"
              },
              {
                "keyword": "Casual cool shirt",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Humorous apparel",
                "transactional_score": 7,
                "intent_label": "Tag"
              },
              {
                "keyword": "Funny slogan shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Text graphic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Art print tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Visually chaotic tee",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Subtly sarcastic shirt",
                "transactional_score": 10,
                "intent_label": "Title"
              }
            ]
          }
        }
      }
    ],
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "n8n.srv840060.hstgr.cloud",
            "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/145.0.0.0 Safari/537.36",
            "content-length": "2325",
            "accept": "application/json, text/plain, */*",
            "accept-encoding": "gzip, deflate, br, zstd",
            "accept-language": "fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7",
            "content-type": "application/json",
            "origin": "http://localhost:5173",
            "priority": "u=1, i",
            "referer": "http://localhost:5173/",
            "sec-ch-ua": "\"Not:A-Brand\";v=\"99\", \"Google Chrome\";v=\"145\", \"Chromium\";v=\"145\"",
            "sec-ch-ua-mobile": "?0",
            "sec-ch-ua-platform": "\"Windows\"",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "cross-site",
            "x-forwarded-for": "207.253.153.5",
            "x-forwarded-host": "n8n.srv840060.hstgr.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "6b424419687d",
            "x-real-ip": "207.253.153.5"
          },
          "params": {},
          "query": {},
          "body": {
            "action": "generate_seo",
            "listing_id": "39b59a49-30c5-41ac-aa55-682eedbe7d13",
            "user_id": "a9267dac-3307-4444-b58e-2493147bca71",
            "payload": {
              "image_url": "https://cpzbipqceavfeoiqkenz.supabase.co/storage/v1/object/public/mockups_bucket/a9267dac-3307-4444-b58e-2493147bca71/1771693008715_Capture_d__cran_2026-02-21_114635.jpg",
              "visual_aesthetic": "Grandmillennial / Coquette Chic / Chinoiserie",
              "visual_typography": "Classic, formal Serif font for initials (traditional, high-end feel) paired with a softer, personalized script or hand-written style for the date.",
              "visual_graphics": "Interlocking heart lockets, dainty ribbon bows, vintage floral vines (delftware style), butterflies, and gold-gilded rims.",
              "visual_colors": "Cobalt Blue, Crisp White, and Metallic Gold accents. Creates a mood of timeless elegance, purity, and 'Old Money' sophistication.",
              "visual_target_audience": "Brides-to-be and Maids of Honor seeking 'Something Blue' accessories; women aged 20-35 interested in the 'Old Money' or 'Bridgerton' aesthetic; shoppers looking for sentimental engagement or bridal shower gifts.",
              "visual_overall_vibe": "A timeless, romantic keepsake that perfectly blends the trendy 'coquette' bow aesthetic with traditional blue-and-white porcelain elegance.",
              "categorization": {
                "theme": "Life Events & Milestones",
                "niche": "Weddings & Engagements",
                "sub_niche": "Personalized Ring Dishes",
                "custom_niche": null,
                "custom_listing": null
              },
              "product_details": {
                "product_type": "personalized ceramique dishes",
                "tone": "Auto-detect",
                "client_description": "",
                "tag_count": 13,
                "seo_mode": "balanced"
              },
              "shop_context": {
                "shop_name": "DourliacStudio",
                "shop_bio": "DourliacStudio offers a diverse collection of print-on-demand apparel, ranging from cozy book and pet-themed designs to humorous neurodivergent and inspirational Christian faith apparel.",
                "target_audience": "Book lovers, cat and dog owners, tech enthusiasts, neurodivergent individuals, and people seeking Christian faith-based apparel.",
                "brand_tone": "Eclectic, Humorous, and Inspirational",
                "brand_keywords": [
                  "Reading",
                  "Animals",
                  "Neurodiversity",
                  "Christian Faith",
                  "Humor"
                ],
                "signature_text": "Thank you for choosing DourliacStudio ‚Äì your support helps us share a diverse range of cozy, humorous, and faith-inspired designs!"
              }
            },
            "metadata": {
              "app_version": "1.0.0",
              "timestamp": "2026-02-21T16:56:49.731Z"
            }
          },
          "webhookUrl": "https://n8n.srv840060.hstgr.cloud/webhook/9d856f4f-d5ae-4fce-b2da-72f584288dc2",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "Keywords generation": [
      {
        "json": {
          "output": {
            "keywords": [
              "Wedding gift",
              "Engagement gift",
              "Bridal shower gift",
              "Ring dish holder",
              "Jewelry keepsake dish",
              "Ceramic trinket dish",
              "Personalized dish",
              "Bridesmaid gift",
              "Wedding accessory",
              "Small jewelry dish",
              "Personalized ring dish",
              "Custom jewelry dish",
              "Something blue dish",
              "Bridal ring holder",
              "Engagement ring tray",
              "Wedding ring bowl",
              "Chinoiserie dish",
              "Coquette ring dish",
              "Grandmillennial dish",
              "Blue white dish",
              "Gift for bride",
              "Maid of honor gift",
              "Fianc√©e gift",
              "Wedding day gift",
              "Bridal shower favor",
              "Engagement party gift",
              "Future Mrs gift",
              "Bride to be gift",
              "Wife gift",
              "Anniversary gift",
              "Old money aesthetic",
              "Bridgerton wedding dish",
              "Coquette bow dish",
              "Chinoiserie ring holder",
              "Blue porcelain dish",
              "Personalized wedding dish",
              "Bridal something blue dish",
              "Engagement ring display",
              "Monogrammed ring dish",
              "Wedding trinket tray",
              "Coquette aesthetic",
              "Grandmillennial style",
              "Chinoiserie decor",
              "Timeless ring dish",
              "Romantic trinket dish",
              "Elegant ring dish",
              "Vintage style dish",
              "Sentimental dish",
              "Classic wedding dish",
              "Blue white porcelain"
            ]
          }
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "Niche_scoring": [
      {
        "json": {
          "output": {
            "keywords": [
              {
                "keyword": "Wedding gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Engagement gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Bridal shower gift",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Ring dish holder",
                "niche_score": 5,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Jewelry keepsake dish",
                "niche_score": 5,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Ceramic trinket dish",
                "niche_score": 6,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Personalized dish",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Bridesmaid gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Wedding accessory",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Small jewelry dish",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Personalized ring dish",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Custom jewelry dish",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Something blue dish",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Bridal ring holder",
                "niche_score": 6,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Engagement ring tray",
                "niche_score": 6,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Wedding ring bowl",
                "niche_score": 6,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Chinoiserie dish",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Coquette ring dish",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Grandmillennial dish",
                "niche_score": 8,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Blue white dish",
                "niche_score": 5,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Gift for bride",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Maid of honor gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Fianc√©e gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Wedding day gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Bridal shower favor",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Engagement party gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Future Mrs gift",
                "niche_score": 2,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Bride to be gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Wife gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Anniversary gift",
                "niche_score": 1,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Old money aesthetic",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Bridgerton wedding dish",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Coquette bow dish",
                "niche_score": 10,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Chinoiserie ring holder",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Blue porcelain dish",
                "niche_score": 7,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Personalized wedding dish",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Bridal something blue dish",
                "niche_score": 9,
                "relevance_label": "Niche-Specific"
              },
              {
                "keyword": "Engagement ring display",
                "niche_score": 5,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Monogrammed ring dish",
                "niche_score": 6,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Wedding trinket tray",
                "niche_score": 6,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Coquette aesthetic",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Grandmillennial style",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Chinoiserie decor",
                "niche_score": 5,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Timeless ring dish",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Romantic trinket dish",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Elegant ring dish",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Vintage style dish",
                "niche_score": 5,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Sentimental dish",
                "niche_score": 3,
                "relevance_label": "Broad"
              },
              {
                "keyword": "Classic wedding dish",
                "niche_score": 4,
                "relevance_label": "Neutral"
              },
              {
                "keyword": "Blue white porcelain",
                "niche_score": 6,
                "relevance_label": "Neutral"
              }
            ]
          }
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "Transactionnal_scoring": [
      {
        "json": {
          "output": {
            "keywords": [
              {
                "keyword": "Wedding gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Engagement gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Bridal shower gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Ring dish holder",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Jewelry keepsake dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Ceramic trinket dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Personalized dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Bridesmaid gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Wedding accessory",
                "transactional_score": 8,
                "intent_label": "Title"
              },
              {
                "keyword": "Small jewelry dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Personalized ring dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Custom jewelry dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Something blue dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Bridal ring holder",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Engagement ring tray",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Wedding ring bowl",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Chinoiserie dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Coquette ring dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Grandmillennial dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Blue white dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Gift for bride",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Maid of honor gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Fianc√©e gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Wedding day gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Bridal shower favor",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Engagement party gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Future Mrs gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Bride to be gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Wife gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Anniversary gift",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Old money aesthetic",
                "transactional_score": 3,
                "intent_label": "Tag"
              },
              {
                "keyword": "Bridgerton wedding dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Coquette bow dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Chinoiserie ring holder",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Blue porcelain dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Personalized wedding dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Bridal something blue dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Engagement ring display",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Monogrammed ring dish",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Wedding trinket tray",
                "transactional_score": 10,
                "intent_label": "Title"
              },
              {
                "keyword": "Coquette aesthetic",
                "transactional_score": 2,
                "intent_label": "Tag"
              },
              {
                "keyword": "Grandmillennial style",
                "transactional_score": 2,
                "intent_label": "Tag"
              },
              {
                "keyword": "Chinoiserie decor",
                "transactional_score": 6,
                "intent_label": "Tag"
              },
              {
                "keyword": "Timeless ring dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Romantic trinket dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Elegant ring dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Vintage style dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Sentimental dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Classic wedding dish",
                "transactional_score": 9,
                "intent_label": "Title"
              },
              {
                "keyword": "Blue white porcelain",
                "transactional_score": 5,
                "intent_label": "Tag"
              }
            ]
          }
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "DataForSEO stats": [
      {
        "json": {
          "version": "0.1.20260220",
          "status_code": 20000,
          "status_message": "Ok.",
          "time": "3.0690 sec.",
          "cost": 0.075,
          "tasks_count": 1,
          "tasks_error": 0,
          "tasks": [
            {
              "id": "02211858-9990-0093-0000-73c1a4a5f9c5",
              "status_code": 20000,
              "status_message": "Ok.",
              "time": "3.0013 sec.",
              "cost": 0.075,
              "result_count": 50,
              "path": [
                "v3",
                "keywords_data",
                "google",
                "search_volume",
                "live"
              ],
              "data": {
                "api": "keywords_data",
                "function": "search_volume",
                "se": "google",
                "keywords": [
                  "Wedding gift",
                  "Engagement gift",
                  "Bridal shower gift",
                  "Ring dish holder",
                  "Jewelry keepsake dish",
                  "Ceramic trinket dish",
                  "Personalized dish",
                  "Bridesmaid gift",
                  "Wedding accessory",
                  "Small jewelry dish",
                  "Personalized ring dish",
                  "Custom jewelry dish",
                  "Something blue dish",
                  "Bridal ring holder",
                  "Engagement ring tray",
                  "Wedding ring bowl",
                  "Chinoiserie dish",
                  "Coquette ring dish",
                  "Grandmillennial dish",
                  "Blue white dish",
                  "Gift for bride",
                  "Maid of honor gift",
                  "Fianc√©e gift",
                  "Wedding day gift",
                  "Bridal shower favor",
                  "Engagement party gift",
                  "Future Mrs gift",
                  "Bride to be gift",
                  "Wife gift",
                  "Anniversary gift",
                  "Old money aesthetic",
                  "Bridgerton wedding dish",
                  "Coquette bow dish",
                  "Chinoiserie ring holder",
                  "Blue porcelain dish",
                  "Personalized wedding dish",
                  "Bridal something blue dish",
                  "Engagement ring display",
                  "Monogrammed ring dish",
                  "Wedding trinket tray",
                  "Coquette aesthetic",
                  "Grandmillennial style",
                  "Chinoiserie decor",
                  "Timeless ring dish",
                  "Romantic trinket dish",
                  "Elegant ring dish",
                  "Vintage style dish",
                  "Sentimental dish",
                  "Classic wedding dish",
                  "Blue white porcelain"
                ],
                "location_name": "United States",
                "language_name": "English"
              },
              "result": [
                {
                  "keyword": "Wedding gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2,
                  "search_volume": 33100,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 22200
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 49500
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 27100
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 27100
                    }
                  ]
                },
                {
                  "keyword": "Engagement gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.65,
                  "search_volume": 40500,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 33100
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 27100
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 40500
                    }
                  ]
                },
                {
                  "keyword": "Bridal shower gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.98,
                  "search_volume": 60500,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 27100
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 74000
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 90500
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 90500
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 90500
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 90500
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 90500
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 49500
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 40500
                    }
                  ]
                },
                {
                  "keyword": "Ring dish holder",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.38,
                  "search_volume": 2400,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 4400
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 2400
                    }
                  ]
                },
                {
                  "keyword": "Jewelry keepsake dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Ceramic trinket dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 0.97,
                  "cpc": 0.73,
                  "search_volume": 1600,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 720
                    }
                  ]
                },
                {
                  "keyword": "Personalized dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2.93,
                  "search_volume": 40,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 40
                    }
                  ]
                },
                {
                  "keyword": "Bridesmaid gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.65,
                  "search_volume": 18100,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 22200
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 27100
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 27100
                    }
                  ]
                },
                {
                  "keyword": "Wedding accessory",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.02,
                  "search_volume": 2900,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 2900
                    }
                  ]
                },
                {
                  "keyword": "Small jewelry dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.7,
                  "search_volume": 210,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 260
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 260
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 320
                    }
                  ]
                },
                {
                  "keyword": "Personalized ring dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2.12,
                  "search_volume": 590,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 390
                    }
                  ]
                },
                {
                  "keyword": "Custom jewelry dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2.58,
                  "search_volume": 590,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 260
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 590
                    }
                  ]
                },
                {
                  "keyword": "Something blue dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Bridal ring holder",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.21,
                  "search_volume": 1900,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 2400
                    }
                  ]
                },
                {
                  "keyword": "Engagement ring tray",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.02,
                  "search_volume": 320,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 390
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 260
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 390
                    }
                  ]
                },
                {
                  "keyword": "Wedding ring bowl",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.87,
                  "search_volume": 10,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 10
                    }
                  ]
                },
                {
                  "keyword": "Chinoiserie dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.12,
                  "search_volume": 170,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 140
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 210
                    }
                  ]
                },
                {
                  "keyword": "Coquette ring dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Grandmillennial dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Blue white dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.63,
                  "search_volume": 110,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 140
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 140
                    }
                  ]
                },
                {
                  "keyword": "Gift for bride",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.94,
                  "search_volume": 720,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 590
                    }
                  ]
                },
                {
                  "keyword": "Maid of honor gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2.1,
                  "search_volume": 6600,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 4400
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 4400
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 5400
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 5400
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 8100
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 14800
                    }
                  ]
                },
                {
                  "keyword": "Fianc√©e gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Wedding day gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2.78,
                  "search_volume": 480,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 320
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 590
                    }
                  ]
                },
                {
                  "keyword": "Bridal shower favor",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.8,
                  "search_volume": 8100,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 3600
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 8100
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 14800
                    }
                  ]
                },
                {
                  "keyword": "Engagement party gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.95,
                  "search_volume": 1300,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 880
                    }
                  ]
                },
                {
                  "keyword": "Future Mrs gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.77,
                  "search_volume": 20,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 30
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 20
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 10
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 20
                    }
                  ]
                },
                {
                  "keyword": "Bride to be gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.94,
                  "search_volume": 720,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 480
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 590
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 880
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 720
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 590
                    }
                  ]
                },
                {
                  "keyword": "Wife gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 3.21,
                  "search_volume": 22200,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 135000
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 14800
                    }
                  ]
                },
                {
                  "keyword": "Anniversary gift",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 2.85,
                  "search_volume": 60500,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 40500
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 49500
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 74000
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 49500
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 60500
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 90500
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 60500
                    }
                  ]
                },
                {
                  "keyword": "Old money aesthetic",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 0.13,
                  "cpc": 1.82,
                  "search_volume": 9900,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 6600
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 8100
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 8100
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 8100
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 8100
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 12100
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 9900
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 12100
                    }
                  ]
                },
                {
                  "keyword": "Bridgerton wedding dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Coquette bow dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Chinoiserie ring holder",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Blue porcelain dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.53,
                  "search_volume": 70,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 40
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 70
                    }
                  ]
                },
                {
                  "keyword": "Personalized wedding dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Bridal something blue dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Engagement ring display",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 0.91,
                  "cpc": 0.8,
                  "search_volume": 70,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 70
                    }
                  ]
                },
                {
                  "keyword": "Monogrammed ring dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.28,
                  "search_volume": 170,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 210
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 140
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 170
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 140
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 140
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 140
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 140
                    }
                  ]
                },
                {
                  "keyword": "Wedding trinket tray",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Coquette aesthetic",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 0.1,
                  "cpc": 1.47,
                  "search_volume": 18100,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 14800
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 18100
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 22200
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 22200
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 22200
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 27100
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 33100
                    }
                  ]
                },
                {
                  "keyword": "Grandmillennial style",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 0.63,
                  "cpc": 1.22,
                  "search_volume": 1900,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 2400
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 1900
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 2400
                    }
                  ]
                },
                {
                  "keyword": "Chinoiserie decor",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.7,
                  "search_volume": 1300,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 1000
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 1300
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 1600
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 1600
                    }
                  ]
                },
                {
                  "keyword": "Timeless ring dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Romantic trinket dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Elegant ring dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Vintage style dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 0.59,
                  "search_volume": 90,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 110
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 50
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 90
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 70
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 140
                    }
                  ]
                },
                {
                  "keyword": "Sentimental dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Classic wedding dish",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": null,
                  "cpc": null,
                  "search_volume": null,
                  "categories": null,
                  "monthly_searches": null
                },
                {
                  "keyword": "Blue white porcelain",
                  "location_code": 2840,
                  "language_code": "en",
                  "search_partners": false,
                  "competition": 1,
                  "cpc": 1.43,
                  "search_volume": 3600,
                  "categories": null,
                  "monthly_searches": [
                    {
                      "year": 2025,
                      "month": 12,
                      "search_volume": 3600
                    },
                    {
                      "year": 2025,
                      "month": 11,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 10,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 9,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 8,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 7,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 6,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 5,
                      "search_volume": 3600
                    },
                    {
                      "year": 2025,
                      "month": 4,
                      "search_volume": 3600
                    },
                    {
                      "year": 2025,
                      "month": 3,
                      "search_volume": 3600
                    },
                    {
                      "year": 2025,
                      "month": 2,
                      "search_volume": 2900
                    },
                    {
                      "year": 2025,
                      "month": 1,
                      "search_volume": 4400
                    }
                  ]
                }
              ]
            }
          ]
        },
        "pairedItem": {
          "item": 0
        }
      }
    ]
  },
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "HTTP Request2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Keywords generation",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Tags to evaluate",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Prepare SEO brief",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Scrape Esty shop wep page",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "DataForSEO stats4",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Keywords generation",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Optimized Title and Description",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Write shop profile info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Write shop profile info",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Write shop profile info",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request2": {
      "main": [
        [
          {
            "node": "Image analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Image analysis",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser4": {
      "ai_outputParser": [
        [
          {
            "node": "Image analysis",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Image analysis": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Keywords generation",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Keywords generation": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO stats": {
      "main": [
        [
          {
            "node": "Fusion des listes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Optimized Title and Description": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write shop profile info": {
      "main": [
        [
          {
            "node": "Respond to Webhook2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Scrape Esty shop wep page": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Tags to evaluate": {
      "main": [
        [
          {
            "node": "Split Out1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare SEO brief": {
      "main": [
        [
          {
            "node": "Optimized Title and Description",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "sniper prompt",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Filter 5 best": {
      "main": [
        [
          {
            "node": "sniper prompt",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser7": {
      "ai_outputParser": [
        [
          {
            "node": "sniper prompt",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO stats1": {
      "main": [
        [
          {
            "node": "Filter keywords1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter keywords1": {
      "main": [
        [
          {
            "node": "sniper_keywords",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "sniper_keywords": {
      "main": [
        [
          {
            "node": "finalSeolist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "Optimized Title and Description",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model7": {
      "ai_languageModel": [
        [
          {
            "node": "Tags insights1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser8": {
      "ai_outputParser": [
        [
          {
            "node": "Tags insights1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Tags insights1": {
      "main": [
        [
          {
            "node": "Global scoring1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Global scoring1": {
      "main": [
        [
          {
            "node": "Global Eval",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser9": {
      "ai_outputParser": [
        [
          {
            "node": "Global Eval",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model8": {
      "ai_languageModel": [
        [
          {
            "node": "Global Eval",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Respond to Webhook4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out1": {
      "main": [
        [
          {
            "node": "Tags insights1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "finalSeolist": {
      "main": [
        [
          {
            "node": "Respond to Webhook6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Global Eval": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "sniper prompt": {
      "main": [
        [
          {
            "node": "DataForSEO stats1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Get Competitor seed",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser3": {
      "ai_outputParser": [
        [
          {
            "node": "Get Competitor seed",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Get competitor listings",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Get competitor listings",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser5": {
      "ai_outputParser": [
        [
          {
            "node": "Get competitor listings",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO stats2": {
      "main": [
        [
          {
            "node": "Filter keywords2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter keywords2": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Competitor seed": {
      "main": [
        [
          {
            "node": "Google search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get competitor listings": {
      "main": [
        [
          {
            "node": "DataForSEO stats2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [],
        []
      ]
    },
    "Google search": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google response": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser6": {
      "ai_outputParser": [
        [
          {
            "node": "Transactionnal intention scoring",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model10": {
      "ai_languageModel": [
        [
          {
            "node": "Transactionnal intention scoring",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Transactionnal intention scoring": {
      "main": [
        []
      ]
    },
    "Fusion des listes": {
      "main": [
        [
          {
            "node": "SEO Mode filter",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Niche scoring": {
      "main": [
        []
      ]
    },
    "Google Gemini Chat Model9": {
      "ai_languageModel": [
        [
          {
            "node": "Niche scoring",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser10": {
      "ai_outputParser": [
        [
          {
            "node": "Niche scoring",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Scoring_data": {
      "main": [
        [
          {
            "node": "DataForSEO stats",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Globale evaluation": {
      "main": [
        [
          {
            "node": "fusion ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "fusion ": {
      "main": [
        [
          {
            "node": "Respond to Webhook5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SEO Mode filter": {
      "main": [
        [
          {
            "node": "Globale evaluation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO stats3": {
      "main": [
        [
          {
            "node": "Fusion des listes1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser11": {
      "ai_outputParser": [
        [
          {
            "node": "Transactionnal intention scoring1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model11": {
      "ai_languageModel": [
        [
          {
            "node": "Transactionnal intention scoring1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Transactionnal intention scoring1": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Fusion des listes1": {
      "main": [
        [
          {
            "node": "SEO Mode filter1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Niche scoring1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model12": {
      "ai_languageModel": [
        [
          {
            "node": "Niche scoring1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser12": {
      "ai_outputParser": [
        [
          {
            "node": "Niche scoring1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Scoring_data1": {
      "main": [
        [
          {
            "node": "DataForSEO stats3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Globale evaluation1": {
      "main": [
        [
          {
            "node": "fusion 1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "fusion 1": {
      "main": [
        [
          {
            "node": "Respond to Webhook7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SEO Mode filter1": {
      "main": [
        [
          {
            "node": "Globale evaluation1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [
          {
            "node": "Scoring_data1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Aggregate2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [
          {
            "node": "Scoring_data1",
            "type": "main",
            "index": 1
          }
        ],
        [
          {
            "node": "Aggregate3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out2": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate2": {
      "main": [
        [
          {
            "node": "Niche scoring1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate3": {
      "main": [
        [
          {
            "node": "Transactionnal intention scoring1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "DataForSEO stats4": {
      "main": [
        [
          {
            "node": "SEO Mode filter2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SEO Mode filter2": {
      "main": [
        [
          {
            "node": "Respond to Webhook8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Niche_scoring",
            "type": "main",
            "index": 0
          },
          {
            "node": "Transactionnal_scoring",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Niche_scoring": {
      "main": [
        [
          {
            "node": "Scoring_data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transactionnal_scoring": {
      "main": [
        [
          {
            "node": "Scoring_data",
            "type": "main",
            "index": 1
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "d50516e4-a724-4c11-9d93-b13419f94c06",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "cfd1401e3f0b2075dfe4693ad7a10a5d7ad8db7a3e3bef4f1f623f48b2a7a4ed"
  },
  "id": "fpLJwWveS4JGdh8k",
  "tags": []
}